<html>
    <style>
        textarea{
            width: 500px;
            height: 400px;
        }
    </style>
    <!--<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>-->
    <script type="text/javascript" src="bower_components/jquery/dist/jquery.js"></script>
    <script type="text/javascript" src="bower_components/jquery-textcomplete/dist/jquery.textcomplete.js"></script>
    <script type="text/javascript" scr="bower_components/emoji/lib/emoji.js"></script>
    <head>
        <title>My Test</title>
    </head>
    <body>
        <h5>Chat: </h5>
        <textarea id="textarea1"></textarea>
    </body>
    <script type="text/javascript">
   
    var dict={
                'hi':'hey!',
                'ke':'Keyssssss'
            };
    function shortKey(key,value){
        var self =this;
        self.key=key;
        self.value=value;
    }

    var arrays=[new shortKey('hi','Htedadsada'),new shortKey('fd','gvbsdbq3wf')]
    // var keys = Object.keys( dictinary );
     $('textarea').textcomplete([
    { 
        // shortcut strategy
        id: 'shortcut',
        match: /\B:([\-+\w]*)$/,
        search:  function (term, callback) {
        console.log('fff');
        callback(
            $.grep(arrays, function(el){ 
                console.log(el.key);
                console.log(term);
               return el.key.indexOf(term) === 0 ? el : null
                // if(term==null)
                // {
                //     return el.key;
                // }
                // else{
                //        return el.key===tern;
                //     }
               
                // return e.key==term;
            // $.map(shortKey, function (word,index) {
            // //return shortKey.
            // console.log(shortKey[index]);
            // console.log(shortKey.indexOf(word).key);
            // console.log(word.key);
            // return shortKey.indexOf(word) === term ? word : null;
        }));
        },
        // callback($.map(dict,function(keyWord) {
            // console.log(dict[index]);
            // console.log(dict);
            // Object.keys(driversCounter)
            // return dict[index];
            // return word.indexOf(term) === 0 ? word : null;
            // return dict[index];
            // $.map(this.words, function (word) {
            //     return word.indexOf(term) === 0 ? word : null;
            // }));
            // function (shortcut) {
            
            //  var dict={
            //     'hi':'hey!',
            //     'key':'Keyssssss'
            // };

            // for(key in this.dict){
            //     return dict[key]=== 0 ? key : null;;
            // }
        // }));
        // },
        template: function (value) {
            return '<p>' + value.key + '( '+value.value+' )' + '</p>';
        },
        replace: function (value) {
            return ':' + value.value + ': ';
        },
        index: 1
    },
    // { // tech companies
    //     id: 'tech-companies',
    //     words: ['apple', 'google', 'facebook', 'github'],
    //     match: /\b(\w{2,})$/,
    //     search: function (term, callback) {
    //         callback($.map(this.words, function (word) {
    //             return word.indexOf(term) === 0 ? word : null;
    //         }));
    //     },
    //     index: 1,
    //     replace: function (word) {
    //         return word + ' ';
    //     }
    // }
], {
    onKeydown: function (e, commands) {
        if (e.ctrlKey && e.keyCode === 74) { // CTRL-J
            return commands.KEY_ENTER;
        }
    }
});
    </script>

</html>