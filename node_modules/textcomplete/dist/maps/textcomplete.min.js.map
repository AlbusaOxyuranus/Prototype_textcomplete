{"version":3,"sources":["textcomplete.min.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_createClass","defineProperties","target","props","descriptor","defineProperty","key","protoProps","staticProps","_lodash","_lodash2","_events","CALLBACK_METHODS","Completer","_EventEmitter","this","_this","getPrototypeOf","strategies","forEach","strategy","finalize","push","text","query","extractQuery","execute","handleQueryResult","buildQuery","searchResults","emit","EventEmitter","events","lodash.bindall",2,"_dropdown_item","_dropdown_item2","_utils","_lodash3","_lodash4","_lodash5","_lodash6","DEFAULT_CLASS_NAME","Dropdown","_ref","_ref$className","className","undefined","footer","header","_ref$maxCount","maxCount","style","_ref$rotate","rotate","shown","items","el","document","createElement","id","display","position","zIndex","body","appendChild","parentNode","removeChild","clear","_el","cursorOffset","_this2","renderEvent","createCustomEvent","cancelable","defaultPrevented","rawResults","dropdownItems","searchResult","data","setStrategyId","renderEdge","append","setOffset","show","hide","dropdownItem","detail","selectEvent","deactivate","moveActiveItem","find","item","active","_this3","fragment","createDocumentFragment","appended","_this4","name","hasOwnProperty","showEvent","hideEvent","innerHTML","activeItem","getActiveItem","nextActiveItem","activate","preventDefault","strategyId","setAttribute","removeAttribute","type","source","content","createFragment","get","./dropdown_item","./utils","lodash.assignin","lodash.isfunction","lodash.uniqueid",3,"CLASS_NAME","ACTIVE_CLASS_NAME","DropdownItem","removeEventListener","onClick","onMouseover","dropdown","siblings","index","select","_e","li","render","addEventListener","nextIndex",4,"ESC","BS","OTHER","DOWN","UP","ENTER","Editor","apply","arguments","_searchResult","moveEvent","enterEvent","changeEvent","beforeCursor","getBeforeCursor","escEvent","keyCode","ctrlKey",5,"global","_textcomplete","_textcomplete2","_textarea","_textarea2","editors","Textcomplete","Textarea","window","./textarea","./textcomplete",6,"_search_result","_search_result2","Query","term","match","callback","search","results","map","result","./search_result",7,"SearchResult","afterCursor","replacement","replace","Array","isArray","template",8,"DEFAULT_TEMPLATE","_query","_query2","DEFAULT_INDEX","Strategy","cache","context","getMatchRegexp","searchWithCache","./query","lodash.isstring",9,"_get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getter","_editor","_editor2","_lineHeight","_lineHeight2","getCaretCoordinates","_Editor","isIE9","getIEVersion","startListening","stopListening","getAfterCursor","selectionStart","selectionEnd","focus","elOffset","calculateElementOffset","elScroll","getElScroll","cursorPosition","getCursorPosition","top","left","dir","right","documentElement","clientWidth","substring","scrollTop","scrollLeft","emitChangeEvent","getCode","event","emitMoveEvent","emitEnterEvent","emitEscEvent","onInput","onKeydown","onKeyup","./editor","line-height","textarea-caret",10,"_completer","_completer2","_dropdown","_dropdown2","_strategy","_strategy2","editor","options","completer","lockableTrigger","lock","free","run","finalizeEditor","strategyPropsArray","registerStrategy","getCursorOffset","unlock","action","trigger","applySearchResult","eventName","on","handleMove","handleEnter","handleEsc","handleChange","handleSelect","buildHandler","handleHit","removeAllListeners","removeListener","./completer","./dropdown","./strategy",11,"func","locked","queuedArgsToReplay","replayOrFree","replayArgs","unshift","args","slice","tagString","div","childNodes","defaultView","CustomEvent","rect","getBoundingClientRect","_el$ownerDocument","ownerDocument","pageYOffset","clientTop","pageXOffset","clientLeft","nav","navigator","userAgent","toLowerCase","indexOf","parseInt","split",12,"_maxListeners","isFunction","arg","isNumber","isObject","isUndefined","defaultMaxListeners","setMaxListeners","isNaN","er","handler","len","listeners","error","addListener","listener","m","newListener","warned","console","trace","once","g","fired","list","splice","ret","listenerCount","evlistener","emitter",13,"lineHeight","node","lnHeightStr","computedStyle","lnHeight","parseFloat","_lnHeightStyle","Math","round","nodeName","_node","fontSizeStr","fontSize","height","offsetHeight","computed-style",14,"prop","getComputedStyle","currentStyle","word","letter","toUpperCase",15,"isIndex","reIsUint","test","MAX_SAFE_INTEGER","assignValue","objValue","eq","objectProto","baseProperty","copyObject","copyObjectWith","customizer","newValue","createAssigner","assigner","rest","sources","guard","isIterateeCall","isArrayLike","other","isLength","getLength","tag","objectToString","funcTag","genTag","keysIn","toString","assignIn","lodash.keysin","lodash.rest",16,"baseTimes","iteratee","iteratorToArray","iterator","next","done","baseKeysIn","indexKeys","isString","isArguments","String","isPrototype","Ctor","proto","isArrayLikeObject","propertyIsEnumerable","argsTag","isObjectLike","stringTag","isProto","propsLength","indexes","skipIndexes","root","Reflect","enumerate","valueOf","lodash._root",17,"checkGlobal","objectTypes","function","freeExports","nodeType","freeModule","freeGlobal","freeSelf","freeWindow","thisGlobal",18,"thisArg","start","FUNC_ERROR_TEXT","nativeMax","toInteger","array","otherArgs","toNumber","INFINITY","sign","MAX_INTEGER","remainder","reTrim","isBinary","reIsBinary","reIsOctal","freeParseInt","reIsBadHex","NAN","max",19,"arrayEach","baseFlatten","bind","bindAll","methodNames","lodash._baseflatten","lodash.bind",20,"arrayPush","values","offset","depth","isStrict",21,"replaceHolders","placeholder","resIndex","PLACEHOLDER","getPlaceholder","createWrapper","BIND_FLAG","PARTIAL_FLAG","partials","bitmask","holders","lodash._createwrapper",22,"countHolders","baseCreate","objectCreate","composeArgs","isCurried","argsIndex","argsLength","holdersLength","leftIndex","leftLength","rangeLength","isUncurried","composeArgsRight","holdersIndex","rightIndex","rightLength","copyArray","createBaseWrapper","wrapper","fn","isBind","createCtorWrapper","thisBinding","createCurryWrapper","arity","createRecurryWrapper","createHybridWrapper","partialsRight","holdersRight","argPos","ary","holdersCount","newHolders","isBindKey","reorder","isFlip","reverse","isAry","ARY_FLAG","BIND_KEY_FLAG","CURRY_FLAG","CURRY_RIGHT_FLAG","FLIP_FLAG","createPartialWrapper","wrapFunc","isCurry","newArgPos","newHoldersRight","newPartials","newPartialsRight","PARTIAL_RIGHT_FLAG","CURRY_BOUND_FLAG","newData","arrLength","nativeMin","oldArray","min",23,"dup",24,25,26,"uniqueId","prefix","idCounter","lodash.tostring",27,"isSymbol","symbolTag","Symbol","symbolToString","symbolProto",28,"element","isBrowser","debug","querySelector","computed","whiteSpace","wordWrap","visibility","properties","isFirefox","scrollHeight","overflowY","overflow","textContent","span","coordinates","offsetTop","offsetLeft","backgroundColor","mozInnerScreenX"],"mappings":"CAAA,QAAUA,GAAEC,EAAEC,EAAEC,GAAG,QAASC,GAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,GAAIE,GAAkB,kBAATC,UAAqBA,OAAQ,KAAIF,GAAGC,EAAE,MAAOA,GAAEF,GAAE,EAAI,IAAGI,EAAE,MAAOA,GAAEJ,GAAE,EAAI,IAAIK,GAAE,GAAIC,OAAM,uBAAuBN,EAAE,IAAK,MAAMK,GAAEE,KAAK,mBAAmBF,EAAE,GAAIG,GAAEX,EAAEG,IAAIS,WAAYb,GAAEI,GAAG,GAAGU,KAAKF,EAAEC,QAAQ,SAASd,GAAG,GAAIE,GAAED,EAAEI,GAAG,GAAGL,EAAG,OAAOI,GAAEF,EAAEA,EAAEF,IAAIa,EAAEA,EAAEC,QAAQd,EAAEC,EAAEC,EAAEC,GAAG,MAAOD,GAAEG,GAAGS,QAAkD,IAAI,GAA1CL,GAAkB,kBAATD,UAAqBA,QAAgBH,EAAE,EAAEA,EAAEF,EAAEa,OAAOX,IAAID,EAAED,EAAEE,GAAI,OAAOD,KAAKa,GAAG,SAAST,EAAQU,EAAOJ,GACvd,YAcA,SAASK,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GAEvF,QAASG,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMb,GAAQ,IAAKa,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOd,GAAyB,gBAATA,IAAqC,kBAATA,GAA8Ba,EAAPb,EAElO,QAASe,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASE,UAAYC,OAAOC,OAAOH,GAAcA,EAAWC,WAAaG,aAAeC,MAAON,EAAUO,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeR,IAAYE,OAAOO,eAAiBP,OAAOO,eAAeV,EAAUC,GAAcD,EAASW,UAAYV,GAlBje,GAAIW,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIrC,GAAI,EAAGA,EAAIqC,EAAM9B,OAAQP,IAAK,CAAE,GAAIsC,GAAaD,EAAMrC,EAAIsC,GAAWT,WAAaS,EAAWT,aAAc,EAAOS,EAAWP,cAAe,EAAU,SAAWO,KAAYA,EAAWR,UAAW,GAAML,OAAOc,eAAeH,EAAQE,EAAWE,IAAKF,IAAiB,MAAO,UAAUtB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBnB,EAAYQ,UAAWiB,GAAiBC,GAAaP,EAAiBnB,EAAa0B,GAAqB1B,KAEhiBS,QAAOc,eAAelC,EAAS,cAC7BuB,OAAO,GAGT,IAAIe,GAAU5C,EAAQ,kBAElB6C,EAAWlC,EAAuBiC,GAElCE,EAAU9C,EAAQ,UAUlB+C,GAAoB,qBAMpBC,EAAY,SAAUC,GAGxB,QAASD,KACPjC,EAAgBmC,KAAMF,EAEtB,IAAIG,GAAQhC,EAA2B+B,KAAMxB,OAAO0B,eAAeJ,GAAWzC,KAAK2C,MAKnF,OAHAC,GAAME,eAEL,EAAGR,EAAAA,YAAkBM,EAAOJ,GACtBI,EAwFT,MAlGA7B,GAAU0B,EAAWC,GAkBrBd,EAAaa,IACXP,IAAK,WACLZ,MAAO,WAIL,MAHAqB,MAAKG,WAAWC,QAAQ,SAAUC,GAChC,MAAOA,GAASC,aAEXN,QAYTT,IAAK,mBACLZ,MAAO,SAA0B0B,GAE/B,MADAL,MAAKG,WAAWI,KAAKF,GACdL,QAUTT,IAAK,MACLZ,MAAO,SAAa6B,GAClB,GAAIC,GAAQT,KAAKU,aAAaF,EAC1BC,GACFA,EAAME,QAAQX,KAAKY,mBAEnBZ,KAAKY,yBAaTrB,IAAK,eACLZ,MAAO,SAAsB6B,GAC3B,IAAK,GAAIzD,GAAI,EAAGA,EAAIiD,KAAKG,WAAW7C,OAAQP,IAAK,CAC/C,GAAI0D,GAAQT,KAAKG,WAAWpD,GAAG8D,WAAWL,EAC1C,IAAIC,EACF,MAAOA,GAGX,MAAO,SAWTlB,IAAK,oBACLZ,MAAO,SAA2BmC,GAMhCd,KAAKe,KAAK,OAASD,cAAeA,QAI/BhB,GACPF,EAAQoB,aAEV5D,GAAAA,WAAkB0C,IACfmB,OAAS,GAAGC,iBAAiB,KAAKC,GAAG,SAASrE,EAAQU,EAAOJ,GAChE,YA4BA,SAASK,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GAEvF,QAASG,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMb,GAAQ,IAAKa,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOd,GAAyB,gBAATA,IAAqC,kBAATA,GAA8Ba,EAAPb,EAElO,QAASe,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASE,UAAYC,OAAOC,OAAOH,GAAcA,EAAWC,WAAaG,aAAeC,MAAON,EAAUO,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeR,IAAYE,OAAOO,eAAiBP,OAAOO,eAAeV,EAAUC,GAAcD,EAASW,UAAYV,GAhCje,GAAIW,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIrC,GAAI,EAAGA,EAAIqC,EAAM9B,OAAQP,IAAK,CAAE,GAAIsC,GAAaD,EAAMrC,EAAIsC,GAAWT,WAAaS,EAAWT,aAAc,EAAOS,EAAWP,cAAe,EAAU,SAAWO,KAAYA,EAAWR,UAAW,GAAML,OAAOc,eAAeH,EAAQE,EAAWE,IAAKF,IAAiB,MAAO,UAAUtB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBnB,EAAYQ,UAAWiB,GAAiBC,GAAaP,EAAiBnB,EAAa0B,GAAqB1B,KAEhiBS,QAAOc,eAAelC,EAAS,cAC7BuB,OAAO,GAGT,IAAIyC,GAAiBtE,EAAQ,mBAEzBuE,EAAkB5D,EAAuB2D,GAEzCE,EAASxE,EAAQ,WAEjB4C,EAAU5C,EAAQ,mBAElB6C,EAAWlC,EAAuBiC,GAElC6B,EAAWzE,EAAQ,mBAEnB0E,EAAW/D,EAAuB8D,GAElCE,EAAW3E,EAAQ,qBAEnB4E,EAAWjE,EAAuBgE,GAElC7B,EAAU9C,EAAQ,UAUlB6E,EAAqB,sCA2ErBC,EAAW,SAAU7B,GAgCvB,QAAS6B,GAASC,GAChB,GAAIC,GAAiBD,EAAKE,UACtBA,EAA+BC,SAAnBF,EAA+BH,EAAqBG,EAChEG,EAASJ,EAAKI,OACdC,EAASL,EAAKK,OACdC,EAAgBN,EAAKO,SACrBA,EAA6BJ,SAAlBG,EAA8B,GAAKA,EAC9CE,EAAQR,EAAKQ,MACbC,EAAcT,EAAKU,OACnBA,EAAyBP,SAAhBM,GAA4B,EAAOA,CAEhDzE,GAAgBmC,KAAM4B,EAEtB,IAAI3B,GAAQhC,EAA2B+B,KAAMxB,OAAO0B,eAAe0B,GAAUvE,KAAK2C,MAYlF,OAVAC,GAAMuC,OAAQ,EACdvC,EAAMwC,SACNxC,EAAMgC,OAASA,EACfhC,EAAMiC,OAASA,EACfjC,EAAMmC,SAAWA,EACjBnC,EAAMyC,GAAGX,UAAYA,EACrB9B,EAAMsC,OAASA,EACXF,IACD,EAAG1C,EAAAA,YAAkBM,EAAMyC,GAAGL,MAAOA,GAEjCpC,EA4ST,MApWA7B,GAAUwD,EAAU7B,GAEpBd,EAAa2C,EAAU,OACrBrC,IAAK,gBAKLZ,MAAO,WACL,GAAI+D,GAAKC,SAASC,cAAc,KAQhC,OAPAF,GAAGG,IAAM,EAAGrB,EAAAA,YAAkB,2BAC7B,EAAG7B,EAAAA,YAAkB+C,EAAGL,OACvBS,QAAS,OACTC,SAAU,WACVC,OAAQ,MAEVL,SAASM,KAAKC,YAAYR,GACnBA,MA+CXzD,EAAa2C,IACXrC,IAAK,WACLZ,MAAO,WAGL,MAFAqB,MAAK0C,GAAGS,WAAWC,YAAYpD,KAAK0C,IACpC1C,KAAKqD,QAAQC,IAAM,KACZtD,QAQTT,IAAK,SAYLZ,MAAO,SAAgBmC,EAAeyC,GACpC,GAAIC,GAASxD,KAETyD,GAAe,EAAGnC,EAAOoC,mBAAmB,UAAYC,YAAY,GAExE,IADA3D,KAAKe,KAAK,SAAU0C,GAChBA,EAAYG,iBACd,MAAO5D,KAET,IAAI6D,MACAC,IASJ,OARAhD,GAAcV,QAAQ,SAAU2D,GAC9BF,EAAWtD,KAAKwD,EAAaC,MACzBF,EAAcxG,OAASkG,EAAOpB,UAChC0B,EAAcvD,KAAK,GAAIc,GAAAA,WAAwB0C,MAGnD/D,KAAKqD,QAAQY,cAAcnD,EAAc,IAAIoD,WAAWL,EAAY,UAAUM,OAAOL,GAAeI,WAAWL,EAAY,UAAUO,UAAUb,GAAcc,OAC7JrE,KAAKe,KAAK,YAAa,EAAGO,EAAOoC,mBAAmB,aAC7C1D,QAUTT,IAAK,aACLZ,MAAO,WACL,MAAOqB,MAAKsE,OAAOjB,WAUrB9D,IAAK,SACLZ,MAAO,SAAgB4F,GACrB,GAAIC,IAAWT,aAAcQ,EAAaR,cACtCU,GAAe,EAAGnD,EAAOoC,mBAAmB,UAAYC,YAAY,EAAMa,OAAQA,GAEtF,OADAxE,MAAKe,KAAK,SAAU0D,GAChBA,EAAYb,iBACP5D,MAETA,KAAK0E,aACL1E,KAAKe,KAAK,YAAa,EAAGO,EAAOoC,mBAAmB,YAAcc,OAAQA,KACnExE,SASTT,IAAK,KACLZ,MAAO,SAAYrC,GACjB,MAAO0D,MAAKwC,MAAQxC,KAAK2E,eAAe,OAAQrI,GAAK0D,QASvDT,IAAK,OACLZ,MAAO,SAAcrC,GACnB,MAAO0D,MAAKwC,MAAQxC,KAAK2E,eAAe,OAAQrI,GAAK0D,QAUvDT,IAAK,gBACLZ,MAAO,WACL,MAAOqB,MAAKyC,MAAMmC,KAAK,SAAUC,GAC/B,MAAOA,GAAKC,YAahBvF,IAAK,SACLZ,MAAO,SAAgB8D,GACrB,GAAIsC,GAAS/E,KAETgF,EAAWrC,SAASsC,wBAOxB,OANAxC,GAAMrC,QAAQ,SAAUyE,GACtBE,EAAOtC,MAAMlC,KAAKsE,GAClBA,EAAKK,SAASH,GACdC,EAAS9B,YAAY2B,EAAKnC,MAE5B1C,KAAK0C,GAAGQ,YAAY8B,GACbhF,QAUTT,IAAK,YACLZ,MAAO,SAAmB4E,GACxB,GAAI4B,GAASnF,IAOb,QALC,MAAO,QAAS,SAAU,QAAQI,QAAQ,SAAUgF,GAC/C7B,EAAa8B,eAAeD,KAC9BD,EAAOzC,GAAGL,MAAM+C,GAAQ7B,EAAa6B,GAAQ,QAG1CpF,QAaTT,IAAK,OACLZ,MAAO,WACL,IAAKqB,KAAKwC,MAAO,CACf,GAAI8C,IAAa,EAAGhE,EAAOoC,mBAAmB,QAAUC,YAAY,GAEpE,IADA3D,KAAKe,KAAK,OAAQuE,GACdA,EAAU1B,iBACZ,MAAO5D,KAETA,MAAK0C,GAAGL,MAAMS,QAAU,QACxB9C,KAAKwC,OAAQ,EACbxC,KAAKe,KAAK,SAAU,EAAGO,EAAOoC,mBAAmB,UAEnD,MAAO1D,SAaTT,IAAK,OACLZ,MAAO,WACL,GAAIqB,KAAKwC,MAAO,CACd,GAAI+C,IAAa,EAAGjE,EAAOoC,mBAAmB,QAAUC,YAAY,GAEpE,IADA3D,KAAKe,KAAK,OAAQwE,GACdA,EAAU3B,iBACZ,MAAO5D,KAETA,MAAK0C,GAAGL,MAAMS,QAAU,OACxB9C,KAAKwC,OAAQ,EACbxC,KAAKe,KAAK,UAAW,EAAGO,EAAOoC,mBAAmB,WAEpD,MAAO1D,SAWTT,IAAK,QACLZ,MAAO,WAML,MALAqB,MAAK0C,GAAG8C,UAAY,GACpBxF,KAAKyC,MAAMrC,QAAQ,SAAUyE,GAC3B,MAAOA,GAAKvE,aAEdN,KAAKyC,SACEzC,QAWTT,IAAK,iBACLZ,MAAO,SAAwByG,EAAM9I,GACnC,GAAImJ,GAAazF,KAAK0F,gBAClBC,EAAiB3D,MAUrB,OARE2D,GADEF,EACeA,EAAWL,GAEF,SAATA,EAAkBpF,KAAKyC,MAAM,GAAKzC,KAAKyC,MAAMzC,KAAKyC,MAAMnF,OAAS,GAEhFqI,IACFA,EAAeC,WACftJ,EAAEuJ,kBAEG7F,QAUTT,IAAK,gBACLZ,MAAO,SAAuBoF,GAC5B,GAAI+B,GAAa/B,GAAgBA,EAAa1D,SAASjB,MAAMyD,EAM7D,OALIiD,GACF9F,KAAK0C,GAAGqD,aAAa,gBAAiBD,GAEtC9F,KAAK0C,GAAGsD,gBAAgB,iBAEnBhG,QAWTT,IAAK,aACLZ,MAAO,SAAoBkF,EAAYoC,GACrC,GAAIC,GAASlG,KAAKiG,EAClB,IAAIC,EAAQ,CACV,GAAIC,IAAW,EAAGzE,EAAAA,YAAkBwE,GAAUA,EAAOrC,GAAcqC,EAC/DlB,GAAY,EAAG1D,EAAO8E,gBAAgB,2BAA6BH,EAAO,KAAOE,EAAU,QAC/FnG,MAAK0C,GAAGQ,YAAY8B,GAEtB,MAAOhF,SAGTT,IAAK,KACL8G,IAAK,WAEH,MADArG,MAAKsD,MAAQtD,KAAKsD,IAAM1B,EAASgB,iBAC1B5C,KAAKsD,QAIT1B,GACPhC,EAAQoB,aAEV5D,GAAAA,WAAkBwE,IACf0E,kBAAkB,EAAEC,UAAU,GAAGtF,OAAS,GAAGuF,kBAAkB,GAAGC,oBAAoB,GAAGC,kBAAkB,KAAKC,GAAG,SAAS7J,EAAQU,EAAOJ,GAC9I,YAiBA,SAASK,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GAEvF,QAASG,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAjBhH,GAAIiB,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIrC,GAAI,EAAGA,EAAIqC,EAAM9B,OAAQP,IAAK,CAAE,GAAIsC,GAAaD,EAAMrC,EAAIsC,GAAWT,WAAaS,EAAWT,aAAc,EAAOS,EAAWP,cAAe,EAAU,SAAWO,KAAYA,EAAWR,UAAW,GAAML,OAAOc,eAAeH,EAAQE,EAAWE,IAAKF,IAAiB,MAAO,UAAUtB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBnB,EAAYQ,UAAWiB,GAAiBC,GAAaP,EAAiBnB,EAAa0B,GAAqB1B,KAEhiBS,QAAOc,eAAelC,EAAS,cAC7BuB,OAAO,IAETvB,EAAQwJ,WAAa5E,MAErB,IAAItC,GAAU5C,EAAQ,mBAElB6C,EAAWlC,EAAuBiC,GAElC6B,EAAWzE,EAAQ,kBAEnB0E,EAAW/D,EAAuB8D,GAMlCqF,EAAaxJ,EAAQwJ,WAAa,oBAClCC,EAAoBD,EAAa,UACjC/G,GAAoB,UAAW,eAM/BiH,EAAe,WAKjB,QAASA,GAAa/C,GACpBlG,EAAgBmC,KAAM8G,GAEtB9G,KAAK+D,aAAeA,EACpB/D,KAAK6C,IAAM,EAAGlD,EAAAA,YAAkB,kBAChCK,KAAK8E,QAAS,GAEb,EAAGtD,EAAAA,YAAkBxB,KAAMH,GAmK9B,MA1JAZ,GAAa6H,IACXvH,IAAK,WAQLZ,MAAO,WACLqB,KAAK0C,GAAGqE,oBAAoB,YAAa/G,KAAKgH,SAAS,GACvDhH,KAAK0C,GAAGqE,oBAAoB,YAAa/G,KAAKiH,aAAa,GAC3DjH,KAAK0C,GAAGqE,oBAAoB,aAAc/G,KAAKgH,SAAS,GAExDhH,KAAKsD,IAAM,QAYb/D,IAAK,WACLZ,MAAO,SAAkBuI,GACvBlH,KAAKkH,SAAWA,EAChBlH,KAAKmH,SAAWD,EAASzE,MACzBzC,KAAKoH,MAAQpH,KAAKmH,SAAS7J,OAAS,KAWtCiC,IAAK,WACLZ,MAAO,WACL,IAAKqB,KAAK8E,OAAQ,CAChB,GAAIW,GAAazF,KAAKkH,SAASxB,eAC3BD,IACFA,EAAWf,aAEb1E,KAAK8E,QAAS,EACd9E,KAAK0C,GAAGX,UAAY8E,EAEtB,MAAO7G,SAWTT,IAAK,aAOLZ,MAAO,WAKL,MAJIqB,MAAK8E,SACP9E,KAAK8E,QAAS,EACd9E,KAAK0C,GAAGX,UAAY6E,GAEf5G,QASTT,IAAK,UACLZ,MAAO,SAAiBrC,GACtBA,EAAEuJ,iBACF7F,KAAKkH,SAASG,OAAOrH,SASvBT,IAAK,cACLZ,MAAO,SAAqB2I,GAC1BtH,KAAK4F,cAGPrG,IAAK,KACL8G,IAAK,WACH,IAAKrG,KAAKsD,IAAK,CACb,GAAIiE,GAAK5E,SAASC,cAAc,KAChC2E,GAAG1E,GAAK7C,KAAK6C,GACb0E,EAAGxF,UAAY/B,KAAK8E,OAAS+B,EAAoBD,CACjD,IAAI/J,GAAI8F,SAASC,cAAc,IAC/B/F,GAAE2I,UAAYxF,KAAK+D,aAAayD,SAChCD,EAAGrE,YAAYrG,GACfmD,KAAKsD,IAAMiE,EACXA,EAAGE,iBAAiB,YAAazH,KAAKgH,SACtCO,EAAGE,iBAAiB,YAAazH,KAAKiH,aACtCM,EAAGE,iBAAiB,aAAczH,KAAKgH,SAEzC,MAAOhH,MAAKsD,OAGd/D,IAAK,OACL8G,IAAK,WACH,GAAIqB,GAAY1F,MAChB,IAAIhC,KAAKoH,QAAUpH,KAAKmH,SAAS7J,OAAS,EAAG,CAC3C,IAAK0C,KAAKkH,SAAS3E,OACjB,MAAO,KAETmF,GAAY,MAEZA,GAAY1H,KAAKoH,MAAQ,CAE3B,OAAOpH,MAAKmH,SAASO,MAWvBnI,IAAK,OACL8G,IAAK,WACH,GAAIqB,GAAY1F,MAChB,IAAmB,IAAfhC,KAAKoH,MAAa,CACpB,IAAKpH,KAAKkH,SAAS3E,OACjB,MAAO,KAETmF,GAAY1H,KAAKmH,SAAS7J,OAAS,MAEnCoK,GAAY1H,KAAKoH,MAAQ,CAE3B,OAAOpH,MAAKmH,SAASO,OAIlBZ,IAGT1J,GAAAA,WAAkB0J,IACf5F,iBAAiB,GAAGwF,kBAAkB,KAAKiB,GAAG,SAAS7K,EAAQU,EAAOJ,GACzE,YAaA,SAASS,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMb,GAAQ,IAAKa,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOd,GAAyB,gBAATA,IAAqC,kBAATA,GAA8Ba,EAAPb,EAElO,QAASe,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASE,UAAYC,OAAOC,OAAOH,GAAcA,EAAWC,WAAaG,aAAeC,MAAON,EAAUO,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeR,IAAYE,OAAOO,eAAiBP,OAAOO,eAAeV,EAAUC,GAAcD,EAASW,UAAYV,GAfje,GAAIW,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIrC,GAAI,EAAGA,EAAIqC,EAAM9B,OAAQP,IAAK,CAAE,GAAIsC,GAAaD,EAAMrC,EAAIsC,GAAWT,WAAaS,EAAWT,aAAc,EAAOS,EAAWP,cAAe,EAAU,SAAWO,KAAYA,EAAWR,UAAW,GAAML,OAAOc,eAAeH,EAAQE,EAAWE,IAAKF,IAAiB,MAAO,UAAUtB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBnB,EAAYQ,UAAWiB,GAAiBC,GAAaP,EAAiBnB,EAAa0B,GAAqB1B,KAEhiBS,QAAOc,eAAelC,EAAS,cAC7BuB,OAAO,IAETvB,EAAQwK,IAAMxK,EAAQyK,GAAKzK,EAAQ0K,MAAQ1K,EAAQ2K,KAAO3K,EAAQ4K,GAAK5K,EAAQ6K,MAAQjG,MAEvF,IAAIV,GAASxE,EAAQ,WAEjB8C,EAAU9C,EAAQ,UAQlBmL,EAAQ7K,EAAQ6K,MAAQ,EACxBD,EAAK5K,EAAQ4K,GAAK,EAClBD,EAAO3K,EAAQ2K,KAAO,EACtBD,EAAQ1K,EAAQ0K,MAAQ,EACxBD,EAAKzK,EAAQyK,GAAK,EAClBD,EAAMxK,EAAQwK,IAAM,EAuCpBM,EAAS,SAAUnI,GAGrB,QAASmI,KAGP,MAFArK,GAAgBmC,KAAMkI,GAEfjK,EAA2B+B,KAAMxB,OAAO0B,eAAegI,GAAQC,MAAMnI,KAAMoI,YAqJpF,MA1JAhK,GAAU8J,EAAQnI,GAQlBd,EAAaiJ,IACX3I,IAAK,WAKLZ,MAAO,WACL,MAAOqB,SAUTT,IAAK,oBACLZ,MAAO,SAA2B0J,GAChC,KAAM,IAAIpL,OAAM,uBAWlBsC,IAAK,kBACLZ,MAAO,WACL,KAAM,IAAI1B,OAAM,uBAUlBsC,IAAK,kBACLZ,MAAO,WACL,KAAM,IAAI1B,OAAM,uBAUlBsC,IAAK,iBACLZ,MAAO,WACL,KAAM,IAAI1B,OAAM,uBAWlBsC,IAAK,gBACLZ,MAAO,SAAuBzB,GAC5B,GAAIoL,IAAa,EAAGhH,EAAOoC,mBAAmB,QAC5CC,YAAY,EACZa,QACEtH,KAAMA,IAIV,OADA8C,MAAKe,KAAK,OAAQuH,GACXA,KAUT/I,IAAK,iBACLZ,MAAO,WACL,GAAI4J,IAAc,EAAGjH,EAAOoC,mBAAmB,SAAWC,YAAY,GAEtE,OADA3D,MAAKe,KAAK,QAASwH,GACZA,KAUThJ,IAAK,kBACLZ,MAAO,WACL,GAAI6J,IAAe,EAAGlH,EAAOoC,mBAAmB,UAC9Cc,QACEiE,aAAczI,KAAK0I,oBAIvB,OADA1I,MAAKe,KAAK,SAAUyH,GACbA,KAUTjJ,IAAK,eACLZ,MAAO,WACL,GAAIgK,IAAY,EAAGrH,EAAOoC,mBAAmB,OAASC,YAAY,GAElE,OADA3D,MAAKe,KAAK,MAAO4H,GACVA,KAUTpJ,IAAK,UACLZ,MAAO,SAAiBrC,GACtB,MAAqB,KAAdA,EAAEsM,QAAgBf,EACT,IAAdvL,EAAEsM,QAAgBX,EACJ,KAAd3L,EAAEsM,QAAiBX,EACL,KAAd3L,EAAEsM,QAAiBhB,EACL,KAAdtL,EAAEsM,QAAiBZ,EACL,KAAd1L,EAAEsM,QAAiBb,EACL,KAAdzL,EAAEsM,SAAkBtM,EAAEuM,QAAUd,EAClB,KAAdzL,EAAEsM,SAAkBtM,EAAEuM,QAAUb,EAChCF,MAICI,GACPtI,EAAQoB,aAEV5D,GAAAA,WAAkB8K,IACf3B,UAAU,GAAGtF,OAAS,KAAK6H,GAAG,SAAShM,EAAQU,EAAOJ,IACzD,SAAW2L,GACX,YAUA,SAAStL,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GARvF,GAAIsL,GAAgBlM,EAAQ,kBAExBmM,EAAiBxL,EAAuBuL,GAExCE,EAAYpM,EAAQ,cAEpBqM,EAAa1L,EAAuByL,GAIpCE,EAAUpH,MAEZoH,GADEL,EAAOM,cAAgBN,EAAOM,aAAaD,QACnCL,EAAOM,aAAaD,WAIhCA,EAAQE,SAAWH,EAAAA,WAEnBJ,EAAOM,aAAeJ,EAAAA,WACtBF,EAAOM,aAAaD,QAAUA,IAC3B/L,KAAK2C,KAAuB,mBAAX+I,QAAyBA,OAAyB,mBAAT7K,MAAuBA,KAAyB,mBAAXqL,QAAyBA,aACxHC,aAAa,EAAEC,iBAAiB,KAAKC,GAAG,SAAS5M,EAAQU,EAAOJ,GACnE,YAYA,SAASK,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GAEvF,QAASG,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAZhH,GAAIiB,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIrC,GAAI,EAAGA,EAAIqC,EAAM9B,OAAQP,IAAK,CAAE,GAAIsC,GAAaD,EAAMrC,EAAIsC,GAAWT,WAAaS,EAAWT,aAAc,EAAOS,EAAWP,cAAe,EAAU,SAAWO,KAAYA,EAAWR,UAAW,GAAML,OAAOc,eAAeH,EAAQE,EAAWE,IAAKF,IAAiB,MAAO,UAAUtB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBnB,EAAYQ,UAAWiB,GAAiBC,GAAaP,EAAiBnB,EAAa0B,GAAqB1B,KAEhiBS,QAAOc,eAAelC,EAAS,cAC7BuB,OAAO,GAGT,IAAIgL,GAAiB7M,EAAQ,mBAEzB8M,EAAkBnM,EAAuBkM,GAUzCE,EAAQ,WAOV,QAASA,GAAMxJ,EAAUyJ,EAAMC,GAC7BlM,EAAgBmC,KAAM6J,GAEtB7J,KAAKK,SAAWA,EAChBL,KAAK8J,KAAOA,EACZ9J,KAAK+J,MAAQA,EAwBf,MAbA9K,GAAa4K,IACXtK,IAAK,UACLZ,MAAO,SAAiBqL,GACtB,GAAI/J,GAAQD,IAEZA,MAAKK,SAAS4J,OAAOjK,KAAK8J,KAAM,SAAUI,GACxCF,EAASE,EAAQC,IAAI,SAAUC,GAC7B,MAAO,IAAIR,GAAAA,WAAwBQ,EAAQnK,EAAM6J,KAAM7J,EAAMI,cAE9DL,KAAK+J,WAILF,IAGTzM,GAAAA,WAAkByM,IACfQ,kBAAkB,IAAIC,GAAG,SAASxN,EAAQU,EAAOJ,GACpD,YAQA,SAASS,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCANhH,GAAIiB,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIrC,GAAI,EAAGA,EAAIqC,EAAM9B,OAAQP,IAAK,CAAE,GAAIsC,GAAaD,EAAMrC,EAAIsC,GAAWT,WAAaS,EAAWT,aAAc,EAAOS,EAAWP,cAAe,EAAU,SAAWO,KAAYA,EAAWR,UAAW,GAAML,OAAOc,eAAeH,EAAQE,EAAWE,IAAKF,IAAiB,MAAO,UAAUtB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBnB,EAAYQ,UAAWiB,GAAiBC,GAAaP,EAAiBnB,EAAa0B,GAAqB1B,KAEhiBS,QAAOc,eAAelC,EAAS,cAC7BuB,OAAO,GAKT,IAAI4L,GAAe,WAOjB,QAASA,GAAavG,EAAM8F,EAAMzJ,GAChCxC,EAAgBmC,KAAMuK,GAEtBvK,KAAKgE,KAAOA,EACZhE,KAAK8J,KAAOA,EACZ9J,KAAKK,SAAWA,EAkClB,MAxBApB,GAAasL,IACXhL,IAAK,UACLZ,MAAO,SAAiB8J,EAAc+B,GACpC,GAAIC,GAAczK,KAAKK,SAASqK,QAAQ1K,KAAKgE,KAC7C,OAAmB,OAAfyG,GACEE,MAAMC,QAAQH,KAChBD,EAAcC,EAAY,GAAKD,EAC/BC,EAAcA,EAAY,KAEpBhC,EAAaiC,QAAQ1K,KAAKK,SAAS0J,MAAOU,GAAcD,IALlE,UAcFjL,IAAK,SACLZ,MAAO,WACL,MAAOqB,MAAKK,SAASwK,SAAS7K,KAAKgE,KAAMhE,KAAK8J,UAI3CS,IAGTnN,GAAAA,WAAkBmN,OACZO,GAAG,SAAShO,EAAQU,EAAOJ,GACjC,YAoBA,SAASK,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GAEvF,QAASG,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAIhH,QAAS+M,GAAiBpM,GACxB,MAAOA,GAzBT,GAAIM,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIrC,GAAI,EAAGA,EAAIqC,EAAM9B,OAAQP,IAAK,CAAE,GAAIsC,GAAaD,EAAMrC,EAAIsC,GAAWT,WAAaS,EAAWT,aAAc,EAAOS,EAAWP,cAAe,EAAU,SAAWO,KAAYA,EAAWR,UAAW,GAAML,OAAOc,eAAeH,EAAQE,EAAWE,IAAKF,IAAiB,MAAO,UAAUtB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBnB,EAAYQ,UAAWiB,GAAiBC,GAAaP,EAAiBnB,EAAa0B,GAAqB1B,KAEhiBS,QAAOc,eAAelC,EAAS,cAC7BuB,OAAO,GAGT,IAAIqM,GAASlO,EAAQ,WAEjBmO,EAAUxN,EAAuBuN,GAEjCtL,EAAU5C,EAAQ,qBAElB6C,EAAWlC,EAAuBiC,GAElC6B,EAAWzE,EAAQ,mBAEnB0E,EAAW/D,EAAuB8D,GAMlC2J,EAAgB,EA0BhBC,EAAW,WAKb,QAASA,GAAS/L,GAChBvB,EAAgBmC,KAAMmL,GAEtBnL,KAAKZ,MAAQA,EACbY,KAAKoL,MAAQhM,EAAMgM,SAAa,KAoIlC,MA5HAnM,GAAakM,IACX5L,IAAK,WACLZ,MAAO,WAEL,MADAqB,MAAKoL,MAAQ,KACNpL,QAWTT,IAAK,aACLZ,MAAO,SAAoB6B,GACzB,IAAK,EAAGb,EAAAA,YAAkBK,KAAKZ,MAAMiM,SAAU,CAC7C,GAAIA,GAAUrL,KAAKZ,MAAMiM,QAAQ7K,EACjC,KAAK,EAAGgB,EAAAA,YAAkB6J,GACxB7K,EAAO6K,MACF,KAAKA,EACV,MAAO,MAGX,GAAItB,GAAQvJ,EAAKuJ,MAAM/J,KAAKsL,eAAe9K,GAC3C,OAAOuJ,GAAQ,GAAIkB,GAAAA,WAAgBjL,KAAM+J,EAAM/J,KAAKoH,OAAQ2C,GAAS,QAUvExK,IAAK,SACLZ,MAAO,SAAgBmL,EAAME,EAAUD,GACjC/J,KAAKoL,MACPpL,KAAKuL,gBAAgBzB,EAAME,EAAUD,GAErC/J,KAAKZ,MAAM6K,OAAOH,EAAME,EAAUD,MAUtCxK,IAAK,UACLZ,MAAO,SAAiBqF,GACtB,MAAOhE,MAAKZ,MAAMsL,QAAQ1G,MAW5BzE,IAAK,kBACLZ,MAAO,SAAyBmL,EAAME,EAAUD,GAC9C,GAAI9J,GAAQD,KAERoL,EAAQpL,KAAKoL,MAAMtB,EACnBsB,GACFpB,EAASoB,GAETpL,KAAKZ,MAAM6K,OAAOH,EAAM,SAAUI,GAChCjK,EAAMmL,MAAMtB,GAAQI,EACpBF,EAASE,IACRH,MAWPxK,IAAK,iBACLZ,MAAO,SAAwB6B,GAC7B,OAAQ,EAAGb,EAAAA,YAAkBK,KAAK+J,OAAS/J,KAAK+J,MAAMvJ,GAAQR,KAAK+J,SASrExK,IAAK,QACL8G,IAAK,WACH,MAAOrG,MAAKZ,MAAM2K,SASpBxK,IAAK,QACL8G,IAAK,WACH,MAAOrG,MAAKZ,MAAMgI,OAAS8D,KAQ7B3L,IAAK,WACL8G,IAAK,WACH,MAAOrG,MAAKZ,MAAMyL,UAAYE,MAI3BI,IAGT/N,GAAAA,WAAkB+N,IACfK,UAAU,EAAE/E,oBAAoB,GAAGgF,kBAAkB,KAAKC,GAAG,SAAS5O,EAAQU,EAAOJ,GACxF,YAwBA,SAASK,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GAEvF,QAASG,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMb,GAAQ,IAAKa,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOd,GAAyB,gBAATA,IAAqC,kBAATA,GAA8Ba,EAAPb,EAElO,QAASe,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASE,UAAYC,OAAOC,OAAOH,GAAcA,EAAWC,WAAaG,aAAeC,MAAON,EAAUO,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeR,IAAYE,OAAOO,eAAiBP,OAAOO,eAAeV,EAAUC,GAAcD,EAASW,UAAYV,GA5Bje,GAAIW,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIrC,GAAI,EAAGA,EAAIqC,EAAM9B,OAAQP,IAAK,CAAE,GAAIsC,GAAaD,EAAMrC,EAAIsC,GAAWT,WAAaS,EAAWT,aAAc,EAAOS,EAAWP,cAAe,EAAU,SAAWO,KAAYA,EAAWR,UAAW,GAAML,OAAOc,eAAeH,EAAQE,EAAWE,IAAKF,IAAiB,MAAO,UAAUtB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBnB,EAAYQ,UAAWiB,GAAiBC,GAAaP,EAAiBnB,EAAa0B,GAAqB1B,MAE5hB4N,EAAO,QAAStF,GAAIuF,EAAQC,EAAUC,GAA2B,OAAXF,IAAiBA,EAASG,SAASxN,UAAW,IAAIyN,GAAOxN,OAAOyN,yBAAyBL,EAAQC,EAAW,IAAa7J,SAATgK,EAAoB,CAAE,GAAIE,GAAS1N,OAAO0B,eAAe0L,EAAS,OAAe,QAAXM,EAAmB,OAAkC7F,EAAI6F,EAAQL,EAAUC,GAAoB,GAAI,SAAWE,GAAQ,MAAOA,GAAKrN,KAAgB,IAAIwN,GAASH,EAAK3F,GAAK,IAAerE,SAAXmK,EAA4C,MAAOA,GAAO9O,KAAKyO,GAE5dtN,QAAOc,eAAelC,EAAS,cAC7BuB,OAAO,GAGT,IAAIyN,GAAUtP,EAAQ,YAElBuP,EAAW5O,EAAuB2O,GAElC9K,EAASxE,EAAQ,WAEjB4C,EAAU5C,EAAQ,kBAElB6C,EAAWlC,EAAuBiC,GAElC4M,EAAcxP,EAAQ,eAEtByP,EAAe9O,EAAuB6O,GAUtCE,EAAsB1P,EAAQ,kBAE9B+C,GAAoB,UAAW,YAAa,WAS5CyJ,EAAW,SAAUmD,GAOvB,QAASnD,GAAS5G,GAChB7E,EAAgBmC,KAAMsJ,EAEtB,IAAIrJ,GAAQhC,EAA2B+B,KAAMxB,OAAO0B,eAAeoJ,GAAUjM,KAAK2C,MAQlF,OANAC,GAAMyC,GAAKA,EACXzC,EAAMyM,MAAuC,KAA9B,EAAGpL,EAAOqL,iBAExB,EAAGhN,EAAAA,YAAkBM,EAAOJ,GAE7BI,EAAM2M,iBACC3M,EA4KT,MA7LA7B,GAAUkL,EAAUmD,GAuBpBxN,EAAaqK,IACX/J,IAAK,WACLZ,MAAO,WAIL,MAHAgN,GAAKnN,OAAO0B,eAAeoJ,EAAS/K,WAAY,WAAYyB,MAAM3C,KAAK2C,MACvEA,KAAK6M,gBACL7M,KAAK0C,GAAK,KACH1C,QASTT,IAAK,oBACLZ,MAAO,SAA2BoF,GAChC,GAAI2G,GAAU3G,EAAa2G,QAAQ1K,KAAK0I,kBAAmB1I,KAAK8M,iBAC5DnC,OAAMC,QAAQF,KAChB1K,KAAK0C,GAAG/D,MAAQ+L,EAAQ,GAAKA,EAAQ,GACrC1K,KAAK0C,GAAGqK,eAAiB/M,KAAK0C,GAAGsK,aAAetC,EAAQ,GAAGpN,QAE7D0C,KAAK0C,GAAGuK,WAGV1N,IAAK,kBACLZ,MAAO,WACL,GAAIuO,IAAY,EAAG5L,EAAO6L,wBAAwBnN,KAAK0C,IACnD0K,EAAWpN,KAAKqN,cAChBC,EAAiBtN,KAAKuN,oBACtBC,EAAMN,EAASM,IAAMJ,EAASI,IAAMF,EAAeE,KAAO,EAAGjB,EAAAA,YAAsBvM,KAAK0C,IACxF+K,EAAOP,EAASO,KAAOL,EAASK,KAAOH,EAAeG,IAC1D,OAAoB,QAAhBzN,KAAK0C,GAAGgL,KACDF,IAAKA,EAAKC,KAAMA,IAEhBD,IAAKA,EAAKG,MAAOhL,SAASiL,gBAAgBC,YAAcJ,MAOrElO,IAAK,kBACLZ,MAAO,WACL,MAAOqB,MAAK0C,GAAG/D,MAAMmP,UAAU,EAAG9N,KAAK0C,GAAGsK,iBAM5CzN,IAAK,iBACLZ,MAAO,WACL,MAAOqB,MAAK0C,GAAG/D,MAAMmP,UAAU9N,KAAK0C,GAAGsK,iBASzCzN,IAAK,cACLZ,MAAO,WACL,OAAS6O,IAAKxN,KAAK0C,GAAGqL,UAAWN,KAAMzN,KAAK0C,GAAGsL,eAYjDzO,IAAK,oBACLZ,MAAO,WACL,MAAO6N,GAAoBxM,KAAK0C,GAAI1C,KAAK0C,GAAGsK,iBAU9CzN,IAAK,UACLZ,MAAO,SAAiB2I,GACtBtH,KAAKiO,qBAUP1O,IAAK,YACLZ,MAAO,SAAmBrC,GACxB,GAAIY,GAAO8C,KAAKkO,QAAQ5R,GACpB6R,EAAQnM,MACZ,QAAQ9E,GACN,IAAKkP,GAAQpE,GACb,IAAKoE,GAAQrE,KACXoG,EAAQnO,KAAKoO,cAAclR,EAC3B,MACF,KAAKkP,GAAQnE,MAETkG,EAAQnO,KAAKqO,gBACb,MAEJ,KAAKjC,GAAQxE,IAETuG,EAAQnO,KAAKsO,eAIfH,GAASA,EAAMvK,kBACjBtH,EAAEuJ,oBAWNtG,IAAK,UACLZ,MAAO,SAAiBrC,GACtB,GAAIY,GAAO8C,KAAKkO,QAAQ5R,EAGpBY,KAASkP,EAAQvE,IAAM7H,KAAK0M,OAC9B1M,KAAKiO,qBAST1O,IAAK,iBACLZ,MAAO,WACLqB,KAAK0C,GAAG+E,iBAAiB,QAASzH,KAAKuO,SACvCvO,KAAK0C,GAAG+E,iBAAiB,UAAWzH,KAAKwO,WACzCxO,KAAK0C,GAAG+E,iBAAiB,QAASzH,KAAKyO,YAQzClP,IAAK,gBACLZ,MAAO,WACLqB,KAAK0C,GAAGqE,oBAAoB,QAAS/G,KAAKuO,SAC1CvO,KAAK0C,GAAGqE,oBAAoB,UAAW/G,KAAKwO,WAC5CxO,KAAK0C,GAAGqE,oBAAoB,QAAS/G,KAAKyO,aAIvCnF,GACP+C,EAAAA,WAEFjP,GAAAA,WAAkBkM,IACfoF,WAAW,EAAEnI,UAAU,GAAGoI,cAAc,GAAGzN,iBAAiB,GAAG0N,iBAAiB,KAAKC,IAAI,SAAS/R,EAAQU,EAAOJ,GACpH,YAkCA,SAASK,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GAEvF,QAASG,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAEhH,QAASC,GAA2BC,EAAMb,GAAQ,IAAKa,EAAQ,KAAM,IAAIC,gBAAe,4DAAgE,QAAOd,GAAyB,gBAATA,IAAqC,kBAATA,GAA8Ba,EAAPb,EAElO,QAASe,GAAUC,EAAUC,GAAc,GAA0B,kBAAfA,IAA4C,OAAfA,EAAuB,KAAM,IAAIN,WAAU,iEAAoEM,GAAeD,GAASE,UAAYC,OAAOC,OAAOH,GAAcA,EAAWC,WAAaG,aAAeC,MAAON,EAAUO,YAAY,EAAOC,UAAU,EAAMC,cAAc,KAAeR,IAAYE,OAAOO,eAAiBP,OAAOO,eAAeV,EAAUC,GAAcD,EAASW,UAAYV,GAtCje,GAAIW,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIrC,GAAI,EAAGA,EAAIqC,EAAM9B,OAAQP,IAAK,CAAE,GAAIsC,GAAaD,EAAMrC,EAAIsC,GAAWT,WAAaS,EAAWT,aAAc,EAAOS,EAAWP,cAAe,EAAU,SAAWO,KAAYA,EAAWR,UAAW,GAAML,OAAOc,eAAeH,EAAQE,EAAWE,IAAKF,IAAiB,MAAO,UAAUtB,EAAayB,EAAYC,GAAiJ,MAA9HD,IAAYN,EAAiBnB,EAAYQ,UAAWiB,GAAiBC,GAAaP,EAAiBnB,EAAa0B,GAAqB1B,KAEhiBS,QAAOc,eAAelC,EAAS,cAC7BuB,OAAO,GAGT,IAAImQ,GAAahS,EAAQ,eAErBiS,EAActR,EAAuBqR,GAErCE,EAAYlS,EAAQ,cAEpBmS,EAAaxR,EAAuBuR,GAEpCE,EAAYpS,EAAQ,cAEpBqS,EAAa1R,EAAuByR,GAEpC9C,EAAUtP,EAAQ,YAElBwE,EAASxE,EAAQ,WAEjB4C,EAAU5C,EAAQ,kBAElB6C,EAAWlC,EAAuBiC,GAElC6B,EAAWzE,EAAQ,qBAEnB0E,EAAW/D,EAAuB8D,GAElC3B,EAAU9C,EAAQ,UAUlB+C,GAAoB,eAAgB,cAAe,YAAa,YAAa,aAAc,gBAmB3FwJ,EAAe,SAAUtJ,GAQ3B,QAASsJ,GAAa+F,GACpB,GAAIC,GAAUjH,UAAU9K,QAAU,GAAsB0E,SAAjBoG,UAAU,MAAwBA,UAAU,EAEnFvK,GAAgBmC,KAAMqJ,EAEtB,IAAIpJ,GAAQhC,EAA2B+B,KAAMxB,OAAO0B,eAAemJ,GAAchM,KAAK2C,MAetF,OAbAC,GAAMqP,UAAY,GAAIP,GAAAA,WACtB9O,EAAMiH,SAAW,GAAI+H,GAAAA,WAAmBI,EAAQnI,cAChDjH,EAAMmP,OAASA,EACfnP,EAAMoP,QAAUA,GAEf,EAAG1P,EAAAA,YAAkBM,EAAOJ,GAE7BI,EAAMsP,iBAAmB,EAAGjO,EAAOkO,MAAM,SAAUC,EAAMjP,GACvDR,KAAKyP,KAAOA,EACZzP,KAAKsP,UAAUI,IAAIlP,KAGrBP,EAAM2M,iBACC3M,EAiOT,MA5PA7B,GAAUiL,EAActJ,GAqCxBd,EAAaoK,IACX9J,IAAK,WACLZ,MAAO,WACL,GAAIgR,GAAiBvH,UAAU9K,QAAU,GAAsB0E,SAAjBoG,UAAU,IAAmB,EAAOA,UAAU,EAQ5F,OANApI,MAAKsP,UAAUhP,WACfN,KAAKkH,SAAS5G,WACVqP,GACF3P,KAAKoP,OAAO9O,WAEdN,KAAK6M,gBACE7M,QAsBTT,IAAK,WACLZ,MAAO,SAAkBiR,GACvB,GAAIpM,GAASxD,IAKb,OAHA4P,GAAmBxP,QAAQ,SAAUhB,GACnCoE,EAAO8L,UAAUO,iBAAiB,GAAIV,GAAAA,WAAmB/P,MAEpDY,QAaTT,IAAK,UACLZ,MAAO,SAAiB6B,GAEtB,MADAR,MAAKuP,gBAAgB/O,GACdR,QAWTT,IAAK,SACLZ,MAAO,WAGL,GAAI8Q,GAAOzP,KAAKyP,IAKhB,OAJAzP,MAAKyP,KAAO,MACP,EAAGjO,EAAAA,YAAkBiO,IACxBA,IAEKzP,QAUTT,IAAK,YACLZ,MAAO,SAAmBkD,GACxB,GAAIf,GAAgBe,EAAKf,aAErBA,GAAcxD,OAChB0C,KAAKkH,SAASM,OAAO1G,EAAed,KAAKoP,OAAOU,mBAEhD9P,KAAKkH,SAASxC,aAEhB1E,KAAK+P,YAUPxQ,IAAK,aACLZ,MAAO,SAAoBrC,GACzB,GAAI0T,GAAS1T,EAAEkI,OAAOtH,OAASkP,EAAQpE,GAAK,KAAO,MACnDhI,MAAKkH,SAAS8I,GAAQ1T,MAUxBiD,IAAK,cACLZ,MAAO,SAAqBrC,GAC1B,GAAImJ,GAAazF,KAAKkH,SAASxB,eAC3BD,KACFzF,KAAKkH,SAASG,OAAO5B,GACrBnJ,EAAEuJ,qBAWNtG,IAAK,YACLZ,MAAO,SAAmBrC,GACpB0D,KAAKkH,SAAS1E,QAChBxC,KAAKkH,SAASxC,aACdpI,EAAEuJ,qBAWNtG,IAAK,eACLZ,MAAO,SAAsBrC,GAC3B0D,KAAKiQ,QAAQ3T,EAAEkI,OAAOiE,iBAUxBlJ,IAAK,eACLZ,MAAO,SAAsB8F,GAC3BzE,KAAKe,KAAK,SAAU0D,GACfA,EAAYb,kBACf5D,KAAKoP,OAAOc,kBAAkBzL,EAAYD,OAAOT,iBAWrDxE,IAAK,eACLZ,MAAO,SAAsBwR,GAC3B,GAAIpL,GAAS/E,IAEb,OAAO,YACL,MAAO+E,GAAOhE,KAAKoP,OASvB5Q,IAAK,iBACLZ,MAAO,WACL,GAAIwG,GAASnF,IAEbA,MAAKoP,OAAOgB,GAAG,OAAQpQ,KAAKqQ,YAAYD,GAAG,QAASpQ,KAAKsQ,aAAaF,GAAG,MAAOpQ,KAAKuQ,WAAWH,GAAG,SAAUpQ,KAAKwQ,cAClHxQ,KAAKkH,SAASkJ,GAAG,SAAUpQ,KAAKyQ,eAC/B,OAAQ,QAAS,SAAU,WAAY,WAAY,SAAU,QAAQrQ,QAAQ,SAAU+P,GACtFhL,EAAO+B,SAASkJ,GAAGD,EAAWhL,EAAOuL,aAAaP,MAEpDnQ,KAAKsP,UAAUc,GAAG,MAAOpQ,KAAK2Q,cAQhCpR,IAAK,gBACLZ,MAAO,WACLqB,KAAKsP,UAAUsB,qBACf5Q,KAAKkH,SAAS0J,qBACd5Q,KAAKoP,OAAOyB,eAAe,OAAQ7Q,KAAKqQ,YAAYQ,eAAe,QAAS7Q,KAAKsQ,aAAaO,eAAe,MAAO7Q,KAAKuQ,WAAWM,eAAe,SAAU7Q,KAAKwQ,kBAI/JnH,GACPzJ,EAAQoB,aAEV5D,GAAAA,WAAkBiM,IACfyH,cAAc,EAAEC,aAAa,EAAErC,WAAW,EAAEsC,aAAa,EAAEzK,UAAU,GAAGtF,OAAS,GAAGC,iBAAiB,GAAGuF,oBAAoB,KAAKwK,IAAI,SAASnU,EAAQU,EAAOJ,GAChK,YAeA,SAASK,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GAwBvF,QAAS8R,GAAK0B,GACZ,GAAIC,GAAQC,CAEZ,OAAO,YAYL,QAASC,KACP,GAAID,EAAoB,CAMtB,GAAIE,GAAaF,CACjBA,GAAqBpP,OACrBsP,EAAWC,QAAQF,GACnBH,EAAK/I,MAAMjK,EAAMoT,OAEjBH,IAAS,EAtBb,GAAIK,GAAO7G,MAAMpM,UAAUkT,MAAMpU,KAAK+K,UACtC,IAAI+I,EAKF,YADAC,EAAqBI,EAGvBL,IAAS,CACT,IAAIjT,GAAO8B,IAgBXwR,GAAKD,QAAQF,GACbH,EAAK/I,MAAMnI,KAAMwR,IAUrB,QAASpL,GAAesL,GAEtB,GAAIC,GAAMhP,SAASC,cAAc,MACjC+O,GAAInM,UAAYkM,CAGhB,KAAK,GAFDE,GAAaD,EAAIC,WACjB5M,EAAWrC,SAASsC,yBACflI,EAAI,EAAGI,EAAIyU,EAAWtU,OAAYH,EAAJJ,EAAOA,IAC5CiI,EAAS9B,YAAY0O,EAAW7U,GAElC,OAAOiI,GAUT,QAAStB,GAAkBuC,EAAMoJ,GAC/B,MAAO,IAAI1M,UAASkP,YAAYC,YAAY7L,GAAO,EAAGtG,EAAAA,aACpDgE,YAAY,EACZa,OAAQxC,QACPqN,IASL,QAASlC,GAAuBzK,GAC9B,GAAIqP,GAAOrP,EAAGsP,wBACVC,EAAoBvP,EAAGwP,cACvBL,EAAcI,EAAkBJ,YAChCjE,EAAkBqE,EAAkBrE,eAExC,QACEJ,IAAKuE,EAAKvE,IAAMqE,EAAYM,YAAcvE,EAAgBwE,UAC1D3E,KAAMsE,EAAKtE,KAAOoE,EAAYQ,YAAczE,EAAgB0E,YAOhE,QAAS3F,KACP,GAAI4F,GAAMC,UAAUC,UAAUC,aAC9B,OAA+B,KAAxBH,EAAII,QAAQ,QAAiBC,SAASL,EAAIM,MAAM,QAAQ,GAAI,IAAM,KA/H3ErU,OAAOc,eAAelC,EAAS,cAC7BuB,OAAO,IAETvB,EAAQoS,KAAOA,EACfpS,EAAQgJ,eAAiBA,EACzBhJ,EAAQsG,kBAAoBA,EAC5BtG,EAAQ+P,uBAAyBA,EACjC/P,EAAQuP,aAAeA,CAEvB,IAAIjN,GAAU5C,EAAQ,mBAElB6C,EAAWlC,EAAuBiC,KAsHnC8G,kBAAkB,KAAKsM,IAAI,SAAShW,EAAQU,EAAOJ,GAsBtD,QAAS4D,KACPhB,KAAKJ,QAAUI,KAAKJ,YACpBI,KAAK+S,cAAgB/S,KAAK+S,eAAiB/Q,OAoQ7C,QAASgR,GAAWC,GAClB,MAAsB,kBAARA,GAGhB,QAASC,GAASD,GAChB,MAAsB,gBAARA,GAGhB,QAASE,GAASF,GAChB,MAAsB,gBAARA,IAA4B,OAARA,EAGpC,QAASG,GAAYH,GACnB,MAAe,UAARA,EA/QTzV,EAAOJ,QAAU4D,EAGjBA,EAAaA,aAAeA,EAE5BA,EAAazC,UAAUqB,QAAUoC,OACjChB,EAAazC,UAAUwU,cAAgB/Q,OAIvChB,EAAaqS,oBAAsB,GAInCrS,EAAazC,UAAU+U,gBAAkB,SAAS9W,GAChD,IAAK0W,EAAS1W,IAAU,EAAJA,GAAS+W,MAAM/W,GACjC,KAAMwB,WAAU,8BAElB,OADAgC,MAAK+S,cAAgBvW,EACdwD,MAGTgB,EAAazC,UAAUwC,KAAO,SAASkF,GACrC,GAAIuN,GAAIC,EAASC,EAAKlC,EAAMzU,EAAG4W,CAM/B,IAJK3T,KAAKJ,UACRI,KAAKJ,YAGM,UAATqG,KACGjG,KAAKJ,QAAQgU,OACbT,EAASnT,KAAKJ,QAAQgU,SAAW5T,KAAKJ,QAAQgU,MAAMtW,QAAS,CAEhE,GADAkW,EAAKpL,UAAU,GACXoL,YAAcvW,OAChB,KAAMuW,EAER,MAAMxV,WAAU,wCAMpB,GAFAyV,EAAUzT,KAAKJ,QAAQqG,GAEnBmN,EAAYK,GACd,OAAO,CAET,IAAIT,EAAWS,GACb,OAAQrL,UAAU9K,QAEhB,IAAK,GACHmW,EAAQpW,KAAK2C,KACb,MACF,KAAK,GACHyT,EAAQpW,KAAK2C,KAAMoI,UAAU,GAC7B,MACF,KAAK,GACHqL,EAAQpW,KAAK2C,KAAMoI,UAAU,GAAIA,UAAU,GAC3C,MAEF,SACEoJ,EAAO7G,MAAMpM,UAAUkT,MAAMpU,KAAK+K,UAAW,GAC7CqL,EAAQtL,MAAMnI,KAAMwR,OAEnB,IAAI2B,EAASM,GAIlB,IAHAjC,EAAO7G,MAAMpM,UAAUkT,MAAMpU,KAAK+K,UAAW,GAC7CuL,EAAYF,EAAQhC,QACpBiC,EAAMC,EAAUrW,OACXP,EAAI,EAAO2W,EAAJ3W,EAASA,IACnB4W,EAAU5W,GAAGoL,MAAMnI,KAAMwR,EAG7B,QAAO,GAGTxQ,EAAazC,UAAUsV,YAAc,SAAS5N,EAAM6N,GAClD,GAAIC,EAEJ,KAAKf,EAAWc,GACd,KAAM9V,WAAU,8BA2ClB,OAzCKgC,MAAKJ,UACRI,KAAKJ,YAIHI,KAAKJ,QAAQoU,aACfhU,KAAKe,KAAK,cAAekF,EACf+M,EAAWc,EAASA,UACpBA,EAASA,SAAWA,GAE3B9T,KAAKJ,QAAQqG,GAGTkN,EAASnT,KAAKJ,QAAQqG,IAE7BjG,KAAKJ,QAAQqG,GAAM1F,KAAKuT,GAGxB9T,KAAKJ,QAAQqG,IAASjG,KAAKJ,QAAQqG,GAAO6N,GAN1C9T,KAAKJ,QAAQqG,GAAQ6N,EASnBX,EAASnT,KAAKJ,QAAQqG,MAAWjG,KAAKJ,QAAQqG,GAAMgO,SAIpDF,EAHGX,EAAYpT,KAAK+S,eAGhB/R,EAAaqS,oBAFbrT,KAAK+S,cAKPgB,GAAKA,EAAI,GAAK/T,KAAKJ,QAAQqG,GAAM3I,OAASyW,IAC5C/T,KAAKJ,QAAQqG,GAAMgO,QAAS,EAC5BC,QAAQN,MAAM,mIAGA5T,KAAKJ,QAAQqG,GAAM3I,QACJ,kBAAlB4W,SAAQC,OAEjBD,QAAQC,UAKPnU,MAGTgB,EAAazC,UAAU6R,GAAKpP,EAAazC,UAAUsV,YAEnD7S,EAAazC,UAAU6V,KAAO,SAASnO,EAAM6N,GAM3C,QAASO,KACPrU,KAAK6Q,eAAe5K,EAAMoO,GAErBC,IACHA,GAAQ,EACRR,EAAS3L,MAAMnI,KAAMoI,YAVzB,IAAK4K,EAAWc,GACd,KAAM9V,WAAU,8BAElB,IAAIsW,IAAQ,CAcZ,OAHAD,GAAEP,SAAWA,EACb9T,KAAKoQ,GAAGnK,EAAMoO,GAEPrU,MAITgB,EAAazC,UAAUsS,eAAiB,SAAS5K,EAAM6N,GACrD,GAAIS,GAAMxR,EAAUzF,EAAQP,CAE5B,KAAKiW,EAAWc,GACd,KAAM9V,WAAU,8BAElB,KAAKgC,KAAKJ,UAAYI,KAAKJ,QAAQqG,GACjC,MAAOjG,KAMT,IAJAuU,EAAOvU,KAAKJ,QAAQqG,GACpB3I,EAASiX,EAAKjX,OACdyF,EAAW,GAEPwR,IAAST,GACRd,EAAWuB,EAAKT,WAAaS,EAAKT,WAAaA,QAC3C9T,MAAKJ,QAAQqG,GAChBjG,KAAKJ,QAAQiR,gBACf7Q,KAAKe,KAAK,iBAAkBkF,EAAM6N,OAE/B,IAAIX,EAASoB,GAAO,CACzB,IAAKxX,EAAIO,EAAQP,KAAM,GACrB,GAAIwX,EAAKxX,KAAO+W,GACXS,EAAKxX,GAAG+W,UAAYS,EAAKxX,GAAG+W,WAAaA,EAAW,CACvD/Q,EAAWhG,CACX,OAIJ,GAAe,EAAXgG,EACF,MAAO/C,KAEW,KAAhBuU,EAAKjX,QACPiX,EAAKjX,OAAS,QACP0C,MAAKJ,QAAQqG,IAEpBsO,EAAKC,OAAOzR,EAAU,GAGpB/C,KAAKJ,QAAQiR,gBACf7Q,KAAKe,KAAK,iBAAkBkF,EAAM6N,GAGtC,MAAO9T,OAGTgB,EAAazC,UAAUqS,mBAAqB,SAAS3K,GACnD,GAAI1G,GAAKoU,CAET,KAAK3T,KAAKJ,QACR,MAAOI,KAGT,KAAKA,KAAKJ,QAAQiR,eAKhB,MAJyB,KAArBzI,UAAU9K,OACZ0C,KAAKJ,WACEI,KAAKJ,QAAQqG,UACbjG,MAAKJ,QAAQqG,GACfjG,IAIT,IAAyB,IAArBoI,UAAU9K,OAAc,CAC1B,IAAKiC,IAAOS,MAAKJ,QACH,mBAARL,GACJS,KAAK4Q,mBAAmBrR,EAI1B,OAFAS,MAAK4Q,mBAAmB,kBACxB5Q,KAAKJ,WACEI,KAKT,GAFA2T,EAAY3T,KAAKJ,QAAQqG,GAErB+M,EAAWW,GACb3T,KAAK6Q,eAAe5K,EAAM0N,OACrB,IAAIA,EAET,KAAOA,EAAUrW,QACf0C,KAAK6Q,eAAe5K,EAAM0N,EAAUA,EAAUrW,OAAS,GAI3D,cAFO0C,MAAKJ,QAAQqG,GAEbjG,MAGTgB,EAAazC,UAAUoV,UAAY,SAAS1N,GAC1C,GAAIwO,EAOJ,OAHEA,GAHGzU,KAAKJ,SAAYI,KAAKJ,QAAQqG,GAE1B+M,EAAWhT,KAAKJ,QAAQqG,KACxBjG,KAAKJ,QAAQqG,IAEdjG,KAAKJ,QAAQqG,GAAMwL,YAI7BzQ,EAAazC,UAAUmW,cAAgB,SAASzO,GAC9C,GAAIjG,KAAKJ,QAAS,CAChB,GAAI+U,GAAa3U,KAAKJ,QAAQqG,EAE9B,IAAI+M,EAAW2B,GACb,MAAO,EACJ,IAAIA,EACP,MAAOA,GAAWrX,OAEtB,MAAO,IAGT0D,EAAa0T,cAAgB,SAASE,EAAS3O,GAC7C,MAAO2O,GAAQF,cAAczO,SAmBzB4O,IAAI,SAAS/X,EAAQU,EAAOJ,GASlC,QAAS0X,GAAWC,GAElB,GAAIC,GAAcC,EAAcF,EAAM,eAClCG,EAAWC,WAAWH,EAAa,GAGvC,IAAIA,IAAgBE,EAAW,GAAI,CAEjC,GAAIE,GAAiBL,EAAK1S,MAAMyS,UAChCC,GAAK1S,MAAMyS,WAAaE,EAAc,KAGtCA,EAAcC,EAAcF,EAAM,eAClCG,EAAWC,WAAWH,EAAa,IAG/BI,EACFL,EAAK1S,MAAMyS,WAAaM,QAEjBL,GAAK1S,MAAMyS,WA8BtB,GAvBkC,KAA9BE,EAAYrC,QAAQ,OACtBuC,GAAY,EACZA,GAAY,GAC2B,KAA9BF,EAAYrC,QAAQ,OAE7BuC,GAAY,GACZA,GAAY,MAC2B,KAA9BF,EAAYrC,QAAQ,OAE7BuC,GAAY,GACZA,GAAY,MAC2B,KAA9BF,EAAYrC,QAAQ,MAE7BuC,GAAY,GAC2B,KAA9BF,EAAYrC,QAAQ,QAE7BuC,GAAY,IAIdA,EAAWG,KAAKC,MAAMJ,GAGF,WAAhBF,EAA0B,CAE5B,GAAIO,GAAWR,EAAKQ,SAChBC,EAAQ7S,SAASC,cAAc2S,EACnCC,GAAMhQ,UAAY,QAGlB,IAAIiQ,GAAcR,EAAcF,EAAM,YACtCS,GAAMnT,MAAMqT,SAAWD,CAGvB,IAAIxS,GAAON,SAASM,IACpBA,GAAKC,YAAYsS,EAGjB,IAAIG,GAASH,EAAMI,YACnBV,GAAWS,EAGX1S,EAAKG,YAAYoS,GAInB,MAAON,GA/ET,GAAID,GAAgBnY,EAAQ,iBAmF5BU,GAAOJ,QAAU0X,IACde,iBAAiB,KAAKC,IAAI,SAAShZ,EAAQU,EAAOJ,GAGrD,GAAI6X,GAAgB,SAAUvS,EAAIqT,EAAMC,GAItC,MAHAA,GAAmBzM,OAAOyM,kBAKxBA,EAGEA,EAAiBtT,GAGjBA,EAAGuT,cAMLF,EAAKrL,QAAQ,UAAW,SAAUwL,EAAMC,GACtC,MAAOA,GAAOC,iBAKpB5Y,GAAOJ,QAAU6X,OAEXoB,IAAI,SAASvZ,EAAQU,EAAOJ,GA8BlC,QAASkZ,GAAQ3X,EAAOrB,GAGtB,MAFAqB,GAAyB,gBAATA,IAAqB4X,EAASC,KAAK7X,IAAWA,EAAQ,GACtErB,EAAmB,MAAVA,EAAiBmZ,EAAmBnZ,EACtCqB,EAAQ,IAAMA,EAAQ,GAAK,GAAarB,EAARqB,EAyBzC,QAAS+X,GAAY9K,EAAQrM,EAAKZ,GAChC,GAAIgY,GAAW/K,EAAOrM,KAChBqX,EAAGD,EAAUhY,IACZiY,EAAGD,EAAUE,EAAYtX,MAAU8F,EAAehI,KAAKuO,EAAQrM,IACvDyC,SAAVrD,KAAyBY,IAAOqM,OACnCA,EAAOrM,GAAOZ,GAWlB,QAASmY,GAAavX,GACpB,MAAO,UAASqM,GACd,MAAiB,OAAVA,EAAiB5J,OAAY4J,EAAOrM,IAa/C,QAASwX,GAAW7Q,EAAQ9G,EAAOwM,GACjC,MAAOoL,GAAe9Q,EAAQ9G,EAAOwM,GAcvC,QAASoL,GAAe9Q,EAAQ9G,EAAOwM,EAAQqL,GAC7CrL,IAAWA,KAKX,KAHA,GAAIxE,GAAQ,GACR9J,EAAS8B,EAAM9B,SAEV8J,EAAQ9J,GAAQ,CACvB,GAAIiC,GAAMH,EAAMgI,GAEZ8P,EAAWD,EACXA,EAAWrL,EAAOrM,GAAM2G,EAAO3G,GAAMA,EAAKqM,EAAQ1F,GAClDA,EAAO3G,EAEXmX,GAAY9K,EAAQrM,EAAK2X,GAE3B,MAAOtL,GAUT,QAASuL,GAAeC,GACtB,MAAOC,GAAK,SAASzL,EAAQ0L,GAC3B,GAAIlQ,GAAQ,GACR9J,EAASga,EAAQha,OACjB2Z,EAAa3Z,EAAS,EAAIga,EAAQha,EAAS,GAAK0E,OAChDuV,EAAQja,EAAS,EAAIga,EAAQ,GAAKtV,MAWtC,KATAiV,EAAkC,kBAAdA,IACf3Z,IAAU2Z,GACXjV,OAEAuV,GAASC,EAAeF,EAAQ,GAAIA,EAAQ,GAAIC,KAClDN,EAAsB,EAAT3Z,EAAa0E,OAAYiV,EACtC3Z,EAAS,GAEXsO,EAASpN,OAAOoN,KACPxE,EAAQ9J,GAAQ,CACvB,GAAI4I,GAASoR,EAAQlQ,EACjBlB,IACFkR,EAASxL,EAAQ1F,EAAQkB,EAAO6P,GAGpC,MAAOrL,KAyBX,QAAS4L,GAAe7Y,EAAOyI,EAAOwE,GACpC,IAAKuH,EAASvH,GACZ,OAAO,CAET,IAAI3F,SAAcmB,EAClB,QAAY,UAARnB,EACGwR,EAAY7L,IAAW0K,EAAQlP,EAAOwE,EAAOtO,QACrC,UAAR2I,GAAoBmB,IAASwE,IAC3BgL,EAAGhL,EAAOxE,GAAQzI,IAEpB,EAiCT,QAASiY,GAAGjY,EAAO+Y,GACjB,MAAO/Y,KAAU+Y,GAAU/Y,IAAUA,GAAS+Y,IAAUA,EA2B1D,QAASD,GAAY9Y,GACnB,MAAgB,OAATA,KACa,kBAATA,IAAuBqU,EAAWrU,KAAWgZ,EAASC,EAAUjZ,IAmB7E,QAASqU,GAAWrU,GAIlB,GAAIkZ,GAAM1E,EAASxU,GAASmZ,EAAeza,KAAKsB,GAAS,EACzD,OAAOkZ,IAAOE,GAAWF,GAAOG,EA2BlC,QAASL,GAAShZ,GAChB,MAAuB,gBAATA,IACZA,EAAQ,IAAMA,EAAQ,GAAK,GAAc8X,GAAT9X,EA0BpC,QAASwU,GAASxU,GAChB,GAAIsH,SAActH,EAClB,SAASA,IAAkB,UAARsH,GAA4B,YAARA,GAjUzC,GAAIgS,GAASnb,EAAQ,iBACjBua,EAAOva,EAAQ,eAGf2Z,EAAmB,iBAGnBsB,EAAU,oBACVC,EAAS,6BAGTzB,EAAW,mBAiBXM,EAAcrY,OAAOD,UAGrB8G,EAAiBwR,EAAYxR,eAM7ByS,EAAiBjB,EAAYqB,SAuH7BN,EAAYd,EAAa,UAqMzBqB,EAAWhB,EAAe,SAASvL,EAAQ1F,GAC7C6Q,EAAW7Q,EAAQ+R,EAAO/R,GAAS0F,IAGrCpO,GAAOJ,QAAU+a,IAEdC,gBAAgB,GAAGC,cAAc,KAAKC,IAAI,SAASxb,EAAQU,EAAOJ,GAgCrE,QAASmb,GAAU/b,EAAGgc,GAIpB,IAHA,GAAIpR,GAAQ,GACRgD,EAASO,MAAMnO,KAEV4K,EAAQ5K,GACf4N,EAAOhD,GAASoR,EAASpR,EAE3B,OAAOgD,GAWT,QAASkM,GAAQ3X,EAAOrB,GAGtB,MAFAqB,GAAyB,gBAATA,IAAqB4X,EAASC,KAAK7X,IAAWA,EAAQ,GACtErB,EAAmB,MAAVA,EAAiBmZ,EAAmBnZ,EACtCqB,EAAQ,IAAMA,EAAQ,GAAK,GAAarB,EAARqB,EAUzC,QAAS8Z,GAAgBC,GAIvB,IAHA,GAAI1U,GACAoG,OAEKpG,EAAO0U,EAASC,QAAQC,MAC/BxO,EAAO7J,KAAKyD,EAAKrF,MAEnB,OAAOyL,GA4BT,QAASyO,GAAWjN,GAClBA,EAAmB,MAAVA,EAAiBA,EAASpN,OAAOoN,EAE1C,IAAIxB,KACJ,KAAK,GAAI7K,KAAOqM,GACdxB,EAAO7J,KAAKhB,EAEd,OAAO6K,GAiBT,QAAS0M,GAAavX,GACpB,MAAO,UAASqM,GACd,MAAiB,OAAVA,EAAiB5J,OAAY4J,EAAOrM,IAwB/C,QAASuZ,GAAUlN,GACjB,GAAItO,GAASsO,EAASA,EAAOtO,OAAS0E,MACtC,OAAI2V,GAASra,KACRsN,EAAQgB,IAAWmN,EAASnN,IAAWoN,EAAYpN,IAC/C2M,EAAUjb,EAAQ2b,QAEpB,KAUT,QAASC,GAAYva,GACnB,GAAIwa,GAAOxa,GAASA,EAAMD,YACtB0a,EAAwB,kBAARD,IAAsBA,EAAK5a,WAAcsY,CAE7D,OAAOlY,KAAUya,EAmBnB,QAASJ,GAAYra,GAEnB,MAAO0a,GAAkB1a,IAAU0G,EAAehI,KAAKsB,EAAO,aAC1D2a,EAAqBjc,KAAKsB,EAAO,WAAamZ,EAAeza,KAAKsB,IAAU4a,GAoDlF,QAAS9B,GAAY9Y,GACnB,MAAgB,OAATA,KACa,kBAATA,IAAuBqU,EAAWrU,KAAWgZ,EAASC,EAAUjZ,IA0B7E,QAAS0a,GAAkB1a,GACzB,MAAO6a,GAAa7a,IAAU8Y,EAAY9Y,GAmB5C,QAASqU,GAAWrU,GAIlB,GAAIkZ,GAAM1E,EAASxU,GAASmZ,EAAeza,KAAKsB,GAAS,EACzD,OAAOkZ,IAAOE,GAAWF,GAAOG,EA2BlC,QAASL,GAAShZ,GAChB,MAAuB,gBAATA,IACZA,EAAQ,IAAMA,EAAQ,GAAK,GAAc8X,GAAT9X,EA0BpC,QAASwU,GAASxU,GAChB,GAAIsH,SAActH,EAClB,SAASA,IAAkB,UAARsH,GAA4B,YAARA,GA0BzC,QAASuT,GAAa7a,GACpB,QAASA,GAAyB,gBAATA,GAmB3B,QAASoa,GAASpa,GAChB,MAAuB,gBAATA,KACViM,EAAQjM,IAAU6a,EAAa7a,IAAUmZ,EAAeza,KAAKsB,IAAU8a,EAyB7E,QAASxB,GAAOrM,GAUd,IATA,GAAIxE,GAAQ,GACRsS,EAAUR,EAAYtN,GACtBxM,EAAQyZ,EAAWjN,GACnB+N,EAAcva,EAAM9B,OACpBsc,EAAUd,EAAUlN,GACpBiO,IAAgBD,EAChBxP,EAASwP,MACTtc,EAAS8M,EAAO9M,SAEX8J,EAAQuS,GAAa,CAC5B,GAAIpa,GAAMH,EAAMgI,EACVyS,KAAuB,UAAPta,GAAmB+W,EAAQ/W,EAAKjC,KACzC,eAAPiC,IAAyBma,IAAYrU,EAAehI,KAAKuO,EAAQrM,KACrE6K,EAAO7J,KAAKhB,GAGhB,MAAO6K,GAjbT,GAAI0P,GAAOhd,EAAQ,gBAGf2Z,EAAmB,iBAGnB8C,EAAU,qBACVxB,EAAU,oBACVC,EAAS,6BACTyB,EAAY,kBAGZlD,EAAW,mBAqDXM,EAAcrY,OAAOD,UAGrB8G,EAAiBwR,EAAYxR,eAM7ByS,EAAiBjB,EAAYqB,SAG7B6B,EAAUD,EAAKC,QACfC,EAAYD,EAAUA,EAAQC,UAAYhY,OAC1CsX,EAAuBzC,EAAYyC,oBAqBnCU,KAAcV,EAAqBjc,MAAO4c,QAAW,GAAK,aAC5DpB,EAAa,SAASjN,GACpB,MAAO6M,GAAgBuB,EAAUpO,KA2BrC,IAAIgM,GAAYd,EAAa,UA8EzBlM,EAAUD,MAAMC,OAqOpBpN,GAAOJ,QAAU6a,IAEdiC,eAAe,KAAKC,IAAI,SAASrd,EAAQU,EAAOJ,IACnD,SAAW2L,GAuDX,QAASqR,GAAYzb,GACnB,MAAQA,IAASA,EAAMH,SAAWA,OAAUG,EAAQ,KA7CtD,GAAI0b,IACFC,YAAY,EACZ1O,QAAU,GAIR2O,EAAeF,QAAmBjd,KAAYA,IAAYA,EAAQod,SAClEpd,EACA4E,OAGAyY,EAAcJ,QAAmB7c,KAAWA,IAAWA,EAAOgd,SAC9Dhd,EACAwE,OAGA0Y,EAAaN,EAAYG,GAAeE,GAA+B,gBAAV1R,IAAsBA,GAGnF4R,EAAWP,EAAYC,QAAmBnc,QAASA,MAGnD0c,EAAaR,EAAYC,QAAmB9Q,UAAWA,QAGvDsR,EAAaT,EAAYC,QAAmBra,QAASA,MAQrD8Z,EAAOY,GACPE,KAAgBC,GAAcA,EAAWtR,SAAYqR,GACrDD,GAAYE,GAAc9O,SAAS,gBAavCvO,GAAOJ,QAAU0c,IAEdzc,KAAK2C,KAAuB,mBAAX+I,QAAyBA,OAAyB,mBAAT7K,MAAuBA,KAAyB,mBAAXqL,QAAyBA,gBACrHuR,IAAI,SAAShe,EAAQU,EAAOJ,GA+ClC,QAAS+K,GAAM+I,EAAM6J,EAASvJ,GAC5B,GAAIlU,GAASkU,EAAKlU,MAClB,QAAQA,GACN,IAAK,GAAG,MAAO4T,GAAK7T,KAAK0d,EACzB,KAAK,GAAG,MAAO7J,GAAK7T,KAAK0d,EAASvJ,EAAK,GACvC,KAAK,GAAG,MAAON,GAAK7T,KAAK0d,EAASvJ,EAAK,GAAIA,EAAK,GAChD,KAAK,GAAG,MAAON,GAAK7T,KAAK0d,EAASvJ,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAE3D,MAAON,GAAK/I,MAAM4S,EAASvJ,GAqC7B,QAAS6F,GAAKnG,EAAM8J,GAClB,GAAmB,kBAAR9J,GACT,KAAM,IAAIlT,WAAUid,EAGtB,OADAD,GAAQE,EAAoBlZ,SAAVgZ,EAAuB9J,EAAK5T,OAAS,EAAK6d,EAAUH,GAAQ,GACvE,WAML,IALA,GAAIxJ,GAAOpJ,UACPhB,EAAQ,GACR9J,EAAS4d,EAAU1J,EAAKlU,OAAS0d,EAAO,GACxCI,EAAQzQ,MAAMrN,KAET8J,EAAQ9J,GACf8d,EAAMhU,GAASoK,EAAKwJ,EAAQ5T,EAE9B,QAAQ4T,GACN,IAAK,GAAG,MAAO9J,GAAK7T,KAAK2C,KAAMob,EAC/B,KAAK,GAAG,MAAOlK,GAAK7T,KAAK2C,KAAMwR,EAAK,GAAI4J;AACxC,IAAK,GAAG,MAAOlK,GAAK7T,KAAK2C,KAAMwR,EAAK,GAAIA,EAAK,GAAI4J,GAEnD,GAAIC,GAAY1Q,MAAMqQ,EAAQ,EAE9B,KADA5T,EAAQ,KACCA,EAAQ4T,GACfK,EAAUjU,GAASoK,EAAKpK,EAG1B,OADAiU,GAAUL,GAASI,EACZjT,EAAM+I,EAAMlR,KAAMqb,IAoB7B,QAASrI,GAAWrU,GAIlB,GAAIkZ,GAAM1E,EAASxU,GAASmZ,EAAeza,KAAKsB,GAAS,EACzD,OAAOkZ,IAAOE,GAAWF,GAAOG,EA0BlC,QAAS7E,GAASxU,GAChB,GAAIsH,SAActH,EAClB,SAASA,IAAkB,UAARsH,GAA4B,YAARA,GA2BzC,QAASkV,GAAUxc,GACjB,IAAKA,EACH,MAAiB,KAAVA,EAAcA,EAAQ,CAG/B,IADAA,EAAQ2c,EAAS3c,GACbA,IAAU4c,GAAY5c,KAAW4c,EAAU,CAC7C,GAAIC,GAAgB,EAAR7c,EAAY,GAAK,CAC7B,OAAO6c,GAAOC,EAEhB,GAAIC,GAAY/c,EAAQ,CACxB,OAAOA,KAAUA,EAAS+c,EAAY/c,EAAQ+c,EAAY/c,EAAS,EAyBrE,QAAS2c,GAAS3c,GAChB,GAAIwU,EAASxU,GAAQ,CACnB,GAAI+Y,GAAQ1E,EAAWrU,EAAMsb,SAAWtb,EAAMsb,UAAYtb,CAC1DA,GAAQwU,EAASuE,GAAUA,EAAQ,GAAMA,EAE3C,GAAoB,gBAAT/Y,GACT,MAAiB,KAAVA,EAAcA,GAASA,CAEhCA,GAAQA,EAAM+L,QAAQiR,EAAQ,GAC9B,IAAIC,GAAWC,EAAWrF,KAAK7X,EAC/B,OAAQid,IAAYE,EAAUtF,KAAK7X,GAC/Bod,EAAapd,EAAM8S,MAAM,GAAImK,EAAW,EAAI,GAC3CI,EAAWxF,KAAK7X,GAASsd,GAAOtd,EAzOvC,GAAIsc,GAAkB,sBAGlBM,EAAW,EAAI,EACfE,EAAc,uBACdQ,EAAM,IAGNlE,EAAU,oBACVC,EAAS,6BAGT2D,EAAS,aAGTK,EAAa,qBAGbH,EAAa,aAGbC,EAAY,cAGZC,EAAenJ,SAwBfiE,EAAcrY,OAAOD,UAMrBuZ,EAAiBjB,EAAYqB,SAG7BgD,EAAY7F,KAAK6G,GAmLrB1e,GAAOJ,QAAUia,OAEX8E,IAAI,SAASrf,EAAQU,EAAOJ,GAsBlC,QAASgf,GAAUhB,EAAO5C,GAIxB,IAHA,GAAIpR,GAAQ,GACR9J,EAAS8d,EAAM9d,SAEV8J,EAAQ9J,GACXkb,EAAS4C,EAAMhU,GAAQA,EAAOgU,MAAW,IAI/C,MAAOA,GAtBT,GAAIiB,GAAcvf,EAAQ,uBACtBwf,EAAOxf,EAAQ,eACfua,EAAOva,EAAQ,eAiDfyf,EAAUlF,EAAK,SAASzL,EAAQ4Q,GAIlC,MAHAJ,GAAUC,EAAYG,EAAa,GAAI,SAASjd,GAC9CqM,EAAOrM,GAAO+c,EAAK1Q,EAAOrM,GAAMqM,KAE3BA,GAGTpO,GAAOJ,QAAUmf,IAEdE,sBAAsB,GAAGC,cAAc,GAAGrE,cAAc,KAAKsE,IAAI,SAAS7f,EAAQU,EAAOJ,GA0B5F,QAASwf,GAAUxB,EAAOyB,GAKxB,IAJA,GAAIzV,GAAQ,GACR9J,EAASuf,EAAOvf,OAChBwf,EAAS1B,EAAM9d,SAEV8J,EAAQ9J,GACf8d,EAAM0B,EAAS1V,GAASyV,EAAOzV,EAEjC,OAAOgU,GA4BT,QAASiB,GAAYjB,EAAO2B,EAAOC,EAAU5S,GAC3CA,IAAWA,KAKX,KAHA,GAAIhD,GAAQ,GACR9J,EAAS8d,EAAM9d,SAEV8J,EAAQ9J,GAAQ,CACvB,GAAIqB,GAAQyc,EAAMhU,EACd2V,GAAQ,GAAK1D,EAAkB1a,KAC9Bqe,GAAYpS,EAAQjM,IAAUqa,EAAYra,IACzCoe,EAAQ,EAEVV,EAAY1d,EAAOoe,EAAQ,EAAGC,EAAU5S,GAExCwS,EAAUxS,EAAQzL,GAEVqe,IACV5S,EAAOA,EAAO9M,QAAUqB,GAG5B,MAAOyL,GAUT,QAAS0M,GAAavX,GACpB,MAAO,UAASqM,GACd,MAAiB,OAAVA,EAAiB5J,OAAY4J,EAAOrM,IAgC/C,QAASyZ,GAAYra,GAEnB,MAAO0a,GAAkB1a,IAAU0G,EAAehI,KAAKsB,EAAO,aAC1D2a,EAAqBjc,KAAKsB,EAAO,WAAamZ,EAAeza,KAAKsB,IAAU4a,GAoDlF,QAAS9B,GAAY9Y,GACnB,MAAgB,OAATA,GAAiBgZ,EAASC,EAAUjZ,MAAYqU,EAAWrU,GA0BpE,QAAS0a,GAAkB1a,GACzB,MAAO6a,GAAa7a,IAAU8Y,EAAY9Y,GAmB5C,QAASqU,GAAWrU,GAIlB,GAAIkZ,GAAM1E,EAASxU,GAASmZ,EAAeza,KAAKsB,GAAS,EACzD,OAAOkZ,IAAOE,GAAWF,GAAOG,EA2BlC,QAASL,GAAShZ,GAChB,MAAuB,gBAATA,IACZA,EAAQ,IAAMA,EAAQ,GAAK,GAAc8X,GAAT9X,EA0BpC,QAASwU,GAASxU,GAChB,GAAIsH,SAActH,EAClB,SAASA,IAAkB,UAARsH,GAA4B,YAARA,GA0BzC,QAASuT,GAAa7a,GACpB,QAASA,GAAyB,gBAATA,GAlT3B,GAAI8X,GAAmB,iBAGnB8C,EAAU,qBACVxB,EAAU,oBACVC,EAAS,6BAsBTnB,EAAcrY,OAAOD,UAGrB8G,EAAiBwR,EAAYxR,eAM7ByS,EAAiBjB,EAAYqB,SAG7BoB,EAAuBzC,EAAYyC,qBA0DnC1B,EAAYd,EAAa,UA+CzBlM,EAAUD,MAAMC,OAqKpBpN,GAAOJ,QAAUif,OAEXY,IAAI,SAASngB,EAAQU,EAAOJ,GA4BlC,QAAS8f,GAAe9B,EAAO+B,GAM7B,IALA,GAAI/V,GAAQ,GACR9J,EAAS8d,EAAM9d,OACf8f,EAAW,EACXhT,OAEKhD,EAAQ9J,GAAQ,CACvB,GAAIqB,GAAQyc,EAAMhU,IACdzI,IAAUwe,GAAexe,IAAU0e,KACrCjC,EAAMhU,GAASiW,EACfjT,EAAOgT,KAAchW,GAGzB,MAAOgD,GAUT,QAASkT,GAAepM,GACtB,GAAItF,GAASsF,CACb,OAAOtF,GAAOuR,YA5ChB,GAAII,GAAgBzgB,EAAQ,yBACxBua,EAAOva,EAAQ,eAGfugB,EAAc,yBAGdG,EAAY,EACZC,EAAe,GA0EfnB,EAAOjF,EAAK,SAASnG,EAAM6J,EAAS2C,GACtC,GAAIC,GAAUH,CACd,IAAIE,EAASpgB,OAAQ,CACnB,GAAIsgB,GAAUV,EAAeQ,EAAUJ,EAAehB,GACtDqB,IAAWF,EAEb,MAAOF,GAAcrM,EAAMyM,EAAS5C,EAAS2C,EAAUE,IAIzDtB,GAAKa,eAEL3f,EAAOJ,QAAUkf,IAEduB,wBAAwB,GAAGxF,cAAc,KAAKyF,IAAI,SAAShhB,EAAQU,EAAOJ,IAC7E,SAAW2L,GAuGX,QAASZ,GAAM+I,EAAM6J,EAASvJ,GAC5B,GAAIlU,GAASkU,EAAKlU,MAClB,QAAQA,GACN,IAAK,GAAG,MAAO4T,GAAK7T,KAAK0d,EACzB,KAAK,GAAG,MAAO7J,GAAK7T,KAAK0d,EAASvJ,EAAK,GACvC,KAAK,GAAG,MAAON,GAAK7T,KAAK0d,EAASvJ,EAAK,GAAIA,EAAK,GAChD,KAAK,GAAG,MAAON,GAAK7T,KAAK0d,EAASvJ,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAE3D,MAAON,GAAK/I,MAAM4S,EAASvJ,GAU7B,QAAS4I,GAAYzb,GACnB,MAAQA,IAASA,EAAMH,SAAWA,OAAUG,EAAQ,KAWtD,QAASof,GAAa3C,EAAO+B,GAI3B,IAHA,GAAI7f,GAAS8d,EAAM9d,OACf8M,EAAS,EAEN9M,KACD8d,EAAM9d,KAAY6f,GACpB/S,GAGJ,OAAOA,GAWT,QAASkM,GAAQ3X,EAAOrB,GAGtB,MAFAqB,GAAyB,gBAATA,IAAqB4X,EAASC,KAAK7X,IAAWA,EAAQ,GACtErB,EAAmB,MAAVA,EAAiBmZ,EAAmBnZ,EACtCqB,EAAQ,IAAMA,EAAQ,GAAK,GAAarB,EAARqB,EAYzC,QAASue,GAAe9B,EAAO+B,GAM7B,IALA,GAAI/V,GAAQ,GACR9J,EAAS8d,EAAM9d,OACf8f,EAAW,EACXhT,OAEKhD,EAAQ9J,GAAQ,CACvB,GAAIqB,GAAQyc,EAAMhU,IACdzI,IAAUwe,GAAexe,IAAU0e,KACrCjC,EAAMhU,GAASiW,EACfjT,EAAOgT,KAAchW,GAGzB,MAAOgD,GA2BT,QAAS4T,GAAW5E,GAClB,MAAOjG,GAASiG,GAAS6E,GAAa7E,MAcxC,QAAS8E,GAAY1M,EAAMkM,EAAUE,EAASO,GAU5C,IATA,GAAIC,GAAY,GACZC,EAAa7M,EAAKlU,OAClBghB,EAAgBV,EAAQtgB,OACxBihB,EAAY,GACZC,EAAad,EAASpgB,OACtBmhB,EAAcvD,GAAUmD,EAAaC,EAAe,GACpDlU,EAASO,MAAM6T,EAAaC,GAC5BC,GAAeP,IAEVI,EAAYC,GACnBpU,EAAOmU,GAAab,EAASa,EAE/B,QAASH,EAAYE,IACfI,GAA2BL,EAAZD,KACjBhU,EAAOwT,EAAQQ,IAAc5M,EAAK4M,GAGtC,MAAOK,KACLrU,EAAOmU,KAAe/M,EAAK4M,IAE7B,OAAOhU,GAcT,QAASuU,GAAiBnN,EAAMkM,EAAUE,EAASO,GAWjD,IAVA,GAAIC,GAAY,GACZC,EAAa7M,EAAKlU,OAClBshB,EAAe,GACfN,EAAgBV,EAAQtgB,OACxBuhB,EAAa,GACbC,EAAcpB,EAASpgB,OACvBmhB,EAAcvD,GAAUmD,EAAaC,EAAe,GACpDlU,EAASO,MAAM8T,EAAcK,GAC7BJ,GAAeP,IAEVC,EAAYK,GACnBrU,EAAOgU,GAAa5M,EAAK4M,EAG3B,KADA,GAAItB,GAASsB,IACJS,EAAaC,GACpB1U,EAAO0S,EAAS+B,GAAcnB,EAASmB,EAEzC,QAASD,EAAeN,IAClBI,GAA2BL,EAAZD,KACjBhU,EAAO0S,EAASc,EAAQgB,IAAiBpN,EAAK4M,KAGlD,OAAOhU,GAWT,QAAS2U,GAAU7Y,EAAQkV,GACzB,GAAIhU,GAAQ,GACR9J,EAAS4I,EAAO5I,MAGpB,KADA8d,IAAUA,EAAQzQ,MAAMrN,MACf8J,EAAQ9J,GACf8d,EAAMhU,GAASlB,EAAOkB,EAExB,OAAOgU,GAaT,QAAS4D,GAAkB9N,EAAMyM,EAAS5C,GAIxC,QAASkE,KACP,GAAIC,GAAMlf,MAAQA,OAAS8Z,IAAQ9Z,eAAgBif,GAAW9F,EAAOjI,CACrE,OAAOgO,GAAG/W,MAAMgX,EAASpE,EAAU/a,KAAMoI,WAL3C,GAAI+W,GAASxB,EAAUH,EACnBrE,EAAOiG,EAAkBlO,EAM7B,OAAO+N,GAWT,QAASG,GAAkBjG,GACzB,MAAO,YAIL,GAAI3H,GAAOpJ,SACX,QAAQoJ,EAAKlU,QACX,IAAK,GAAG,MAAO,IAAI6b,EACnB,KAAK,GAAG,MAAO,IAAIA,GAAK3H,EAAK,GAC7B,KAAK,GAAG,MAAO,IAAI2H,GAAK3H,EAAK,GAAIA,EAAK,GACtC,KAAK,GAAG,MAAO,IAAI2H,GAAK3H,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAC/C,KAAK,GAAG,MAAO,IAAI2H,GAAK3H,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GACxD,KAAK,GAAG,MAAO,IAAI2H,GAAK3H,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GACjE,KAAK,GAAG,MAAO,IAAI2H,GAAK3H,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAC1E,KAAK,GAAG,MAAO,IAAI2H,GAAK3H,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAErF,GAAI6N,GAAcrB,EAAW7E,EAAK5a,WAC9B6L,EAAS+O,EAAKhR,MAAMkX,EAAa7N,EAIrC,OAAO2B,GAAS/I,GAAUA,EAASiV,GAavC,QAASC,GAAmBpO,EAAMyM,EAAS4B,GAGzC,QAASN,KAMP,IALA,GAAI3hB,GAAS8K,UAAU9K,OACnBkU,EAAO7G,MAAMrN,GACb8J,EAAQ9J,EACR6f,EAAcG,EAAe2B,GAE1B7X,KACLoK,EAAKpK,GAASgB,UAAUhB,EAE1B,IAAIwW,GAAoB,EAATtgB,GAAckU,EAAK,KAAO2L,GAAe3L,EAAKlU,EAAS,KAAO6f,KAEzED,EAAe1L,EAAM2L,EAGzB,IADA7f,GAAUsgB,EAAQtgB,OACLiiB,EAATjiB,EACF,MAAOkiB,GACLtO,EAAMyM,EAAS8B,EAAqBR,EAAQ9B,YAAanb,OACzDwP,EAAMoM,EAAS5b,OAAWA,OAAWud,EAAQjiB,EAEjD,IAAI4hB,GAAMlf,MAAQA,OAAS8Z,IAAQ9Z,eAAgBif,GAAW9F,EAAOjI,CACrE,OAAO/I,GAAM+W,EAAIlf,KAAMwR,GAtBzB,GAAI2H,GAAOiG,EAAkBlO,EAwB7B,OAAO+N,GAoBT,QAASQ,GAAoBvO,EAAMyM,EAAS5C,EAAS2C,EAAUE,EAAS8B,EAAeC,EAAcC,EAAQC,EAAKN,GAQhH,QAASN,KAKP,IAJA,GAAI3hB,GAAS8K,UAAU9K,OACnB8J,EAAQ9J,EACRkU,EAAO7G,MAAMrN,GAEV8J,KACLoK,EAAKpK,GAASgB,UAAUhB,EAE1B,IAAI+W,EACF,GAAIhB,GAAcG,EAAe2B,GAC7Ba,EAAe/B,EAAavM,EAAM2L,EASxC,IAPIO,IACFlM,EAAO0M,EAAY1M,EAAMkM,EAAUE,EAASO,IAE1CuB,IACFlO,EAAOmN,EAAiBnN,EAAMkO,EAAeC,EAAcxB,IAE7D7gB,GAAUwiB,EACN3B,GAAsBoB,EAATjiB,EAAgB,CAC/B,GAAIyiB,GAAa7C,EAAe1L,EAAM2L,EACtC,OAAOqC,GACLtO,EAAMyM,EAAS8B,EAAqBR,EAAQ9B,YAAapC,EACzDvJ,EAAMuO,EAAYH,EAAQC,EAAKN,EAAQjiB,GAG3C,GAAI+hB,GAAcF,EAASpE,EAAU/a,KACjCkf,EAAKc,EAAYX,EAAYnO,GAAQA,CAczC,OAZA5T,GAASkU,EAAKlU,OACVsiB,EACFpO,EAAOyO,EAAQzO,EAAMoO,GACZM,GAAU5iB,EAAS,GAC5BkU,EAAK2O,UAEHC,GAAe9iB,EAANuiB,IACXrO,EAAKlU,OAASuiB,GAEZ7f,MAAQA,OAAS8Z,IAAQ9Z,eAAgBif,KAC3CC,EAAK/F,GAAQiG,EAAkBF,IAE1BA,EAAG/W,MAAMkX,EAAa7N,GAhD/B,GAAI4O,GAAQzC,EAAU0C,EAClBlB,EAASxB,EAAUH,EACnBwC,EAAYrC,EAAU2C,EACtBnC,EAAYR,GAAW4C,EAAaC,GACpCN,EAASvC,EAAU8C,EACnBtH,EAAO6G,EAAYhe,OAAYod,EAAkBlO,EA6CrD,OAAO+N,GAeT,QAASyB,GAAqBxP,EAAMyM,EAAS5C,EAAS2C,GAIpD,QAASuB,KAQP,IAPA,GAAIb,GAAY,GACZC,EAAajW,UAAU9K,OACvBihB,EAAY,GACZC,EAAad,EAASpgB,OACtBkU,EAAO7G,MAAM6T,EAAaH,GAC1Ba,EAAMlf,MAAQA,OAAS8Z,IAAQ9Z,eAAgBif,GAAW9F,EAAOjI,IAE5DqN,EAAYC,GACnBhN,EAAK+M,GAAab,EAASa,EAE7B,MAAOF,KACL7M,EAAK+M,KAAenW,YAAYgW,EAElC,OAAOjW,GAAM+W,EAAIC,EAASpE,EAAU/a,KAAMwR,GAjB5C,GAAI2N,GAASxB,EAAUH,EACnBrE,EAAOiG,EAAkBlO,EAkB7B,OAAO+N,GAmBT,QAASO,GAAqBtO,EAAMyM,EAASgD,EAAUxD,EAAapC,EAAS2C,EAAUE,EAASgC,EAAQC,EAAKN,GAC3G,GAAIqB,GAAUjD,EAAU4C,EACpBM,EAAYjB,EAASb,EAAUa,GAAU5d,OACzC+d,EAAaa,EAAUhD,EAAU5b,OACjC8e,EAAkBF,EAAU5e,OAAY4b,EACxCmD,EAAcH,EAAUlD,EAAW1b,OACnCgf,EAAmBJ,EAAU5e,OAAY0b,CAE7CC,IAAYiD,EAAUnD,EAAewD,EACrCtD,KAAaiD,EAAUK,EAAqBxD,GAEtCE,EAAUuD,IACdvD,KAAaH,EAAY8C,GAG3B,IAAIlW,GAASuW,EAASzP,EAAMyM,EAAS5C,EAASgG,EAAahB,EAAYiB,EAAkBF,EAAiBD,EAAWhB,EAAKN,EAE1H,OADAnV,GAAO+S,YAAcA,EACd/S,EA4BT,QAASmT,GAAcrM,EAAMyM,EAAS5C,EAAS2C,EAAUE,EAASgC,EAAQC,EAAKN,GAC7E,GAAIS,GAAYrC,EAAU2C,CAC1B,KAAKN,GAA4B,kBAAR9O,GACvB,KAAM,IAAIlT,WAAUid,EAEtB,IAAI3d,GAASogB,EAAWA,EAASpgB,OAAS,CAS1C,IARKA,IACHqgB,KAAaF,EAAewD,GAC5BvD,EAAWE,EAAU5b,QAEvB6d,EAAc7d,SAAR6d,EAAoBA,EAAM3E,GAAUC,EAAU0E,GAAM,GAC1DN,EAAkBvd,SAAVud,EAAsBA,EAAQpE,EAAUoE,GAChDjiB,GAAUsgB,EAAUA,EAAQtgB,OAAS,EAEjCqgB,EAAUsD,EAAoB,CAChC,GAAIvB,GAAgBhC,EAChBiC,EAAe/B,CAEnBF,GAAWE,EAAU5b,OAGvB,GAAImf,IACFjQ,EAAMyM,EAAS5C,EAAS2C,EAAUE,EAAS8B,EAAeC,EAC1DC,EAAQC,EAAKN,EAef,IAZArO,EAAOiQ,EAAQ,GACfxD,EAAUwD,EAAQ,GAClBpG,EAAUoG,EAAQ,GAClBzD,EAAWyD,EAAQ,GACnBvD,EAAUuD,EAAQ,GAClB5B,EAAQ4B,EAAQ,GAAmB,MAAdA,EAAQ,GACxBnB,EAAY,EAAI9O,EAAK5T,OACtB4d,GAAUiG,EAAQ,GAAK7jB,EAAQ,IAE9BiiB,GAAS5B,GAAW4C,EAAaC,KACpC7C,KAAa4C,EAAaC,IAEvB7C,GAAWA,GAAWH,EAGzBpT,EADSuT,GAAW4C,GAAc5C,GAAW6C,EACpClB,EAAmBpO,EAAMyM,EAAS4B,GACjC5B,GAAWF,GAAgBE,IAAYH,EAAYC,IAAmBG,EAAQtgB,OAG/EmiB,EAAoBtX,MAAMnG,OAAWmf,GAFrCT,EAAqBxP,EAAMyM,EAAS5C,EAAS2C,OAJtD,IAAItT,GAAS4U,EAAkB9N,EAAMyM,EAAS5C,EAQhD,OAAO3Q,GAUT,QAASkT,GAAepM,GACtB,GAAItF,GAASsF,CACb,OAAOtF,GAAOuR,YAahB,QAAS8C,GAAQ7E,EAAOxB,GAKtB,IAJA,GAAIwH,GAAYhG,EAAM9d,OAClBA,EAAS+jB,GAAUzH,EAAQtc,OAAQ8jB,GACnCE,EAAWvC,EAAU3D,GAElB9d,KAAU,CACf,GAAI8J,GAAQwS,EAAQtc,EACpB8d,GAAM9d,GAAUgZ,EAAQlP,EAAOga,GAAaE,EAASla,GAASpF,OAEhE,MAAOoZ,GAmBT,QAASpI,GAAWrU,GAIlB,GAAIkZ,GAAM1E,EAASxU,GAASmZ,GAAeza,KAAKsB,GAAS,EACzD,OAAOkZ,IAAOE,GAAWF,GAAOG,EA0BlC,QAAS7E,GAASxU,GAChB,GAAIsH,SAActH,EAClB,SAASA,IAAkB,UAARsH,GAA4B,YAARA,GA2BzC,QAASkV,GAAUxc,GACjB,IAAKA,EACH,MAAiB,KAAVA,EAAcA,EAAQ,CAG/B,IADAA,EAAQ2c,EAAS3c,GACbA,IAAU4c,GAAY5c,KAAW4c,EAAU,CAC7C,GAAIC,GAAgB,EAAR7c,EAAY,GAAK,CAC7B,OAAO6c,GAAOC,EAEhB,GAAIC,GAAY/c,EAAQ,CACxB,OAAOA,KAAUA,EAAS+c,EAAY/c,EAAQ+c,EAAY/c,EAAS,EAyBrE,QAAS2c,GAAS3c,GAChB,GAAIwU,EAASxU,GAAQ,CACnB,GAAI+Y,GAAQ1E,EAAWrU,EAAMsb,SAAWtb,EAAMsb,UAAYtb,CAC1DA,GAAQwU,EAASuE,GAAUA,EAAQ,GAAMA,EAE3C,GAAoB,gBAAT/Y,GACT,MAAiB,KAAVA,EAAcA,GAASA,CAEhCA,GAAQA,EAAM+L,QAAQiR,EAAQ,GAC9B,IAAIC,GAAWC,EAAWrF,KAAK7X,EAC/B,OAAQid,IAAYE,EAAUtF,KAAK7X,GAC/Bod,EAAapd,EAAM8S,MAAM,GAAImK,EAAW,EAAI,GAC3CI,EAAWxF,KAAK7X,GAASsd,GAAOtd,EArvBvC,GAAIsc,GAAkB,sBAGlBoC,EAAc,yBAGdG,EAAY,EACZ8C,EAAgB,EAChBY,EAAmB,EACnBX,EAAa,EACbC,EAAmB,GACnB/C,EAAe,GACfwD,EAAqB,GACrBZ,EAAW,IACXI,EAAY,IAGZlF,EAAW,EAAI,EACf9E,EAAmB,iBACnBgF,EAAc,uBACdQ,EAAM,IAGNlE,EAAU,oBACVC,EAAS,6BAGT2D,EAAS,aAGTK,EAAa,qBAGbH,EAAa,aAGbC,EAAY,cAGZvF,EAAW,mBAGX8D,GACFC,YAAY,EACZ1O,QAAU,GAIRmQ,EAAenJ,SAGf2H,EAAeF,QAAmBjd,KAAYA,IAAYA,EAAQod,SAClEpd,EACA4E,OAGAyY,EAAcJ,QAAmB7c,KAAWA,IAAWA,EAAOgd,SAC9Dhd,EACAwE,OAGA0Y,EAAaN,EAAYG,GAAeE,GAA+B,gBAAV1R,IAAsBA,GAGnF4R,EAAWP,EAAYC,QAAmBnc,QAASA,MAGnD0c,EAAaR,EAAYC,QAAmB9Q,UAAWA,QAGvDsR,GAAaT,EAAYC,QAAmBra,QAASA,MAQrD8Z,GAAOY,GACPE,KAAgBC,IAAcA,GAAWtR,SAAYqR,GACrDD,GAAYE,IAAc9O,SAAS,iBA8FnC8K,GAAcrY,OAAOD,UAMrBuZ,GAAiBjB,GAAYqB,SAG7B+F,GAAezf,OAAOC,OAGtByc,GAAY7F,KAAK6G,IACjBmF,GAAYhM,KAAKkM,GA6jBrB/jB,GAAOJ,QAAUmgB,IAEdlgB,KAAK2C,KAAuB,mBAAX+I,QAAyBA,OAAyB,mBAAT7K,MAAuBA,KAAyB,mBAAXqL,QAAyBA,gBACrHiY,IAAI,SAAS1kB,EAAQU,EAAOJ,GAClCgL,UAAU,GAAG,IAAI,GAAGD,MAAM/K,EAAQgL,aAC/BqZ,IAAM,KAAKC,IAAI,SAAS5kB,EAAQU,EAAOJ,GAuC1C,QAAS4V,GAAWrU,GAIlB,GAAIkZ,GAAM1E,EAASxU,GAASmZ,EAAeza,KAAKsB,GAAS,EACzD,OAAOkZ,IAAOE,GAAWF,GAAOG,EA0BlC,QAAS7E,GAASxU,GAChB,GAAIsH,SAActH,EAClB,SAASA,IAAkB,UAARsH,GAA4B,YAARA,GA7DzC,GAAI8R,GAAU,oBACVC,EAAS,6BAGTnB,EAAcrY,OAAOD,UAMrBuZ,EAAiBjB,EAAYqB,QAsDjC1a,GAAOJ,QAAU4V,OAEX2O,IAAI,SAAS7kB,EAAQU,EAAOJ,GAsElC,QAASoc,GAAa7a,GACpB,QAASA,GAAyB,gBAATA,GAmB3B,QAASoa,GAASpa,GAChB,MAAuB,gBAATA,KACViM,EAAQjM,IAAU6a,EAAa7a,IAAUmZ,EAAeza,KAAKsB,IAAU8a,EAjF7E,GAAIA,GAAY,kBAGZ5C,EAAcrY,OAAOD,UAMrBuZ,EAAiBjB,EAAYqB,SAyB7BtN,EAAUD,MAAMC,OAkDpBpN,GAAOJ,QAAU2b,OAEX6I,IAAI,SAAS9kB,EAAQU,EAAOJ,GA8BlC,QAASykB,GAASC,GAChB,GAAIjf,KAAOkf,CACX,OAAO7J,GAAS4J,GAAUjf,EAvB5B,GAAIqV,GAAWpb,EAAQ,mBAGnBilB,EAAY,CAuBhBvkB,GAAOJ,QAAUykB,IAEdG,kBAAkB,KAAKC,IAAI,SAASnlB,EAAQU,EAAOJ,IACtD,SAAW2L,GA6DX,QAASqR,GAAYzb,GACnB,MAAQA,IAASA,EAAMH,SAAWA,OAAUG,EAAQ,KA0CtD,QAAS6a,GAAa7a,GACpB,QAASA,GAAyB,gBAATA,GAmB3B,QAASujB,GAASvjB,GAChB,MAAuB,gBAATA,IACX6a,EAAa7a,IAAUmZ,EAAeza,KAAKsB,IAAUwjB,EAuB1D,QAASjK,GAASvZ,GAEhB,GAAoB,gBAATA,GACT,MAAOA,EAET,IAAa,MAATA,EACF,MAAO,EAET,IAAIujB,EAASvjB,GACX,MAAOyjB,GAASC,EAAehlB,KAAKsB,GAAS,EAE/C,IAAIyL,GAAUzL,EAAQ,EACtB,OAAkB,KAAVyL,GAAkB,EAAIzL,IAAW4c,EAAY,KAAOnR,EAtJ9D,GAAImR,GAAW,EAAI,EAGf4G,EAAY,kBAGZ9H,GACFC,YAAY,EACZ1O,QAAU,GAIR2O,EAAeF,QAAmBjd,KAAYA,IAAYA,EAAQod,SAClEpd,EACA4E,OAGAyY,EAAcJ,QAAmB7c,KAAWA,IAAWA,EAAOgd,SAC9Dhd,EACAwE,OAGA0Y,EAAaN,EAAYG,GAAeE,GAA+B,gBAAV1R,IAAsBA,GAGnF4R,EAAWP,EAAYC,QAAmBnc,QAASA,MAGnD0c,EAAaR,EAAYC,QAAmB9Q,UAAWA,QAGvDsR,EAAaT,EAAYC,QAAmBra,QAASA,MAQrD8Z,EAAOY,GACPE,KAAgBC,GAAcA,EAAWtR,SAAYqR,GACrDD,GAAYE,GAAc9O,SAAS,iBAcnC8K,EAAcrY,OAAOD,UAMrBuZ,EAAiBjB,EAAYqB,SAG7BkK,EAAStI,EAAKsI,OAGdE,EAAcF,EAASA,EAAO7jB,UAAYyD,OAC1CqgB,EAAiBD,EAASE,EAAYpK,SAAWlW,MAqFrDxE,GAAOJ,QAAU8a,IAEd7a,KAAK2C,KAAuB,mBAAX+I,QAAyBA,OAAyB,mBAAT7K,MAAuBA,KAAyB,mBAAXqL,QAAyBA,gBACrHgZ,IAAI,SAASzlB,EAAQU,EAAOJ,IAGjC,WAmDD,QAASoP,GAAoBgW,EAASzf,EAAUsM,GAC9C,IAAIoT,EACF,KAAM,IAAIxlB,OAAM,iFAGlB,IAAIylB,GAAQrT,GAAWA,EAAQqT,QAAS,CACxC,IAAIA,EAAO,CACT,GAAIhgB,GAAKC,SAASggB,cAAc,4CAC3BjgB,IAAOA,EAAGS,WAAWC,YAAYV,GAIxC,GAAIiP,GAAMhP,SAASC,cAAc,MACjC+O,GAAI9O,GAAK,2CACTF,SAASM,KAAKC,YAAYyO,EAE1B,IAAItP,GAAQsP,EAAItP,MACZugB,EAAWrZ,OAAOyM,iBAAkBA,iBAAiBwM,GAAWA,EAAQvM,YAG5E5T,GAAMwgB,WAAa,WACM,UAArBL,EAAQjN,WACVlT,EAAMygB,SAAW,cAGnBzgB,EAAMU,SAAW,WACZ2f,IACHrgB,EAAM0gB,WAAa,UAGrBC,EAAW5iB,QAAQ,SAAU2V,GAC3B1T,EAAM0T,GAAQ6M,EAAS7M,KAGrBkN,EAEET,EAAQU,aAAetQ,SAASgQ,EAASjN,UAC3CtT,EAAM8gB,UAAY,UAEpB9gB,EAAM+gB,SAAW,SAGnBzR,EAAI0R,YAAcb,EAAQ7jB,MAAMmP,UAAU,EAAG/K,GAEpB,UAArByf,EAAQjN,WACV5D,EAAI0R,YAAc1R,EAAI0R,YAAY3Y,QAAQ,MAAO,KAEnD,IAAI4Y,GAAO3gB,SAASC,cAAc,OAMlC0gB,GAAKD,YAAcb,EAAQ7jB,MAAMmP,UAAU/K,IAAa,IACxD4O,EAAIzO,YAAYogB,EAEhB,IAAIC,IACF/V,IAAK8V,EAAKE,UAAY5Q,SAASgQ,EAAyB,gBACxDnV,KAAM6V,EAAKG,WAAa7Q,SAASgQ,EAA0B,iBAS7D,OANIF,GACFY,EAAKjhB,MAAMqhB,gBAAkB,OAE7B/gB,SAASM,KAAKG,YAAYuO,GAGrB4R,EAhHT,GAAIP,IACF,YACA,YACA,QACA,SACA,YACA,YAEA,iBACA,mBACA,oBACA,kBACA,cAEA,aACA,eACA,gBACA,cAGA,YACA,cACA,aACA,cACA,WACA,iBACA,aACA,aAEA,YACA,gBACA,aACA,iBAEA,gBACA,cAEA,UACA,cAIEP,EAA+B,mBAAXlZ,QACpB0Z,EAAaR,GAAuC,MAA1BlZ,OAAOoa,eAwEhB,oBAAVnmB,IAAkD,mBAAlBA,GAAOJ,QAChDI,EAAOJ,QAAUoP,EACTiW,IACRlZ,OAAOiD,oBAAsBA,gBAKpB","file":"textcomplete.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _lodash = require('lodash.bindall');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _events = require('events');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CALLBACK_METHODS = ['handleQueryResult'];\n\n/**\n * @extends EventEmitter\n */\n\nvar Completer = function (_EventEmitter) {\n  _inherits(Completer, _EventEmitter);\n\n  function Completer() {\n    _classCallCheck(this, Completer);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Completer).call(this));\n\n    _this.strategies = [];\n\n    (0, _lodash2.default)(_this, CALLBACK_METHODS);\n    return _this;\n  }\n\n  /**\n   * @returns {this}\n   */\n\n\n  _createClass(Completer, [{\n    key: 'finalize',\n    value: function finalize() {\n      this.strategies.forEach(function (strategy) {\n        return strategy.finalize();\n      });\n      return this;\n    }\n\n    /**\n     * Register a strategy to the completer.\n     *\n     * @public\n     * @param {Strategy} strategy\n     * @returns {this}\n     */\n\n  }, {\n    key: 'registerStrategy',\n    value: function registerStrategy(strategy) {\n      this.strategies.push(strategy);\n      return this;\n    }\n\n    /**\n     * @public\n     * @param {string} text - Head to input cursor.\n     * @fires Completer#hit\n     */\n\n  }, {\n    key: 'run',\n    value: function run(text) {\n      var query = this.extractQuery(text);\n      if (query) {\n        query.execute(this.handleQueryResult);\n      } else {\n        this.handleQueryResult([]);\n      }\n    }\n\n    /**\n     * Find a query, which matches to the given text.\n     *\n     * @private\n     * @param {string} text - Head to input cursor.\n     * @returns {?Query}\n     */\n\n  }, {\n    key: 'extractQuery',\n    value: function extractQuery(text) {\n      for (var i = 0; i < this.strategies.length; i++) {\n        var query = this.strategies[i].buildQuery(text);\n        if (query) {\n          return query;\n        }\n      }\n      return null;\n    }\n\n    /**\n     * Callbacked by Query#execute.\n     *\n     * @private\n     * @param {SearchResult[]} searchResults\n     */\n\n  }, {\n    key: 'handleQueryResult',\n    value: function handleQueryResult(searchResults) {\n      /**\n       * @event Completer#hit\n       * @type {object}\n       * @prop {SearchResult[]} searchResults\n       */\n      this.emit('hit', { searchResults: searchResults });\n    }\n  }]);\n\n  return Completer;\n}(_events.EventEmitter);\n\nexports.default = Completer;\n},{\"events\":12,\"lodash.bindall\":19}],2:[function(require,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _dropdown_item = require('./dropdown_item');\n\nvar _dropdown_item2 = _interopRequireDefault(_dropdown_item);\n\nvar _utils = require('./utils');\n\nvar _lodash = require('lodash.assignin');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _lodash3 = require('lodash.uniqueid');\n\nvar _lodash4 = _interopRequireDefault(_lodash3);\n\nvar _lodash5 = require('lodash.isfunction');\n\nvar _lodash6 = _interopRequireDefault(_lodash5);\n\nvar _events = require('events');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar DEFAULT_CLASS_NAME = 'dropdown-menu textcomplete-dropdown';\n\n/**\n * @typedef {Object} Dropdown~Offset\n * @prop {number} [top]\n * @prop {number} [left]\n * @prop {number} [right]\n */\n\n/**\n * @typedef {Object} Dropdown~Options\n * @prop {boolean} [rotate]\n * @prop {function|string} [footer]\n * @prop {function|string} [header]\n * @prop {number} [maxCount]\n * @prop {object} [style]\n * @prop {string} [className]\n */\n\n/**\n * @event Dropdown#render\n * @type {CustomEvent}\n * @prop {function} preventDefault\n */\n\n/**\n * @event Dropdown#rendered\n * @type {CustomEvent}\n */\n\n/**\n * @event Dropdown#select\n * @type {CustomEvent}\n * @prop {function} preventDefault\n * @prop {object} detail\n * @prop {SearchResult} detail.searchResult\n */\n\n/**\n * @event Dropdown#selected\n * @type {CustomEvent}\n * @prop {object} detail\n * @prop {SearchResult} detail.searchResult\n */\n\n/**\n * @event Dropdown#show\n * @type {CustomEvent}\n * @prop {function} preventDefault\n */\n\n/**\n * @event Dropdown#shown\n * @type {CustomEvent}\n */\n\n/**\n * @event Dropdown#hide\n * @type {CustomEvent}\n * @prop {function} preventDefault\n */\n\n/**\n * @event Dropdown#hidden\n * @type {CustomEvent}\n */\n\n/**\n * Encapsulate a dropdown view.\n *\n * @prop {boolean} shown - Whether the #el is shown or not.\n * @prop {DropdownItem[]} items - The array of rendered dropdown items.\n * @extends EventEmitter\n */\n\nvar Dropdown = function (_EventEmitter) {\n  _inherits(Dropdown, _EventEmitter);\n\n  _createClass(Dropdown, null, [{\n    key: 'createElement',\n\n    /**\n     * @returns {HTMLUListElement}\n     */\n    value: function createElement() {\n      var el = document.createElement('ul');\n      el.id = (0, _lodash4.default)('textcomplete-dropdown-');\n      (0, _lodash2.default)(el.style, {\n        display: 'none',\n        position: 'absolute',\n        zIndex: 10000\n      });\n      document.body.appendChild(el);\n      return el;\n    }\n\n    /**\n     * @param {string} [className=DEFAULT_CLASS_NAME] - The class attribute of the el.\n     * @param {function|string} [footer]\n     * @param {function|string} [header]\n     * @param {number} [maxCount=10]\n     * @param {object} [style] - The style of the el.\n     * @param {boolean} [rotate=true]\n     */\n\n  }]);\n\n  function Dropdown(_ref) {\n    var _ref$className = _ref.className;\n    var className = _ref$className === undefined ? DEFAULT_CLASS_NAME : _ref$className;\n    var footer = _ref.footer;\n    var header = _ref.header;\n    var _ref$maxCount = _ref.maxCount;\n    var maxCount = _ref$maxCount === undefined ? 10 : _ref$maxCount;\n    var style = _ref.style;\n    var _ref$rotate = _ref.rotate;\n    var rotate = _ref$rotate === undefined ? true : _ref$rotate;\n\n    _classCallCheck(this, Dropdown);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Dropdown).call(this));\n\n    _this.shown = false;\n    _this.items = [];\n    _this.footer = footer;\n    _this.header = header;\n    _this.maxCount = maxCount;\n    _this.el.className = className;\n    _this.rotate = rotate;\n    if (style) {\n      (0, _lodash2.default)(_this.el.style, style);\n    }\n    return _this;\n  }\n\n  /**\n   * @returns {this}\n   */\n\n\n  _createClass(Dropdown, [{\n    key: 'finalize',\n    value: function finalize() {\n      this.el.parentNode.removeChild(this.el);\n      this.clear()._el = null;\n      return this;\n    }\n\n    /**\n     * @returns {HTMLUListElement} the dropdown element.\n     */\n\n  }, {\n    key: 'render',\n\n\n    /**\n     * Render the given data as dropdown items.\n     *\n     * @param {SearchResult[]} searchResults\n     * @param {Dropdown~Offset} cursorOffset\n     * @returns {this}\n     * @fires Dropdown#render\n     * @fires Dropdown#rendered\n     */\n    value: function render(searchResults, cursorOffset) {\n      var _this2 = this;\n\n      var renderEvent = (0, _utils.createCustomEvent)('render', { cancelable: true });\n      this.emit('render', renderEvent);\n      if (renderEvent.defaultPrevented) {\n        return this;\n      }\n      var rawResults = [],\n          dropdownItems = [];\n      searchResults.forEach(function (searchResult) {\n        rawResults.push(searchResult.data);\n        if (dropdownItems.length < _this2.maxCount) {\n          dropdownItems.push(new _dropdown_item2.default(searchResult));\n        }\n      });\n      this.clear().setStrategyId(searchResults[0]).renderEdge(rawResults, 'header').append(dropdownItems).renderEdge(rawResults, 'footer').setOffset(cursorOffset).show();\n      this.emit('rendered', (0, _utils.createCustomEvent)('rendered'));\n      return this;\n    }\n\n    /**\n     * Hide the dropdown then sweep out items.\n     *\n     * @returns {this}\n     */\n\n  }, {\n    key: 'deactivate',\n    value: function deactivate() {\n      return this.hide().clear();\n    }\n\n    /**\n     * @param {DropdownItem} dropdownItem\n     * @returns {this}\n     * @fires Dropdown#select\n     */\n\n  }, {\n    key: 'select',\n    value: function select(dropdownItem) {\n      var detail = { searchResult: dropdownItem.searchResult };\n      var selectEvent = (0, _utils.createCustomEvent)('select', { cancelable: true, detail: detail });\n      this.emit('select', selectEvent);\n      if (selectEvent.defaultPrevented) {\n        return this;\n      }\n      this.deactivate();\n      this.emit('selected', (0, _utils.createCustomEvent)('selected', { detail: detail }));\n      return this;\n    }\n\n    /**\n     * @param {Editor#move} e\n     * @returns {this}\n     */\n\n  }, {\n    key: 'up',\n    value: function up(e) {\n      return this.shown ? this.moveActiveItem('prev', e) : this;\n    }\n\n    /**\n     * @param {Editor#move} e\n     * @returns {this}\n     */\n\n  }, {\n    key: 'down',\n    value: function down(e) {\n      return this.shown ? this.moveActiveItem('next', e) : this;\n    }\n\n    /**\n     * Retrieve the active item.\n     *\n     * @returns {DropdownItem|undefined}\n     */\n\n  }, {\n    key: 'getActiveItem',\n    value: function getActiveItem() {\n      return this.items.find(function (item) {\n        return item.active;\n      });\n    }\n\n    /**\n     * Add items to dropdown.\n     *\n     * @private\n     * @param {DropdownItem[]} items\n     * @returns {this};\n     */\n\n  }, {\n    key: 'append',\n    value: function append(items) {\n      var _this3 = this;\n\n      var fragment = document.createDocumentFragment();\n      items.forEach(function (item) {\n        _this3.items.push(item);\n        item.appended(_this3);\n        fragment.appendChild(item.el);\n      });\n      this.el.appendChild(fragment);\n      return this;\n    }\n\n    /**\n     * @private\n     * @param {Dropdown~Offset} cursorOffset\n     * @returns {this}\n     */\n\n  }, {\n    key: 'setOffset',\n    value: function setOffset(cursorOffset) {\n      var _this4 = this;\n\n      ['top', 'right', 'bottom', 'left'].forEach(function (name) {\n        if (cursorOffset.hasOwnProperty(name)) {\n          _this4.el.style[name] = cursorOffset[name] + 'px';\n        }\n      });\n      return this;\n    }\n\n    /**\n     * Show the element.\n     *\n     * @private\n     * @returns {this}\n     * @fires Dropdown#show\n     * @fires Dropdown#shown\n     */\n\n  }, {\n    key: 'show',\n    value: function show() {\n      if (!this.shown) {\n        var showEvent = (0, _utils.createCustomEvent)('show', { cancelable: true });\n        this.emit('show', showEvent);\n        if (showEvent.defaultPrevented) {\n          return this;\n        }\n        this.el.style.display = 'block';\n        this.shown = true;\n        this.emit('shown', (0, _utils.createCustomEvent)('shown'));\n      }\n      return this;\n    }\n\n    /**\n     * Hide the element.\n     *\n     * @private\n     * @returns {this}\n     * @fires Dropdown#hide\n     * @fires Dropdown#hidden\n     */\n\n  }, {\n    key: 'hide',\n    value: function hide() {\n      if (this.shown) {\n        var hideEvent = (0, _utils.createCustomEvent)('hide', { cancelable: true });\n        this.emit('hide', hideEvent);\n        if (hideEvent.defaultPrevented) {\n          return this;\n        }\n        this.el.style.display = 'none';\n        this.shown = false;\n        this.emit('hidden', (0, _utils.createCustomEvent)('hidden'));\n      }\n      return this;\n    }\n\n    /**\n     * Clear search results.\n     *\n     * @private\n     * @returns {this}\n     */\n\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.el.innerHTML = '';\n      this.items.forEach(function (item) {\n        return item.finalize();\n      });\n      this.items = [];\n      return this;\n    }\n\n    /**\n     * @private\n     * @param {string} name - \"next\" or \"prev\".\n     * @param {Editor#move} e\n     * @returns {this}\n     */\n\n  }, {\n    key: 'moveActiveItem',\n    value: function moveActiveItem(name, e) {\n      var activeItem = this.getActiveItem();\n      var nextActiveItem = undefined;\n      if (activeItem) {\n        nextActiveItem = activeItem[name];\n      } else {\n        nextActiveItem = name === 'next' ? this.items[0] : this.items[this.items.length - 1];\n      }\n      if (nextActiveItem) {\n        nextActiveItem.activate();\n        e.preventDefault();\n      }\n      return this;\n    }\n\n    /**\n     * @private\n     * @param {?SearchResult} searchResult\n     * @returns {this}\n     */\n\n  }, {\n    key: 'setStrategyId',\n    value: function setStrategyId(searchResult) {\n      var strategyId = searchResult && searchResult.strategy.props.id;\n      if (strategyId) {\n        this.el.setAttribute('data-strategy', strategyId);\n      } else {\n        this.el.removeAttribute('data-strategy');\n      }\n      return this;\n    }\n\n    /**\n     * @private\n     * @param {object[]} rawResults - What callbacked by search function.\n     * @param {string} type - 'header' or 'footer'.\n     * @returns {this}\n     */\n\n  }, {\n    key: 'renderEdge',\n    value: function renderEdge(rawResults, type) {\n      var source = this[type];\n      if (source) {\n        var content = (0, _lodash6.default)(source) ? source(rawResults) : source;\n        var fragment = (0, _utils.createFragment)('<li class=\"textcomplete-' + type + '\">' + content + '</li>');\n        this.el.appendChild(fragment);\n      }\n      return this;\n    }\n  }, {\n    key: 'el',\n    get: function get() {\n      this._el || (this._el = Dropdown.createElement());\n      return this._el;\n    }\n  }]);\n\n  return Dropdown;\n}(_events.EventEmitter);\n\nexports.default = Dropdown;\n},{\"./dropdown_item\":3,\"./utils\":11,\"events\":12,\"lodash.assignin\":15,\"lodash.isfunction\":24,\"lodash.uniqueid\":26}],3:[function(require,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CLASS_NAME = undefined;\n\nvar _lodash = require('lodash.uniqueid');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _lodash3 = require('lodash.bindall');\n\nvar _lodash4 = _interopRequireDefault(_lodash3);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar CLASS_NAME = exports.CLASS_NAME = 'textcomplete-item';\nvar ACTIVE_CLASS_NAME = CLASS_NAME + ' active';\nvar CALLBACK_METHODS = ['onClick', 'onMouseover'];\n\n/**\n * Encapsulate an item of dropdown.\n */\n\nvar DropdownItem = function () {\n  /**\n   * @param {SearchResult} searchResult\n   */\n\n  function DropdownItem(searchResult) {\n    _classCallCheck(this, DropdownItem);\n\n    this.searchResult = searchResult;\n    this.id = (0, _lodash2.default)('dropdown-item-');\n    this.active = false;\n\n    (0, _lodash4.default)(this, CALLBACK_METHODS);\n  }\n\n  /**\n   * @public\n   * @returns {HTMLLIElement}\n   */\n\n\n  _createClass(DropdownItem, [{\n    key: 'finalize',\n\n\n    /**\n     * Try to free resources and perform other cleanup operations.\n     *\n     * @public\n     */\n    value: function finalize() {\n      this.el.removeEventListener('mousedown', this.onClick, false);\n      this.el.removeEventListener('mouseover', this.onMouseover, false);\n      this.el.removeEventListener('touchstart', this.onClick, false);\n      // This element has already been removed by `Dropdown#clear`.\n      this._el = null;\n    }\n\n    /**\n     * Callbacked when it is appended to a dropdown.\n     *\n     * @public\n     * @param {Dropdown} dropdown\n     * @see Dropdown#append\n     */\n\n  }, {\n    key: 'appended',\n    value: function appended(dropdown) {\n      this.dropdown = dropdown;\n      this.siblings = dropdown.items;\n      this.index = this.siblings.length - 1;\n    }\n\n    /**\n     * Deactivate active item then activate itself.\n     *\n     * @public\n     * @returns {this}\n     */\n\n  }, {\n    key: 'activate',\n    value: function activate() {\n      if (!this.active) {\n        var activeItem = this.dropdown.getActiveItem();\n        if (activeItem) {\n          activeItem.deactivate();\n        }\n        this.active = true;\n        this.el.className = ACTIVE_CLASS_NAME;\n      }\n      return this;\n    }\n\n    /**\n     * Get the next sibling.\n     *\n     * @public\n     * @returns {?DropdownItem}\n     */\n\n  }, {\n    key: 'deactivate',\n\n\n    /**\n     * @private\n     * @returns {this}\n     */\n    value: function deactivate() {\n      if (this.active) {\n        this.active = false;\n        this.el.className = CLASS_NAME;\n      }\n      return this;\n    }\n\n    /**\n     * @private\n     * @param {MouseEvent} e\n     */\n\n  }, {\n    key: 'onClick',\n    value: function onClick(e) {\n      e.preventDefault(); // Prevent blur event\n      this.dropdown.select(this);\n    }\n\n    /**\n     * @private\n     * @param {MouseEvent} _e\n     */\n\n  }, {\n    key: 'onMouseover',\n    value: function onMouseover(_e) {\n      this.activate();\n    }\n  }, {\n    key: 'el',\n    get: function get() {\n      if (!this._el) {\n        var li = document.createElement('li');\n        li.id = this.id;\n        li.className = this.active ? ACTIVE_CLASS_NAME : CLASS_NAME;\n        var a = document.createElement('a');\n        a.innerHTML = this.searchResult.render();\n        li.appendChild(a);\n        this._el = li;\n        li.addEventListener('mousedown', this.onClick);\n        li.addEventListener('mouseover', this.onMouseover);\n        li.addEventListener('touchstart', this.onClick);\n      }\n      return this._el;\n    }\n  }, {\n    key: 'next',\n    get: function get() {\n      var nextIndex = undefined;\n      if (this.index === this.siblings.length - 1) {\n        if (!this.dropdown.rotate) {\n          return null;\n        }\n        nextIndex = 0;\n      } else {\n        nextIndex = this.index + 1;\n      }\n      return this.siblings[nextIndex];\n    }\n\n    /**\n     * Get the previous sibling.\n     *\n     * @public\n     * @returns {DropdownItem}\n     */\n\n  }, {\n    key: 'prev',\n    get: function get() {\n      var nextIndex = undefined;\n      if (this.index === 0) {\n        if (!this.dropdown.rotate) {\n          return null;\n        }\n        nextIndex = this.siblings.length - 1;\n      } else {\n        nextIndex = this.index - 1;\n      }\n      return this.siblings[nextIndex];\n    }\n  }]);\n\n  return DropdownItem;\n}();\n\nexports.default = DropdownItem;\n},{\"lodash.bindall\":19,\"lodash.uniqueid\":26}],4:[function(require,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ESC = exports.BS = exports.OTHER = exports.DOWN = exports.UP = exports.ENTER = undefined;\n\nvar _utils = require('./utils');\n\nvar _events = require('events');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ENTER = exports.ENTER = 0;\nvar UP = exports.UP = 1;\nvar DOWN = exports.DOWN = 2;\nvar OTHER = exports.OTHER = 3;\nvar BS = exports.BS = 4;\nvar ESC = exports.ESC = 5;\n\n/**\n * @event Editor#move\n * @type {CustomEvent}\n * @prop {function} preventDefault\n * @prop {object} detail\n * @prop {number} detail.code\n */\n\n/**\n * @event Editor#enter\n * @type {CustomEvent}\n * @prop {function} preventDefault\n */\n\n/**\n * @event Editor#esc\n * @type {CustomEvent}\n * @prop {function} preventDefault\n */\n\n/**\n * @event Editor#change\n * @type {CustomEvent}\n * @prop {object} detail\n * @prop {string} detail.beforeCursor\n */\n\n/**\n * Abstract class representing a editor target.\n *\n * Editor classes must implement `#applySearchResult`, `#getCursorOffset`,\n * `#getBeforeCursor` and `#getAfterCursor` methods.\n *\n * @abstract\n * @extends EventEmitter\n */\n\nvar Editor = function (_EventEmitter) {\n  _inherits(Editor, _EventEmitter);\n\n  function Editor() {\n    _classCallCheck(this, Editor);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(Editor).apply(this, arguments));\n  }\n\n  _createClass(Editor, [{\n    key: 'finalize',\n\n    /**\n     * @returns {this}\n     */\n    value: function finalize() {\n      return this;\n    }\n\n    /**\n     * It is called when a search result is selected by a user.\n     *\n     * @param {SearchResult} _searchResult\n     */\n\n  }, {\n    key: 'applySearchResult',\n    value: function applySearchResult(_searchResult) {\n      throw new Error('Not implemented.');\n    }\n\n    /**\n     * The input cursor's absolute coordinates from the window's left\n     * top corner. It is intended to be overridden by sub classes.\n     *\n     * @type {Dropdown~Offset}\n     */\n\n  }, {\n    key: 'getCursorOffset',\n    value: function getCursorOffset() {\n      throw new Error('Not implemented.');\n    }\n\n    /**\n     * Editor string value from head to cursor.\n     *\n     * @private\n     */\n\n  }, {\n    key: 'getBeforeCursor',\n    value: function getBeforeCursor() {\n      throw new Error('Not implemented.');\n    }\n\n    /**\n     * Editor string value from cursor to tail.\n     *\n     * @private\n     */\n\n  }, {\n    key: 'getAfterCursor',\n    value: function getAfterCursor() {\n      throw new Error('Not implemented.');\n    }\n\n    /**\n     * @private\n     * @fires Editor#move\n     * @param {UP|DOWN} code\n     * @returns {Editor#move}\n     */\n\n  }, {\n    key: 'emitMoveEvent',\n    value: function emitMoveEvent(code) {\n      var moveEvent = (0, _utils.createCustomEvent)('move', {\n        cancelable: true,\n        detail: {\n          code: code\n        }\n      });\n      this.emit('move', moveEvent);\n      return moveEvent;\n    }\n\n    /**\n     * @private\n     * @fires Editor#enter\n     * @returns {Editor#enter}\n     */\n\n  }, {\n    key: 'emitEnterEvent',\n    value: function emitEnterEvent() {\n      var enterEvent = (0, _utils.createCustomEvent)('enter', { cancelable: true });\n      this.emit('enter', enterEvent);\n      return enterEvent;\n    }\n\n    /**\n     * @private\n     * @fires Editor#change\n     * @returns {Editor#change}\n     */\n\n  }, {\n    key: 'emitChangeEvent',\n    value: function emitChangeEvent() {\n      var changeEvent = (0, _utils.createCustomEvent)('change', {\n        detail: {\n          beforeCursor: this.getBeforeCursor()\n        }\n      });\n      this.emit('change', changeEvent);\n      return changeEvent;\n    }\n\n    /**\n     * @private\n     * @fires Editor#esc\n     * @returns {Editor#esc}\n     */\n\n  }, {\n    key: 'emitEscEvent',\n    value: function emitEscEvent() {\n      var escEvent = (0, _utils.createCustomEvent)('esc', { cancelable: true });\n      this.emit('esc', escEvent);\n      return escEvent;\n    }\n\n    /**\n     * @private\n     * @param {KeyboardEvent} e\n     * @returns {ENTER|UP|DOWN|OTHER|BS}\n     */\n\n  }, {\n    key: 'getCode',\n    value: function getCode(e) {\n      return e.keyCode === 8 ? BS // backspace\n      : e.keyCode === 9 ? ENTER // tab\n      : e.keyCode === 13 ? ENTER // enter\n      : e.keyCode === 27 ? ESC // esc\n      : e.keyCode === 38 ? UP // up\n      : e.keyCode === 40 ? DOWN // down\n      : e.keyCode === 78 && e.ctrlKey ? DOWN // ctrl-n\n      : e.keyCode === 80 && e.ctrlKey ? UP // ctrl-p\n      : OTHER;\n    }\n  }]);\n\n  return Editor;\n}(_events.EventEmitter);\n\nexports.default = Editor;\n},{\"./utils\":11,\"events\":12}],5:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar _textcomplete = require('./textcomplete');\n\nvar _textcomplete2 = _interopRequireDefault(_textcomplete);\n\nvar _textarea = require('./textarea');\n\nvar _textarea2 = _interopRequireDefault(_textarea);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar editors = undefined;\nif (global.Textcomplete && global.Textcomplete.editors) {\n  editors = global.Textcomplete.editors;\n} else {\n  editors = {};\n}\neditors.Textarea = _textarea2.default;\n\nglobal.Textcomplete = _textcomplete2.default;\nglobal.Textcomplete.editors = editors;\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{\"./textarea\":9,\"./textcomplete\":10}],6:[function(require,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _search_result = require('./search_result');\n\nvar _search_result2 = _interopRequireDefault(_search_result);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * Encapsulate matching condition between a Strategy and current editor's value.\n */\n\nvar Query = function () {\n  /**\n   * @param {Strategy} strategy\n   * @param {string} term\n   * @param {string[]} match\n   */\n\n  function Query(strategy, term, match) {\n    _classCallCheck(this, Query);\n\n    this.strategy = strategy;\n    this.term = term;\n    this.match = match;\n  }\n\n  /**\n   * Invoke search strategy and callback the given function.\n   *\n   * @public\n   * @param {function} callback\n   */\n\n\n  _createClass(Query, [{\n    key: 'execute',\n    value: function execute(callback) {\n      var _this = this;\n\n      this.strategy.search(this.term, function (results) {\n        callback(results.map(function (result) {\n          return new _search_result2.default(result, _this.term, _this.strategy);\n        }));\n      }, this.match);\n    }\n  }]);\n\n  return Query;\n}();\n\nexports.default = Query;\n},{\"./search_result\":7}],7:[function(require,module,exports){\n\"use strict\";\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar SearchResult = function () {\n  /**\n   * @param {object} data - An element of array callbacked by search function.\n   * @param {string} term\n   * @param {Strategy} strategy\n   */\n\n  function SearchResult(data, term, strategy) {\n    _classCallCheck(this, SearchResult);\n\n    this.data = data;\n    this.term = term;\n    this.strategy = strategy;\n  }\n\n  /**\n   * @param {string} beforeCursor\n   * @param {string} afterCursor\n   * @returns {string[]|undefined}\n   */\n\n\n  _createClass(SearchResult, [{\n    key: \"replace\",\n    value: function replace(beforeCursor, afterCursor) {\n      var replacement = this.strategy.replace(this.data);\n      if (replacement != null) {\n        if (Array.isArray(replacement)) {\n          afterCursor = replacement[1] + afterCursor;\n          replacement = replacement[0];\n        }\n        return [beforeCursor.replace(this.strategy.match, replacement), afterCursor];\n      }\n    }\n\n    /**\n     * @returns {string}\n     */\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      return this.strategy.template(this.data, this.term);\n    }\n  }]);\n\n  return SearchResult;\n}();\n\nexports.default = SearchResult;\n},{}],8:[function(require,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _query = require('./query');\n\nvar _query2 = _interopRequireDefault(_query);\n\nvar _lodash = require('lodash.isfunction');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _lodash3 = require('lodash.isstring');\n\nvar _lodash4 = _interopRequireDefault(_lodash3);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DEFAULT_INDEX = 2;\n\nfunction DEFAULT_TEMPLATE(value) {\n  return value;\n}\n\n/**\n * Properties for a strategy.\n *\n * @typedef {Object} Strategy~Properties\n * @prop {regexp|function} match - If it is a function, it must return a RegExp.\n * @prop {function} search\n * @prop {function} replace\n * @prop {boolean} [cache]\n * @prop {function} [context]\n * @prop {function} [template]\n * @prop {number} [index=2]\n * @prop {string} [id]\n */\n\n/**\n * Encapsulate a single strategy.\n *\n * @prop {Strategy~Properties} props - Its properties.\n */\n\nvar Strategy = function () {\n  /**\n   * @param {Strategy~Properties} props\n   */\n\n  function Strategy(props) {\n    _classCallCheck(this, Strategy);\n\n    this.props = props;\n    this.cache = props.cache ? {} : null;\n  }\n\n  /**\n   * @returns {this}\n   */\n\n\n  _createClass(Strategy, [{\n    key: 'finalize',\n    value: function finalize() {\n      this.cache = null;\n      return this;\n    }\n\n    /**\n     * Build a Query object by the given string if this matches to the string.\n     *\n     * @param {string} text - Head to input cursor.\n     * @returns {?Query}\n     */\n\n  }, {\n    key: 'buildQuery',\n    value: function buildQuery(text) {\n      if ((0, _lodash2.default)(this.props.context)) {\n        var context = this.props.context(text);\n        if ((0, _lodash4.default)(context)) {\n          text = context;\n        } else if (!context) {\n          return null;\n        }\n      }\n      var match = text.match(this.getMatchRegexp(text));\n      return match ? new _query2.default(this, match[this.index], match) : null;\n    }\n\n    /**\n     * @param {string} term\n     * @param {function} callback\n     * @param {string[]} match\n     */\n\n  }, {\n    key: 'search',\n    value: function search(term, callback, match) {\n      if (this.cache) {\n        this.searchWithCache(term, callback, match);\n      } else {\n        this.props.search(term, callback, match);\n      }\n    }\n\n    /**\n     * @param {object} data - An element of array callbacked by search function.\n     * @returns {string[]|string|null}\n     */\n\n  }, {\n    key: 'replace',\n    value: function replace(data) {\n      return this.props.replace(data);\n    }\n\n    /**\n     * @private\n     * @param {string} term\n     * @param {function} callback\n     * @param {string[]} match\n     */\n\n  }, {\n    key: 'searchWithCache',\n    value: function searchWithCache(term, callback, match) {\n      var _this = this;\n\n      var cache = this.cache[term];\n      if (cache) {\n        callback(cache);\n      } else {\n        this.props.search(term, function (results) {\n          _this.cache[term] = results;\n          callback(results);\n        }, match);\n      }\n    }\n\n    /**\n     * @private\n     * @param {string} text\n     * @returns {RegExp}\n     */\n\n  }, {\n    key: 'getMatchRegexp',\n    value: function getMatchRegexp(text) {\n      return (0, _lodash2.default)(this.match) ? this.match(text) : this.match;\n    }\n\n    /**\n     * @private\n     * @returns {RegExp|Function}\n     */\n\n  }, {\n    key: 'match',\n    get: function get() {\n      return this.props.match;\n    }\n\n    /**\n     * @private\n     * @returns {Number}\n     */\n\n  }, {\n    key: 'index',\n    get: function get() {\n      return this.props.index || DEFAULT_INDEX;\n    }\n\n    /**\n     * @returns {function}\n     */\n\n  }, {\n    key: 'template',\n    get: function get() {\n      return this.props.template || DEFAULT_TEMPLATE;\n    }\n  }]);\n\n  return Strategy;\n}();\n\nexports.default = Strategy;\n},{\"./query\":6,\"lodash.isfunction\":24,\"lodash.isstring\":25}],9:[function(require,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _editor = require('./editor');\n\nvar _editor2 = _interopRequireDefault(_editor);\n\nvar _utils = require('./utils');\n\nvar _lodash = require('lodash.bindall');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _lineHeight = require('line-height');\n\nvar _lineHeight2 = _interopRequireDefault(_lineHeight);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar getCaretCoordinates = require('textarea-caret');\n\nvar CALLBACK_METHODS = ['onInput', 'onKeydown', 'onKeyup'];\n\n/**\n * Encapsulate the target textarea element.\n *\n * @extends Editor\n * @prop {HTMLTextAreaElement} el - Where the textcomplete works on.\n */\n\nvar Textarea = function (_Editor) {\n  _inherits(Textarea, _Editor);\n\n  /**\n   * @param {HTMLTextAreaElement} el\n   */\n\n  function Textarea(el) {\n    _classCallCheck(this, Textarea);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Textarea).call(this));\n\n    _this.el = el;\n    _this.isIE9 = (0, _utils.getIEVersion)() === 9;\n\n    (0, _lodash2.default)(_this, CALLBACK_METHODS);\n\n    _this.startListening();\n    return _this;\n  }\n\n  /** @override */\n\n\n  _createClass(Textarea, [{\n    key: 'finalize',\n    value: function finalize() {\n      _get(Object.getPrototypeOf(Textarea.prototype), 'finalize', this).call(this);\n      this.stopListening();\n      this.el = null;\n      return this;\n    }\n\n    /**\n     * @override\n     * @param {SearchResult} searchResult\n     */\n\n  }, {\n    key: 'applySearchResult',\n    value: function applySearchResult(searchResult) {\n      var replace = searchResult.replace(this.getBeforeCursor(), this.getAfterCursor());\n      if (Array.isArray(replace)) {\n        this.el.value = replace[0] + replace[1];\n        this.el.selectionStart = this.el.selectionEnd = replace[0].length;\n      }\n      this.el.focus(); // Clicking a dropdown item removes focus from the element.\n    }\n  }, {\n    key: 'getCursorOffset',\n    value: function getCursorOffset() {\n      var elOffset = (0, _utils.calculateElementOffset)(this.el);\n      var elScroll = this.getElScroll();\n      var cursorPosition = this.getCursorPosition();\n      var top = elOffset.top - elScroll.top + cursorPosition.top + (0, _lineHeight2.default)(this.el);\n      var left = elOffset.left - elScroll.left + cursorPosition.left;\n      if (this.el.dir !== 'rtl') {\n        return { top: top, left: left };\n      } else {\n        return { top: top, right: document.documentElement.clientWidth - left };\n      }\n    }\n\n    /** @override */\n\n  }, {\n    key: 'getBeforeCursor',\n    value: function getBeforeCursor() {\n      return this.el.value.substring(0, this.el.selectionEnd);\n    }\n\n    /** @override */\n\n  }, {\n    key: 'getAfterCursor',\n    value: function getAfterCursor() {\n      return this.el.value.substring(this.el.selectionEnd);\n    }\n\n    /**\n     * @private\n     * @returns {{top: number, left: number}}\n     */\n\n  }, {\n    key: 'getElScroll',\n    value: function getElScroll() {\n      return { top: this.el.scrollTop, left: this.el.scrollLeft };\n    }\n\n    /**\n     * The input cursor's relative coordinates from the textarea's left\n     * top corner.\n     *\n     * @private\n     * @returns {{top: number, left: number}}\n     */\n\n  }, {\n    key: 'getCursorPosition',\n    value: function getCursorPosition() {\n      return getCaretCoordinates(this.el, this.el.selectionEnd);\n    }\n\n    /**\n     * @private\n     * @fires Editor#change\n     * @param {InputEvent} _e\n     */\n\n  }, {\n    key: 'onInput',\n    value: function onInput(_e) {\n      this.emitChangeEvent();\n    }\n\n    /**\n     * @private\n     * @fires Editor#move\n     * @param {KeyboardEvent} e\n     */\n\n  }, {\n    key: 'onKeydown',\n    value: function onKeydown(e) {\n      var code = this.getCode(e);\n      var event = undefined;\n      switch (code) {\n        case _editor.UP:\n        case _editor.DOWN:\n          event = this.emitMoveEvent(code);\n          break;\n        case _editor.ENTER:\n          {\n            event = this.emitEnterEvent();\n            break;\n          }\n        case _editor.ESC:\n          {\n            event = this.emitEscEvent();\n            break;\n          }\n      }\n      if (event && event.defaultPrevented) {\n        e.preventDefault();\n      }\n    }\n\n    /**\n     * @private\n     * @fires Editor#change\n     * @param {KeyboardEvent} e\n     */\n\n  }, {\n    key: 'onKeyup',\n    value: function onKeyup(e) {\n      var code = this.getCode(e);\n      // IE 9 does not fire an input event when the user deletes characters from an input.\n      // https://developer.mozilla.org/en-US/docs/Web/Events/input#Browser_compatibility\n      if (code === _editor.BS && this.isIE9) {\n        this.emitChangeEvent();\n      }\n    }\n\n    /**\n     * @private\n     */\n\n  }, {\n    key: 'startListening',\n    value: function startListening() {\n      this.el.addEventListener('input', this.onInput);\n      this.el.addEventListener('keydown', this.onKeydown);\n      this.el.addEventListener('keyup', this.onKeyup);\n    }\n\n    /**\n     * @private\n     */\n\n  }, {\n    key: 'stopListening',\n    value: function stopListening() {\n      this.el.removeEventListener('input', this.onInput);\n      this.el.removeEventListener('keydown', this.onKeydown);\n      this.el.removeEventListener('keyup', this.onKeyup);\n    }\n  }]);\n\n  return Textarea;\n}(_editor2.default);\n\nexports.default = Textarea;\n},{\"./editor\":4,\"./utils\":11,\"line-height\":13,\"lodash.bindall\":19,\"textarea-caret\":28}],10:[function(require,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _completer = require('./completer');\n\nvar _completer2 = _interopRequireDefault(_completer);\n\nvar _dropdown = require('./dropdown');\n\nvar _dropdown2 = _interopRequireDefault(_dropdown);\n\nvar _strategy = require('./strategy');\n\nvar _strategy2 = _interopRequireDefault(_strategy);\n\nvar _editor = require('./editor');\n\nvar _utils = require('./utils');\n\nvar _lodash = require('lodash.bindall');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _lodash3 = require('lodash.isfunction');\n\nvar _lodash4 = _interopRequireDefault(_lodash3);\n\nvar _events = require('events');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar CALLBACK_METHODS = ['handleChange', 'handleEnter', 'handleEsc', 'handleHit', 'handleMove', 'handleSelect'];\n\n/**\n * Options for a textcomplete.\n *\n * @typedef {Object} Textcomplete~Options\n * @prop {Dropdown~Options} dropdown\n */\n\n/**\n * The core of textcomplete. It acts as a mediator.\n *\n * @prop {Completer} completer\n * @prop {Dropdown} dropdown\n * @prop {Editor} editor\n * @extends EventEmitter\n * @tutorial getting-started\n */\n\nvar Textcomplete = function (_EventEmitter) {\n  _inherits(Textcomplete, _EventEmitter);\n\n  /**\n   * @param {Editor} editor - Where the textcomplete works on.\n   * @param {Textcomplete~Options} options\n   */\n\n  function Textcomplete(editor) {\n    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n    _classCallCheck(this, Textcomplete);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Textcomplete).call(this));\n\n    _this.completer = new _completer2.default();\n    _this.dropdown = new _dropdown2.default(options.dropdown || {});\n    _this.editor = editor;\n    _this.options = options;\n\n    (0, _lodash2.default)(_this, CALLBACK_METHODS);\n\n    _this.lockableTrigger = (0, _utils.lock)(function (free, text) {\n      this.free = free;\n      this.completer.run(text);\n    });\n\n    _this.startListening();\n    return _this;\n  }\n\n  /**\n   * @public\n   * @param {boolean} [finalizeEditor=true]\n   * @returns {this}\n   */\n\n\n  _createClass(Textcomplete, [{\n    key: 'finalize',\n    value: function finalize() {\n      var finalizeEditor = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];\n\n      this.completer.finalize();\n      this.dropdown.finalize();\n      if (finalizeEditor) {\n        this.editor.finalize();\n      }\n      this.stopListening();\n      return this;\n    }\n\n    /**\n     * @public\n     * @param {Strategy~Properties[]} strategyPropsArray\n     * @returns {this}\n     * @example\n     * textcomplete.register([{\n     *   match: /(^|\\s)(\\w+)$/,\n     *   search: function (term, callback) {\n     *     $.ajax({ ... })\n     *       .done(callback)\n     *       .fail([]);\n     *   },\n     *   replace: function (value) {\n     *     return '$1' + value + ' ';\n     *   }\n     * }]);\n     */\n\n  }, {\n    key: 'register',\n    value: function register(strategyPropsArray) {\n      var _this2 = this;\n\n      strategyPropsArray.forEach(function (props) {\n        _this2.completer.registerStrategy(new _strategy2.default(props));\n      });\n      return this;\n    }\n\n    /**\n     * Start autocompleting.\n     *\n     * @public\n     * @param {string} text - Head to input cursor.\n     * @returns {this}\n     * @listens Editor#change\n     */\n\n  }, {\n    key: 'trigger',\n    value: function trigger(text) {\n      this.lockableTrigger(text);\n      return this;\n    }\n\n    /**\n     * Unlock trigger method.\n     *\n     * @private\n     * @returns {this}\n     */\n\n  }, {\n    key: 'unlock',\n    value: function unlock() {\n      // Calling free function may assign a new function to `this.free`.\n      // It depends on whether extra function call was made or not.\n      var free = this.free;\n      this.free = null;\n      if ((0, _lodash4.default)(free)) {\n        free();\n      }\n      return this;\n    }\n\n    /**\n     * @private\n     * @param {SearchResult[]} searchResults\n     * @listens Completer#hit\n     */\n\n  }, {\n    key: 'handleHit',\n    value: function handleHit(_ref) {\n      var searchResults = _ref.searchResults;\n\n      if (searchResults.length) {\n        this.dropdown.render(searchResults, this.editor.getCursorOffset());\n      } else {\n        this.dropdown.deactivate();\n      }\n      this.unlock();\n    }\n\n    /**\n     * @private\n     * @param {Editor#move} e\n     * @listens Editor#move\n     */\n\n  }, {\n    key: 'handleMove',\n    value: function handleMove(e) {\n      var action = e.detail.code === _editor.UP ? 'up' : 'down';\n      this.dropdown[action](e);\n    }\n\n    /**\n     * @private\n     * @param {Editor#enter} e\n     * @listens Editor#enter\n     */\n\n  }, {\n    key: 'handleEnter',\n    value: function handleEnter(e) {\n      var activeItem = this.dropdown.getActiveItem();\n      if (activeItem) {\n        this.dropdown.select(activeItem);\n        e.preventDefault();\n      }\n    }\n\n    /**\n     * @private\n     * @param {Editor#esc} e\n     * @listens Editor#esc\n     */\n\n  }, {\n    key: 'handleEsc',\n    value: function handleEsc(e) {\n      if (this.dropdown.shown) {\n        this.dropdown.deactivate();\n        e.preventDefault();\n      }\n    }\n\n    /**\n     * @private\n     * @param {Editor#change} e\n     * @listens Editor#change\n     */\n\n  }, {\n    key: 'handleChange',\n    value: function handleChange(e) {\n      this.trigger(e.detail.beforeCursor);\n    }\n\n    /**\n     * @private\n     * @param {Dropdown#select} selectEvent\n     * @listens Dropdown#select\n     */\n\n  }, {\n    key: 'handleSelect',\n    value: function handleSelect(selectEvent) {\n      this.emit('select', selectEvent);\n      if (!selectEvent.defaultPrevented) {\n        this.editor.applySearchResult(selectEvent.detail.searchResult);\n      }\n    }\n\n    /**\n     * @private\n     * @param {string} eventName\n     * @returns {function}\n     */\n\n  }, {\n    key: 'buildHandler',\n    value: function buildHandler(eventName) {\n      var _this3 = this;\n\n      return function () {\n        return _this3.emit(eventName);\n      };\n    }\n\n    /**\n     * @private\n     */\n\n  }, {\n    key: 'startListening',\n    value: function startListening() {\n      var _this4 = this;\n\n      this.editor.on('move', this.handleMove).on('enter', this.handleEnter).on('esc', this.handleEsc).on('change', this.handleChange);\n      this.dropdown.on('select', this.handleSelect);\n      ['show', 'shown', 'render', 'rendered', 'selected', 'hidden', 'hide'].forEach(function (eventName) {\n        _this4.dropdown.on(eventName, _this4.buildHandler(eventName));\n      });\n      this.completer.on('hit', this.handleHit);\n    }\n\n    /**\n     * @private\n     */\n\n  }, {\n    key: 'stopListening',\n    value: function stopListening() {\n      this.completer.removeAllListeners();\n      this.dropdown.removeAllListeners();\n      this.editor.removeListener('move', this.handleMove).removeListener('enter', this.handleEnter).removeListener('esc', this.handleEsc).removeListener('change', this.handleChange);\n    }\n  }]);\n\n  return Textcomplete;\n}(_events.EventEmitter);\n\nexports.default = Textcomplete;\n},{\"./completer\":1,\"./dropdown\":2,\"./editor\":4,\"./strategy\":8,\"./utils\":11,\"events\":12,\"lodash.bindall\":19,\"lodash.isfunction\":24}],11:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.lock = lock;\nexports.createFragment = createFragment;\nexports.createCustomEvent = createCustomEvent;\nexports.calculateElementOffset = calculateElementOffset;\nexports.getIEVersion = getIEVersion;\n\nvar _lodash = require('lodash.assignin');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Exclusive execution control utility.\n *\n * @param {function} func - The function to be locked. It is executed with a\n *                          function named `free` as the first argument. Once\n *                          it is called, additional execution are ignored\n *                          until the free is invoked. Then the last ignored\n *                          execution will be replayed immediately.\n * @example\n * var lockedFunc = lock(function (free) {\n *   setTimeout(function { free(); }, 1000); // It will be free in 1 sec.\n *   console.log('Hello, world');\n * });\n * lockedFunc();  // => 'Hello, world'\n * lockedFunc();  // none\n * lockedFunc();  // none\n * // 1 sec past then\n * // => 'Hello, world'\n * lockedFunc();  // => 'Hello, world'\n * lockedFunc();  // none\n * @returns {function} A wrapped function.\n */\nfunction lock(func) {\n  var locked, queuedArgsToReplay;\n\n  return function () {\n    // Convert arguments into a real array.\n    var args = Array.prototype.slice.call(arguments);\n    if (locked) {\n      // Keep a copy of this argument list to replay later.\n      // OK to overwrite a previous value because we only replay\n      // the last one.\n      queuedArgsToReplay = args;\n      return;\n    }\n    locked = true;\n    var self = this;\n    function replayOrFree() {\n      if (queuedArgsToReplay) {\n        // Other request(s) arrived while we were locked.\n        // Now that the lock is becoming available, replay\n        // the latest such request, then call back here to\n        // unlock (or replay another request that arrived\n        // while this one was in flight).\n        var replayArgs = queuedArgsToReplay;\n        queuedArgsToReplay = undefined;\n        replayArgs.unshift(replayOrFree);\n        func.apply(self, replayArgs);\n      } else {\n        locked = false;\n      }\n    }\n    args.unshift(replayOrFree);\n    func.apply(this, args);\n  };\n}\n\n/**\n * Create a document fragment by the given HTML string.\n *\n * @param {string} tagString\n * @returns {DocumentFragment}\n */\nfunction createFragment(tagString) {\n  // TODO Imprement with Range#createContextualFragment when it drops IE9 support.\n  var div = document.createElement('div');\n  div.innerHTML = tagString;\n  var childNodes = div.childNodes;\n  var fragment = document.createDocumentFragment();\n  for (var i = 0, l = childNodes.length; i < l; i++) {\n    fragment.appendChild(childNodes[i]);\n  }\n  return fragment;\n}\n\n/**\n * @param {string} type\n * @param {Object} [options]\n * @param {Object} [options.detail=undefined]\n * @param {Boolean} [options.cancelable=false]\n * @returns {CustomEvent}\n */\nfunction createCustomEvent(type, options) {\n  return new document.defaultView.CustomEvent(type, (0, _lodash2.default)({\n    cancelable: false,\n    detail: undefined\n  }, options));\n}\n\n/**\n * Get the current coordinates of the `el` relative to the document.\n *\n * @param {HTMLElement} el\n * @returns {{top: number, left: number}}\n */\nfunction calculateElementOffset(el) {\n  var rect = el.getBoundingClientRect();\n  var _el$ownerDocument = el.ownerDocument;\n  var defaultView = _el$ownerDocument.defaultView;\n  var documentElement = _el$ownerDocument.documentElement;\n\n  return {\n    top: rect.top + defaultView.pageYOffset - documentElement.clientTop,\n    left: rect.left + defaultView.pageXOffset - documentElement.clientLeft\n  };\n}\n\n/**\n * @returns {?number} Returns IE version or if not IE return null.\n */\nfunction getIEVersion() {\n  var nav = navigator.userAgent.toLowerCase();\n  return nav.indexOf('msie') !== -1 ? parseInt(nav.split('msie')[1], 10) : null;\n}\n},{\"lodash.assignin\":15}],12:[function(require,module,exports){\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n},{}],13:[function(require,module,exports){\n// Load in dependencies\nvar computedStyle = require('computed-style');\n\n/**\n * Calculate the `line-height` of a given node\n * @param {HTMLElement} node Element to calculate line height of. Must be in the DOM.\n * @returns {Number} `line-height` of the element in pixels\n */\nfunction lineHeight(node) {\n  // Grab the line-height via style\n  var lnHeightStr = computedStyle(node, 'line-height'),\n      lnHeight = parseFloat(lnHeightStr, 10);\n\n  // If the lineHeight did not contain a unit (i.e. it was numeric), convert it to ems (e.g. '2.3' === '2.3em')\n  if (lnHeightStr === lnHeight + '') {\n    // Save the old lineHeight style and update the em unit to the element\n    var _lnHeightStyle = node.style.lineHeight;\n    node.style.lineHeight = lnHeightStr + 'em';\n\n    // Calculate the em based height\n    lnHeightStr = computedStyle(node, 'line-height');\n    lnHeight = parseFloat(lnHeightStr, 10);\n\n    // Revert the lineHeight style\n    if (_lnHeightStyle) {\n      node.style.lineHeight = _lnHeightStyle;\n    } else {\n      delete node.style.lineHeight;\n    }\n  }\n\n  // If the lineHeight is in `pt`, convert it to pixels (4px for 3pt)\n  // DEV: `em` units are converted to `pt` in IE6\n  // Conversion ratio from https://developer.mozilla.org/en-US/docs/Web/CSS/length\n  if (lnHeightStr.indexOf('pt') !== -1) {\n    lnHeight *= 4;\n    lnHeight /= 3;\n  } else if (lnHeightStr.indexOf('mm') !== -1) {\n  // Otherwise, if the lineHeight is in `mm`, convert it to pixels (96px for 25.4mm)\n    lnHeight *= 96;\n    lnHeight /= 25.4;\n  } else if (lnHeightStr.indexOf('cm') !== -1) {\n  // Otherwise, if the lineHeight is in `cm`, convert it to pixels (96px for 2.54cm)\n    lnHeight *= 96;\n    lnHeight /= 2.54;\n  } else if (lnHeightStr.indexOf('in') !== -1) {\n  // Otherwise, if the lineHeight is in `in`, convert it to pixels (96px for 1in)\n    lnHeight *= 96;\n  } else if (lnHeightStr.indexOf('pc') !== -1) {\n  // Otherwise, if the lineHeight is in `pc`, convert it to pixels (12pt for 1pc)\n    lnHeight *= 16;\n  }\n\n  // Continue our computation\n  lnHeight = Math.round(lnHeight);\n\n  // If the line-height is \"normal\", calculate by font-size\n  if (lnHeightStr === 'normal') {\n    // Create a temporary node\n    var nodeName = node.nodeName,\n        _node = document.createElement(nodeName);\n    _node.innerHTML = '&nbsp;';\n\n    // Set the font-size of the element\n    var fontSizeStr = computedStyle(node, 'font-size');\n    _node.style.fontSize = fontSizeStr;\n\n    // Append it to the body\n    var body = document.body;\n    body.appendChild(_node);\n\n    // Assume the line height of the element is the height\n    var height = _node.offsetHeight;\n    lnHeight = height;\n\n    // Remove our child from the DOM\n    body.removeChild(_node);\n  }\n\n  // Return the calculated height\n  return lnHeight;\n}\n\n// Export lineHeight\nmodule.exports = lineHeight;\n},{\"computed-style\":14}],14:[function(require,module,exports){\n// This code has been refactored for 140 bytes\n// You can see the original here: https://github.com/twolfson/computedStyle/blob/04cd1da2e30fa45844f95f5cb1ac898e9b9ef050/lib/computedStyle.js\nvar computedStyle = function (el, prop, getComputedStyle) {\n  getComputedStyle = window.getComputedStyle;\n\n  // In one fell swoop\n  return (\n    // If we have getComputedStyle\n    getComputedStyle ?\n      // Query it\n      // TODO: From CSS-Query notes, we might need (node, null) for FF\n      getComputedStyle(el) :\n\n    // Otherwise, we are in IE and use currentStyle\n      el.currentStyle\n  )[\n    // Switch to camelCase for CSSOM\n    // DEV: Grabbed from jQuery\n    // https://github.com/jquery/jquery/blob/1.9-stable/src/css.js#L191-L194\n    // https://github.com/jquery/jquery/blob/1.9-stable/src/core.js#L593-L597\n    prop.replace(/-(\\w)/gi, function (word, letter) {\n      return letter.toUpperCase();\n    })\n  ];\n};\n\nmodule.exports = computedStyle;\n\n},{}],15:[function(require,module,exports){\n/**\n * lodash 4.0.3 (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\nvar keysIn = require('lodash.keysin'),\n    rest = require('lodash.rest');\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  value = (typeof value == 'number' || reIsUint.test(value)) ? +value : -1;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return value > -1 && value % 1 == 0 && value < length;\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if ((!eq(objValue, value) ||\n        (eq(objValue, objectProto[key]) && !hasOwnProperty.call(object, key))) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property names to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object) {\n  return copyObjectWith(source, props, object);\n}\n\n/**\n * This function is like `copyObject` except that it accepts a function to\n * customize copied values.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property names to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObjectWith(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : source[key];\n\n    assignValue(object, key, newValue);\n  }\n  return object;\n}\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return rest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = typeof customizer == 'function'\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\n/**\n * Gets the \"length\" property value of `object`.\n *\n * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)\n * that affects Safari on at least iOS 8.1-8.3 ARM64.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {*} Returns the \"length\" value.\n */\nvar getLength = baseProperty('length');\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call, else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n      ? (isArrayLike(object) && isIndex(index, object.length))\n      : (type == 'string' && index in object)) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\n/**\n * Performs a [`SameValueZero`](http://ecma-international.org/ecma-262/6.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'user': 'fred' };\n * var other = { 'user': 'fred' };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null &&\n    !(typeof value == 'function' && isFunction(value)) && isLength(getLength(value));\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8 which returns 'object' for typed array constructors, and\n  // PhantomJS 1.9 which returns 'function' for `NodeList` instances.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This function is loosely based on [`ToLength`](http://ecma-international.org/ecma-262/6.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * This method is like `_.assign` except that it iterates over own and\n * inherited source properties.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @alias extend\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * function Bar() {\n *   this.d = 4;\n * }\n *\n * Foo.prototype.c = 3;\n * Bar.prototype.e = 5;\n *\n * _.assignIn({ 'a': 1 }, new Foo, new Bar);\n * // => { 'a': 1, 'b': 2, 'c': 3, 'd': 4, 'e': 5 }\n */\nvar assignIn = createAssigner(function(object, source) {\n  copyObject(source, keysIn(source), object);\n});\n\nmodule.exports = assignIn;\n\n},{\"lodash.keysin\":16,\"lodash.rest\":18}],16:[function(require,module,exports){\n/**\n * lodash 4.1.1 (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\nvar root = require('lodash._root');\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    stringTag = '[object String]';\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  value = (typeof value == 'number' || reIsUint.test(value)) ? +value : -1;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return value > -1 && value % 1 == 0 && value < length;\n}\n\n/**\n * Converts `iterator` to an array.\n *\n * @private\n * @param {Object} iterator The iterator to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction iteratorToArray(iterator) {\n  var data,\n      result = [];\n\n  while (!(data = iterator.next()).done) {\n    result.push(data.value);\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar Reflect = root.Reflect,\n    enumerate = Reflect ? Reflect.enumerate : undefined,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * The base implementation of `_.keysIn` which doesn't skip the constructor\n * property of prototypes or treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  object = object == null ? object : Object(object);\n\n  var result = [];\n  for (var key in object) {\n    result.push(key);\n  }\n  return result;\n}\n\n// Fallback for IE < 9 with es6-shim.\nif (enumerate && !propertyIsEnumerable.call({ 'valueOf': 1 }, 'valueOf')) {\n  baseKeysIn = function(object) {\n    return iteratorToArray(enumerate(object));\n  };\n}\n\n/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\n/**\n * Gets the \"length\" property value of `object`.\n *\n * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)\n * that affects Safari on at least iOS 8.1-8.3 ARM64.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {*} Returns the \"length\" value.\n */\nvar getLength = baseProperty('length');\n\n/**\n * Creates an array of index keys for `object` values of arrays,\n * `arguments` objects, and strings, otherwise `null` is returned.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array|null} Returns index keys, else `null`.\n */\nfunction indexKeys(object) {\n  var length = object ? object.length : undefined;\n  if (isLength(length) &&\n      (isArray(object) || isString(object) || isArguments(object))) {\n    return baseTimes(length, String);\n  }\n  return null;\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 incorrectly makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @type {Function}\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null &&\n    !(typeof value == 'function' && isFunction(value)) && isLength(getLength(value));\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object, else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8 which returns 'object' for typed array constructors, and\n  // PhantomJS 1.9 which returns 'function' for `NodeList` instances.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This function is loosely based on [`ToLength`](http://ecma-international.org/ecma-262/6.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && objectToString.call(value) == stringTag);\n}\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  var index = -1,\n      isProto = isPrototype(object),\n      props = baseKeysIn(object),\n      propsLength = props.length,\n      indexes = indexKeys(object),\n      skipIndexes = !!indexes,\n      result = indexes || [],\n      length = result.length;\n\n  while (++index < propsLength) {\n    var key = props[index];\n    if (!(skipIndexes && (key == 'length' || isIndex(key, length))) &&\n        !(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = keysIn;\n\n},{\"lodash._root\":17}],17:[function(require,module,exports){\n(function (global){\n/**\n * lodash 3.0.1 (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/** Used to determine if values are of the language type `Object`. */\nvar objectTypes = {\n  'function': true,\n  'object': true\n};\n\n/** Detect free variable `exports`. */\nvar freeExports = (objectTypes[typeof exports] && exports && !exports.nodeType)\n  ? exports\n  : undefined;\n\n/** Detect free variable `module`. */\nvar freeModule = (objectTypes[typeof module] && module && !module.nodeType)\n  ? module\n  : undefined;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = checkGlobal(freeExports && freeModule && typeof global == 'object' && global);\n\n/** Detect free variable `self`. */\nvar freeSelf = checkGlobal(objectTypes[typeof self] && self);\n\n/** Detect free variable `window`. */\nvar freeWindow = checkGlobal(objectTypes[typeof window] && window);\n\n/** Detect `this` as the global object. */\nvar thisGlobal = checkGlobal(objectTypes[typeof this] && this);\n\n/**\n * Used as a reference to the global object.\n *\n * The `this` value is used if it's the global object to avoid Greasemonkey's\n * restricted `window` object, otherwise the `window` object is used.\n */\nvar root = freeGlobal ||\n  ((freeWindow !== (thisGlobal && thisGlobal.window)) && freeWindow) ||\n    freeSelf || thisGlobal || Function('return this')();\n\n/**\n * Checks if `value` is a global object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {null|Object} Returns `value` if it's a global object, else `null`.\n */\nfunction checkGlobal(value) {\n  return (value && value.Object === Object) ? value : null;\n}\n\nmodule.exports = root;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],18:[function(require,module,exports){\n/**\n * lodash 4.0.1 (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308,\n    NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {...*} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  var length = args.length;\n  switch (length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates a function that invokes `func` with the `this` binding of the\n * created function and arguments from `start` and beyond provided as an array.\n *\n * **Note:** This method is based on the [rest parameter](https://mdn.io/rest_parameters).\n *\n * @static\n * @memberOf _\n * @category Function\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var say = _.rest(function(what, names) {\n *   return what + ' ' + _.initial(names).join(', ') +\n *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n * });\n *\n * say('hello', 'fred', 'barney', 'pebbles');\n * // => 'hello fred, barney, & pebbles'\n */\nfunction rest(func, start) {\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  start = nativeMax(start === undefined ? (func.length - 1) : toInteger(start), 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    switch (start) {\n      case 0: return func.call(this, array);\n      case 1: return func.call(this, args[0], array);\n      case 2: return func.call(this, args[0], args[1], array);\n    }\n    var otherArgs = Array(start + 1);\n    index = -1;\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8 which returns 'object' for typed array constructors, and\n  // PhantomJS 1.9 which returns 'function' for `NodeList` instances.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This function is loosely based on [`ToInteger`](http://www.ecma-international.org/ecma-262/6.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3');\n * // => 3\n */\nfunction toInteger(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  var remainder = value % 1;\n  return value === value ? (remainder ? value - remainder : value) : 0;\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3);\n * // => 3\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3');\n * // => 3\n */\nfunction toNumber(value) {\n  if (isObject(value)) {\n    var other = isFunction(value.valueOf) ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = rest;\n\n},{}],19:[function(require,module,exports){\n/**\n * lodash 4.1.0 (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\nvar baseFlatten = require('lodash._baseflatten'),\n    bind = require('lodash.bind'),\n    rest = require('lodash.rest');\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Binds methods of an object to the object itself, overwriting the existing\n * method.\n *\n * **Note:** This method doesn't set the \"length\" property of bound functions.\n *\n * @static\n * @memberOf _\n * @category Util\n * @param {Object} object The object to bind and assign the bound methods to.\n * @param {...(string|string[])} methodNames The object method names to bind,\n *  specified individually or in arrays.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var view = {\n *   'label': 'docs',\n *   'onClick': function() {\n *     console.log('clicked ' + this.label);\n *   }\n * };\n *\n * _.bindAll(view, 'onClick');\n * jQuery(element).on('click', view.onClick);\n * // => logs 'clicked docs' when clicked\n */\nvar bindAll = rest(function(object, methodNames) {\n  arrayEach(baseFlatten(methodNames, 1), function(key) {\n    object[key] = bind(object[key], object);\n  });\n  return object;\n});\n\nmodule.exports = bindAll;\n\n},{\"lodash._baseflatten\":20,\"lodash.bind\":21,\"lodash.rest\":23}],20:[function(require,module,exports){\n/**\n * lodash 4.1.1 (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [isStrict] Restrict flattening to arrays-like objects.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, isStrict, result) {\n  result || (result = []);\n\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && isArrayLikeObject(value) &&\n        (isStrict || isArray(value) || isArguments(value))) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\n/**\n * Gets the \"length\" property value of `object`.\n *\n * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)\n * that affects Safari on at least iOS 8.1-8.3 ARM64.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {*} Returns the \"length\" value.\n */\nvar getLength = baseProperty('length');\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 incorrectly makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @type {Function}\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(getLength(value)) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object, else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8 which returns 'object' for typed array and weak map constructors,\n  // and PhantomJS 1.9 which returns 'function' for `NodeList` instances.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This function is loosely based on [`ToLength`](http://ecma-international.org/ecma-262/6.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\nmodule.exports = baseFlatten;\n\n},{}],21:[function(require,module,exports){\n/**\n * lodash 4.1.2 (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\nvar createWrapper = require('lodash._createwrapper'),\n    rest = require('lodash.rest');\n\n/** Used as the internal argument placeholder. */\nvar PLACEHOLDER = '__lodash_placeholder__';\n\n/** Used to compose bitmasks for wrapper metadata. */\nvar BIND_FLAG = 1,\n    PARTIAL_FLAG = 32;\n\n/**\n * Replaces all `placeholder` elements in `array` with an internal placeholder\n * and returns an array of their indexes.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {*} placeholder The placeholder to replace.\n * @returns {Array} Returns the new array of placeholder indexes.\n */\nfunction replaceHolders(array, placeholder) {\n  var index = -1,\n      length = array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (value === placeholder || value === PLACEHOLDER) {\n      array[index] = PLACEHOLDER;\n      result[resIndex++] = index;\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the argument placeholder value for `func`.\n *\n * @private\n * @param {Function} func The function to inspect.\n * @returns {*} Returns the placeholder value.\n */\nfunction getPlaceholder(func) {\n  var object = func;\n  return object.placeholder;\n}\n\n/**\n * Creates a function that invokes `func` with the `this` binding of `thisArg`\n * and prepends any additional `_.bind` arguments to those provided to the\n * bound function.\n *\n * The `_.bind.placeholder` value, which defaults to `_` in monolithic builds,\n * may be used as a placeholder for partially applied arguments.\n *\n * **Note:** Unlike native `Function#bind` this method doesn't set the \"length\"\n * property of bound functions.\n *\n * @static\n * @memberOf _\n * @category Function\n * @param {Function} func The function to bind.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {...*} [partials] The arguments to be partially applied.\n * @returns {Function} Returns the new bound function.\n * @example\n *\n * var greet = function(greeting, punctuation) {\n *   return greeting + ' ' + this.user + punctuation;\n * };\n *\n * var object = { 'user': 'fred' };\n *\n * var bound = _.bind(greet, object, 'hi');\n * bound('!');\n * // => 'hi fred!'\n *\n * // Bound with placeholders.\n * var bound = _.bind(greet, object, _, '!');\n * bound('hi');\n * // => 'hi fred!'\n */\nvar bind = rest(function(func, thisArg, partials) {\n  var bitmask = BIND_FLAG;\n  if (partials.length) {\n    var holders = replaceHolders(partials, getPlaceholder(bind));\n    bitmask |= PARTIAL_FLAG;\n  }\n  return createWrapper(func, bitmask, thisArg, partials, holders);\n});\n\n// Assign default placeholders.\nbind.placeholder = {};\n\nmodule.exports = bind;\n\n},{\"lodash._createwrapper\":22,\"lodash.rest\":23}],22:[function(require,module,exports){\n(function (global){\n/**\n * lodash 4.0.2 (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as the internal argument placeholder. */\nvar PLACEHOLDER = '__lodash_placeholder__';\n\n/** Used to compose bitmasks for wrapper metadata. */\nvar BIND_FLAG = 1,\n    BIND_KEY_FLAG = 2,\n    CURRY_BOUND_FLAG = 4,\n    CURRY_FLAG = 8,\n    CURRY_RIGHT_FLAG = 16,\n    PARTIAL_FLAG = 32,\n    PARTIAL_RIGHT_FLAG = 64,\n    ARY_FLAG = 128,\n    FLIP_FLAG = 512;\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991,\n    MAX_INTEGER = 1.7976931348623157e+308,\n    NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to determine if values are of the language type `Object`. */\nvar objectTypes = {\n  'function': true,\n  'object': true\n};\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `exports`. */\nvar freeExports = (objectTypes[typeof exports] && exports && !exports.nodeType)\n  ? exports\n  : undefined;\n\n/** Detect free variable `module`. */\nvar freeModule = (objectTypes[typeof module] && module && !module.nodeType)\n  ? module\n  : undefined;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = checkGlobal(freeExports && freeModule && typeof global == 'object' && global);\n\n/** Detect free variable `self`. */\nvar freeSelf = checkGlobal(objectTypes[typeof self] && self);\n\n/** Detect free variable `window`. */\nvar freeWindow = checkGlobal(objectTypes[typeof window] && window);\n\n/** Detect `this` as the global object. */\nvar thisGlobal = checkGlobal(objectTypes[typeof this] && this);\n\n/**\n * Used as a reference to the global object.\n *\n * The `this` value is used if it's the global object to avoid Greasemonkey's\n * restricted `window` object, otherwise the `window` object is used.\n */\nvar root = freeGlobal ||\n  ((freeWindow !== (thisGlobal && thisGlobal.window)) && freeWindow) ||\n    freeSelf || thisGlobal || Function('return this')();\n\n/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {...*} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  var length = args.length;\n  switch (length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\n/**\n * Checks if `value` is a global object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {null|Object} Returns `value` if it's a global object, else `null`.\n */\nfunction checkGlobal(value) {\n  return (value && value.Object === Object) ? value : null;\n}\n\n/**\n * Gets the number of `placeholder` occurrences in `array`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} placeholder The placeholder to search for.\n * @returns {number} Returns the placeholder count.\n */\nfunction countHolders(array, placeholder) {\n  var length = array.length,\n      result = 0;\n\n  while (length--) {\n    if (array[length] === placeholder) {\n      result++;\n    }\n  }\n  return result;\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  value = (typeof value == 'number' || reIsUint.test(value)) ? +value : -1;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return value > -1 && value % 1 == 0 && value < length;\n}\n\n/**\n * Replaces all `placeholder` elements in `array` with an internal placeholder\n * and returns an array of their indexes.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {*} placeholder The placeholder to replace.\n * @returns {Array} Returns the new array of placeholder indexes.\n */\nfunction replaceHolders(array, placeholder) {\n  var index = -1,\n      length = array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (value === placeholder || value === PLACEHOLDER) {\n      array[index] = PLACEHOLDER;\n      result[resIndex++] = index;\n    }\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\n/**\n * Creates an array that is the composition of partially applied arguments,\n * placeholders, and provided arguments into a single array of arguments.\n *\n * @private\n * @param {Array|Object} args The provided arguments.\n * @param {Array} partials The arguments to prepend to those provided.\n * @param {Array} holders The `partials` placeholder indexes.\n * @params {boolean} [isCurried] Specify composing for a curried function.\n * @returns {Array} Returns the new array of composed arguments.\n */\nfunction composeArgs(args, partials, holders, isCurried) {\n  var argsIndex = -1,\n      argsLength = args.length,\n      holdersLength = holders.length,\n      leftIndex = -1,\n      leftLength = partials.length,\n      rangeLength = nativeMax(argsLength - holdersLength, 0),\n      result = Array(leftLength + rangeLength),\n      isUncurried = !isCurried;\n\n  while (++leftIndex < leftLength) {\n    result[leftIndex] = partials[leftIndex];\n  }\n  while (++argsIndex < holdersLength) {\n    if (isUncurried || argsIndex < argsLength) {\n      result[holders[argsIndex]] = args[argsIndex];\n    }\n  }\n  while (rangeLength--) {\n    result[leftIndex++] = args[argsIndex++];\n  }\n  return result;\n}\n\n/**\n * This function is like `composeArgs` except that the arguments composition\n * is tailored for `_.partialRight`.\n *\n * @private\n * @param {Array|Object} args The provided arguments.\n * @param {Array} partials The arguments to append to those provided.\n * @param {Array} holders The `partials` placeholder indexes.\n * @params {boolean} [isCurried] Specify composing for a curried function.\n * @returns {Array} Returns the new array of composed arguments.\n */\nfunction composeArgsRight(args, partials, holders, isCurried) {\n  var argsIndex = -1,\n      argsLength = args.length,\n      holdersIndex = -1,\n      holdersLength = holders.length,\n      rightIndex = -1,\n      rightLength = partials.length,\n      rangeLength = nativeMax(argsLength - holdersLength, 0),\n      result = Array(rangeLength + rightLength),\n      isUncurried = !isCurried;\n\n  while (++argsIndex < rangeLength) {\n    result[argsIndex] = args[argsIndex];\n  }\n  var offset = argsIndex;\n  while (++rightIndex < rightLength) {\n    result[offset + rightIndex] = partials[rightIndex];\n  }\n  while (++holdersIndex < holdersLength) {\n    if (isUncurried || argsIndex < argsLength) {\n      result[offset + holders[holdersIndex]] = args[argsIndex++];\n    }\n  }\n  return result;\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Creates a function that wraps `func` to invoke it with the optional `this`\n * binding of `thisArg`.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask of wrapper flags. See `createWrapper` for more details.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createBaseWrapper(func, bitmask, thisArg) {\n  var isBind = bitmask & BIND_FLAG,\n      Ctor = createCtorWrapper(func);\n\n  function wrapper() {\n    var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n    return fn.apply(isBind ? thisArg : this, arguments);\n  }\n  return wrapper;\n}\n\n/**\n * Creates a function that produces an instance of `Ctor` regardless of\n * whether it was invoked as part of a `new` expression or by `call` or `apply`.\n *\n * @private\n * @param {Function} Ctor The constructor to wrap.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createCtorWrapper(Ctor) {\n  return function() {\n    // Use a `switch` statement to work with class constructors.\n    // See http://ecma-international.org/ecma-262/6.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist\n    // for more details.\n    var args = arguments;\n    switch (args.length) {\n      case 0: return new Ctor;\n      case 1: return new Ctor(args[0]);\n      case 2: return new Ctor(args[0], args[1]);\n      case 3: return new Ctor(args[0], args[1], args[2]);\n      case 4: return new Ctor(args[0], args[1], args[2], args[3]);\n      case 5: return new Ctor(args[0], args[1], args[2], args[3], args[4]);\n      case 6: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);\n      case 7: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);\n    }\n    var thisBinding = baseCreate(Ctor.prototype),\n        result = Ctor.apply(thisBinding, args);\n\n    // Mimic the constructor's `return` behavior.\n    // See https://es5.github.io/#x13.2.2 for more details.\n    return isObject(result) ? result : thisBinding;\n  };\n}\n\n/**\n * Creates a function that wraps `func` to enable currying.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask of wrapper flags. See `createWrapper` for more details.\n * @param {number} arity The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createCurryWrapper(func, bitmask, arity) {\n  var Ctor = createCtorWrapper(func);\n\n  function wrapper() {\n    var length = arguments.length,\n        args = Array(length),\n        index = length,\n        placeholder = getPlaceholder(wrapper);\n\n    while (index--) {\n      args[index] = arguments[index];\n    }\n    var holders = (length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder)\n      ? []\n      : replaceHolders(args, placeholder);\n\n    length -= holders.length;\n    if (length < arity) {\n      return createRecurryWrapper(\n        func, bitmask, createHybridWrapper, wrapper.placeholder, undefined,\n        args, holders, undefined, undefined, arity - length);\n    }\n    var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n    return apply(fn, this, args);\n  }\n  return wrapper;\n}\n\n/**\n * Creates a function that wraps `func` to invoke it with optional `this`\n * binding of `thisArg`, partial application, and currying.\n *\n * @private\n * @param {Function|string} func The function or method name to wrap.\n * @param {number} bitmask The bitmask of wrapper flags. See `createWrapper` for more details.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {Array} [partials] The arguments to prepend to those provided to the new function.\n * @param {Array} [holders] The `partials` placeholder indexes.\n * @param {Array} [partialsRight] The arguments to append to those provided to the new function.\n * @param {Array} [holdersRight] The `partialsRight` placeholder indexes.\n * @param {Array} [argPos] The argument positions of the new function.\n * @param {number} [ary] The arity cap of `func`.\n * @param {number} [arity] The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createHybridWrapper(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {\n  var isAry = bitmask & ARY_FLAG,\n      isBind = bitmask & BIND_FLAG,\n      isBindKey = bitmask & BIND_KEY_FLAG,\n      isCurried = bitmask & (CURRY_FLAG | CURRY_RIGHT_FLAG),\n      isFlip = bitmask & FLIP_FLAG,\n      Ctor = isBindKey ? undefined : createCtorWrapper(func);\n\n  function wrapper() {\n    var length = arguments.length,\n        index = length,\n        args = Array(length);\n\n    while (index--) {\n      args[index] = arguments[index];\n    }\n    if (isCurried) {\n      var placeholder = getPlaceholder(wrapper),\n          holdersCount = countHolders(args, placeholder);\n    }\n    if (partials) {\n      args = composeArgs(args, partials, holders, isCurried);\n    }\n    if (partialsRight) {\n      args = composeArgsRight(args, partialsRight, holdersRight, isCurried);\n    }\n    length -= holdersCount;\n    if (isCurried && length < arity) {\n      var newHolders = replaceHolders(args, placeholder);\n      return createRecurryWrapper(\n        func, bitmask, createHybridWrapper, wrapper.placeholder, thisArg,\n        args, newHolders, argPos, ary, arity - length\n      );\n    }\n    var thisBinding = isBind ? thisArg : this,\n        fn = isBindKey ? thisBinding[func] : func;\n\n    length = args.length;\n    if (argPos) {\n      args = reorder(args, argPos);\n    } else if (isFlip && length > 1) {\n      args.reverse();\n    }\n    if (isAry && ary < length) {\n      args.length = ary;\n    }\n    if (this && this !== root && this instanceof wrapper) {\n      fn = Ctor || createCtorWrapper(fn);\n    }\n    return fn.apply(thisBinding, args);\n  }\n  return wrapper;\n}\n\n/**\n * Creates a function that wraps `func` to invoke it with the optional `this`\n * binding of `thisArg` and the `partials` prepended to those provided to\n * the wrapper.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask of wrapper flags. See `createWrapper` for more details.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} partials The arguments to prepend to those provided to the new function.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createPartialWrapper(func, bitmask, thisArg, partials) {\n  var isBind = bitmask & BIND_FLAG,\n      Ctor = createCtorWrapper(func);\n\n  function wrapper() {\n    var argsIndex = -1,\n        argsLength = arguments.length,\n        leftIndex = -1,\n        leftLength = partials.length,\n        args = Array(leftLength + argsLength),\n        fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n\n    while (++leftIndex < leftLength) {\n      args[leftIndex] = partials[leftIndex];\n    }\n    while (argsLength--) {\n      args[leftIndex++] = arguments[++argsIndex];\n    }\n    return apply(fn, isBind ? thisArg : this, args);\n  }\n  return wrapper;\n}\n\n/**\n * Creates a function that wraps `func` to continue currying.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask of wrapper flags. See `createWrapper` for more details.\n * @param {Function} wrapFunc The function to create the `func` wrapper.\n * @param {*} placeholder The placeholder value.\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {Array} [partials] The arguments to prepend to those provided to the new function.\n * @param {Array} [holders] The `partials` placeholder indexes.\n * @param {Array} [argPos] The argument positions of the new function.\n * @param {number} [ary] The arity cap of `func`.\n * @param {number} [arity] The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createRecurryWrapper(func, bitmask, wrapFunc, placeholder, thisArg, partials, holders, argPos, ary, arity) {\n  var isCurry = bitmask & CURRY_FLAG,\n      newArgPos = argPos ? copyArray(argPos) : undefined,\n      newHolders = isCurry ? holders : undefined,\n      newHoldersRight = isCurry ? undefined : holders,\n      newPartials = isCurry ? partials : undefined,\n      newPartialsRight = isCurry ? undefined : partials;\n\n  bitmask |= (isCurry ? PARTIAL_FLAG : PARTIAL_RIGHT_FLAG);\n  bitmask &= ~(isCurry ? PARTIAL_RIGHT_FLAG : PARTIAL_FLAG);\n\n  if (!(bitmask & CURRY_BOUND_FLAG)) {\n    bitmask &= ~(BIND_FLAG | BIND_KEY_FLAG);\n  }\n\n  var result = wrapFunc(func, bitmask, thisArg, newPartials, newHolders, newPartialsRight, newHoldersRight, newArgPos, ary, arity);\n  result.placeholder = placeholder;\n  return result;\n}\n\n/**\n * Creates a function that either curries or invokes `func` with optional\n * `this` binding and partially applied arguments.\n *\n * @private\n * @param {Function|string} func The function or method name to wrap.\n * @param {number} bitmask The bitmask of wrapper flags.\n *  The bitmask may be composed of the following flags:\n *     1 - `_.bind`\n *     2 - `_.bindKey`\n *     4 - `_.curry` or `_.curryRight` of a bound function\n *     8 - `_.curry`\n *    16 - `_.curryRight`\n *    32 - `_.partial`\n *    64 - `_.partialRight`\n *   128 - `_.rearg`\n *   256 - `_.ary`\n * @param {*} [thisArg] The `this` binding of `func`.\n * @param {Array} [partials] The arguments to be partially applied.\n * @param {Array} [holders] The `partials` placeholder indexes.\n * @param {Array} [argPos] The argument positions of the new function.\n * @param {number} [ary] The arity cap of `func`.\n * @param {number} [arity] The arity of `func`.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createWrapper(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {\n  var isBindKey = bitmask & BIND_KEY_FLAG;\n  if (!isBindKey && typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var length = partials ? partials.length : 0;\n  if (!length) {\n    bitmask &= ~(PARTIAL_FLAG | PARTIAL_RIGHT_FLAG);\n    partials = holders = undefined;\n  }\n  ary = ary === undefined ? ary : nativeMax(toInteger(ary), 0);\n  arity = arity === undefined ? arity : toInteger(arity);\n  length -= holders ? holders.length : 0;\n\n  if (bitmask & PARTIAL_RIGHT_FLAG) {\n    var partialsRight = partials,\n        holdersRight = holders;\n\n    partials = holders = undefined;\n  }\n\n  var newData = [\n    func, bitmask, thisArg, partials, holders, partialsRight, holdersRight,\n    argPos, ary, arity\n  ];\n\n  func = newData[0];\n  bitmask = newData[1];\n  thisArg = newData[2];\n  partials = newData[3];\n  holders = newData[4];\n  arity = newData[9] = newData[9] == null\n    ? (isBindKey ? 0 : func.length)\n    : nativeMax(newData[9] - length, 0);\n\n  if (!arity && bitmask & (CURRY_FLAG | CURRY_RIGHT_FLAG)) {\n    bitmask &= ~(CURRY_FLAG | CURRY_RIGHT_FLAG);\n  }\n  if (!bitmask || bitmask == BIND_FLAG) {\n    var result = createBaseWrapper(func, bitmask, thisArg);\n  } else if (bitmask == CURRY_FLAG || bitmask == CURRY_RIGHT_FLAG) {\n    result = createCurryWrapper(func, bitmask, arity);\n  } else if ((bitmask == PARTIAL_FLAG || bitmask == (BIND_FLAG | PARTIAL_FLAG)) && !holders.length) {\n    result = createPartialWrapper(func, bitmask, thisArg, partials);\n  } else {\n    result = createHybridWrapper.apply(undefined, newData);\n  }\n  return result;\n}\n\n/**\n * Gets the argument placeholder value for `func`.\n *\n * @private\n * @param {Function} func The function to inspect.\n * @returns {*} Returns the placeholder value.\n */\nfunction getPlaceholder(func) {\n  var object = func;\n  return object.placeholder;\n}\n\n/**\n * Reorder `array` according to the specified indexes where the element at\n * the first index is assigned as the first element, the element at\n * the second index is assigned as the second element, and so on.\n *\n * @private\n * @param {Array} array The array to reorder.\n * @param {Array} indexes The arranged array indexes.\n * @returns {Array} Returns `array`.\n */\nfunction reorder(array, indexes) {\n  var arrLength = array.length,\n      length = nativeMin(indexes.length, arrLength),\n      oldArray = copyArray(array);\n\n  while (length--) {\n    var index = indexes[length];\n    array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined;\n  }\n  return array;\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8 which returns 'object' for typed array and weak map constructors,\n  // and PhantomJS 1.9 which returns 'function' for `NodeList` instances.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This function is loosely based on [`ToInteger`](http://www.ecma-international.org/ecma-262/6.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3');\n * // => 3\n */\nfunction toInteger(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  var remainder = value % 1;\n  return value === value ? (remainder ? value - remainder : value) : 0;\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3);\n * // => 3\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3');\n * // => 3\n */\nfunction toNumber(value) {\n  if (isObject(value)) {\n    var other = isFunction(value.valueOf) ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = createWrapper;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],23:[function(require,module,exports){\narguments[4][18][0].apply(exports,arguments)\n},{\"dup\":18}],24:[function(require,module,exports){\n/**\n * lodash 3.0.8 (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8 which returns 'object' for typed array constructors, and\n  // PhantomJS 1.9 which returns 'function' for `NodeList` instances.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isFunction;\n\n},{}],25:[function(require,module,exports){\n/**\n * lodash 4.0.1 (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @type Function\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && objectToString.call(value) == stringTag);\n}\n\nmodule.exports = isString;\n\n},{}],26:[function(require,module,exports){\n/**\n * lodash 4.0.0 (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\nvar toString = require('lodash.tostring');\n\n/** Used to generate unique IDs. */\nvar idCounter = 0;\n\n/**\n * Generates a unique ID. If `prefix` is given the ID is appended to it.\n *\n * @static\n * @memberOf _\n * @category Util\n * @param {string} [prefix] The value to prefix the ID with.\n * @returns {string} Returns the unique ID.\n * @example\n *\n * _.uniqueId('contact_');\n * // => 'contact_104'\n *\n * _.uniqueId();\n * // => '105'\n */\nfunction uniqueId(prefix) {\n  var id = ++idCounter;\n  return toString(prefix) + id;\n}\n\nmodule.exports = uniqueId;\n\n},{\"lodash.tostring\":27}],27:[function(require,module,exports){\n(function (global){\n/**\n * lodash 4.1.1 (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to determine if values are of the language type `Object`. */\nvar objectTypes = {\n  'function': true,\n  'object': true\n};\n\n/** Detect free variable `exports`. */\nvar freeExports = (objectTypes[typeof exports] && exports && !exports.nodeType)\n  ? exports\n  : undefined;\n\n/** Detect free variable `module`. */\nvar freeModule = (objectTypes[typeof module] && module && !module.nodeType)\n  ? module\n  : undefined;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = checkGlobal(freeExports && freeModule && typeof global == 'object' && global);\n\n/** Detect free variable `self`. */\nvar freeSelf = checkGlobal(objectTypes[typeof self] && self);\n\n/** Detect free variable `window`. */\nvar freeWindow = checkGlobal(objectTypes[typeof window] && window);\n\n/** Detect `this` as the global object. */\nvar thisGlobal = checkGlobal(objectTypes[typeof this] && this);\n\n/**\n * Used as a reference to the global object.\n *\n * The `this` value is used if it's the global object to avoid Greasemonkey's\n * restricted `window` object, otherwise the `window` object is used.\n */\nvar root = freeGlobal ||\n  ((freeWindow !== (thisGlobal && thisGlobal.window)) && freeWindow) ||\n    freeSelf || thisGlobal || Function('return this')();\n\n/**\n * Checks if `value` is a global object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {null|Object} Returns `value` if it's a global object, else `null`.\n */\nfunction checkGlobal(value) {\n  return (value && value.Object === Object) ? value : null;\n}\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = Symbol ? symbolProto.toString : undefined;\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a string if it's not one. An empty string is returned\n * for `null` and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (value == null) {\n    return '';\n  }\n  if (isSymbol(value)) {\n    return Symbol ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toString;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n},{}],28:[function(require,module,exports){\n/* jshint browser: true */\n\n(function () {\n\n// The properties that we copy into a mirrored div.\n// Note that some browsers, such as Firefox,\n// do not concatenate properties, i.e. padding-top, bottom etc. -> padding,\n// so we have to do every single property specifically.\nvar properties = [\n  'direction',  // RTL support\n  'boxSizing',\n  'width',  // on Chrome and IE, exclude the scrollbar, so the mirror div wraps exactly as the textarea does\n  'height',\n  'overflowX',\n  'overflowY',  // copy the scrollbar for IE\n\n  'borderTopWidth',\n  'borderRightWidth',\n  'borderBottomWidth',\n  'borderLeftWidth',\n  'borderStyle',\n\n  'paddingTop',\n  'paddingRight',\n  'paddingBottom',\n  'paddingLeft',\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/font\n  'fontStyle',\n  'fontVariant',\n  'fontWeight',\n  'fontStretch',\n  'fontSize',\n  'fontSizeAdjust',\n  'lineHeight',\n  'fontFamily',\n\n  'textAlign',\n  'textTransform',\n  'textIndent',\n  'textDecoration',  // might not make a difference, but better be safe\n\n  'letterSpacing',\n  'wordSpacing',\n\n  'tabSize',\n  'MozTabSize'\n\n];\n\nvar isBrowser = (typeof window !== 'undefined');\nvar isFirefox = (isBrowser && window.mozInnerScreenX != null);\n\nfunction getCaretCoordinates(element, position, options) {\n  if(!isBrowser) {\n    throw new Error('textarea-caret-position#getCaretCoordinates should only be called in a browser');\n  }\n\n  var debug = options && options.debug || false;\n  if (debug) {\n    var el = document.querySelector('#input-textarea-caret-position-mirror-div');\n    if ( el ) { el.parentNode.removeChild(el); }\n  }\n\n  // mirrored div\n  var div = document.createElement('div');\n  div.id = 'input-textarea-caret-position-mirror-div';\n  document.body.appendChild(div);\n\n  var style = div.style;\n  var computed = window.getComputedStyle? getComputedStyle(element) : element.currentStyle;  // currentStyle for IE < 9\n\n  // default textarea styles\n  style.whiteSpace = 'pre-wrap';\n  if (element.nodeName !== 'INPUT')\n    style.wordWrap = 'break-word';  // only for textarea-s\n\n  // position off-screen\n  style.position = 'absolute';  // required to return coordinates properly\n  if (!debug)\n    style.visibility = 'hidden';  // not 'display: none' because we want rendering\n\n  // transfer the element's properties to the div\n  properties.forEach(function (prop) {\n    style[prop] = computed[prop];\n  });\n\n  if (isFirefox) {\n    // Firefox lies about the overflow property for textareas: https://bugzilla.mozilla.org/show_bug.cgi?id=984275\n    if (element.scrollHeight > parseInt(computed.height))\n      style.overflowY = 'scroll';\n  } else {\n    style.overflow = 'hidden';  // for Chrome to not render a scrollbar; IE keeps overflowY = 'scroll'\n  }\n\n  div.textContent = element.value.substring(0, position);\n  // the second special handling for input type=\"text\" vs textarea: spaces need to be replaced with non-breaking spaces - http://stackoverflow.com/a/13402035/1269037\n  if (element.nodeName === 'INPUT')\n    div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\n\n  var span = document.createElement('span');\n  // Wrapping must be replicated *exactly*, including when a long word gets\n  // onto the next line, with whitespace at the end of the line before (#7).\n  // The  *only* reliable way to do that is to copy the *entire* rest of the\n  // textarea's content into the <span> created at the caret position.\n  // for inputs, just '.' would be enough, but why bother?\n  span.textContent = element.value.substring(position) || '.';  // || because a completely empty faux span doesn't render at all\n  div.appendChild(span);\n\n  var coordinates = {\n    top: span.offsetTop + parseInt(computed['borderTopWidth']),\n    left: span.offsetLeft + parseInt(computed['borderLeftWidth'])\n  };\n\n  if (debug) {\n    span.style.backgroundColor = '#aaa';\n  } else {\n    document.body.removeChild(div);\n  }\n\n  return coordinates;\n}\n\nif (typeof module != 'undefined' && typeof module.exports != 'undefined') {\n  module.exports = getCaretCoordinates;\n} else if(isBrowser){\n  window.getCaretCoordinates = getCaretCoordinates;\n}\n\n}());\n\n},{}]},{},[5]);\n"],"sourceRoot":"/source/"}